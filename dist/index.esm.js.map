{"version":3,"file":"index.esm.js","sources":["../src/hooks/useImageUpload.ts","../src/hooks/useImageTransform.ts","../src/hooks/useResponsive.ts","../src/components/Controls.tsx","../src/components/LayerPanel.tsx","../src/utils/canvas.ts","../src/components/TShirtBuilder.tsx"],"sourcesContent":["import { useCallback, useRef, useState } from 'react';\nimport type { ImageData, ImageTransform, EditorConfig } from '../types';\n\nconst DEFAULT_ACCEPTED_TYPES = ['image/png', 'image/jpeg', 'image/webp', 'image/gif'];\nconst DEFAULT_MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\n\nfunction generateId(): string {\n  return Math.random().toString(36).substring(2, 11);\n}\n\nexport interface UploadState {\n  /** Whether an upload is currently in progress */\n  isUploading: boolean;\n  /** Upload progress percentage (0-100) */\n  progress: number;\n  /** File name being uploaded */\n  fileName: string | null;\n}\n\ninterface UseImageUploadOptions {\n  config: EditorConfig;\n  onImageLoad: (imageData: ImageData) => void;\n  onError?: (error: string) => void;\n  /** Enable mobile-optimized upload experience */\n  isMobile?: boolean;\n}\n\nexport function useImageUpload({ config, onImageLoad, onError, isMobile = false }: UseImageUploadOptions) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [uploadState, setUploadState] = useState<UploadState>({\n    isUploading: false,\n    progress: 0,\n    fileName: null\n  });\n\n  const acceptedTypes = config.acceptedFileTypes || DEFAULT_ACCEPTED_TYPES;\n  const maxFileSize = config.maxFileSize || DEFAULT_MAX_FILE_SIZE;\n\n  // For mobile, use image/* to allow camera and all image types\n  // For desktop, use specific MIME types\n  const acceptAttribute = isMobile ? 'image/*' : acceptedTypes.join(',');\n\n  const processFile = useCallback(\n    (file: File) => {\n      // For mobile, be more lenient with MIME types (camera may return different types)\n      // Check if it's an image by prefix\n      const isImage = file.type.startsWith('image/') || acceptedTypes.includes(file.type);\n\n      if (!isImage) {\n        onError?.(`Невалиден тип файл. Позволени: ${acceptedTypes.join(', ')}`);\n        return;\n      }\n\n      // Validate file size\n      if (file.size > maxFileSize) {\n        onError?.(`Файлът е твърде голям. Максимален размер: ${Math.round(maxFileSize / 1024 / 1024)}MB`);\n        return;\n      }\n\n      // Set uploading state\n      setUploadState({\n        isUploading: true,\n        progress: 0,\n        fileName: file.name\n      });\n\n      const reader = new FileReader();\n\n      // Track progress for visual feedback\n      reader.onprogress = (event) => {\n        if (event.lengthComputable) {\n          const progress = Math.round((event.loaded / event.total) * 50); // 0-50% for reading\n          setUploadState(prev => ({ ...prev, progress }));\n        }\n      };\n\n      reader.onload = (e) => {\n        const src = e.target?.result as string;\n        const img = new Image();\n\n        // Update progress - file read complete, now loading image\n        setUploadState(prev => ({ ...prev, progress: 60 }));\n\n        img.onload = () => {\n          setUploadState(prev => ({ ...prev, progress: 80 }));\n\n          const { naturalWidth, naturalHeight } = img;\n\n          // Calculate initial size to fit within editor while maintaining aspect ratio\n          const printableArea = config.printableArea || {\n            minX: 0,\n            minY: 0,\n            maxX: config.width,\n            maxY: config.height,\n          };\n\n          const areaWidth = printableArea.maxX - printableArea.minX;\n          const areaHeight = printableArea.maxY - printableArea.minY;\n\n          const aspectRatio = naturalWidth / naturalHeight;\n          let width: number;\n          let height: number;\n\n          // Fit image to 60% of printable area by default\n          const targetSize = Math.min(areaWidth, areaHeight) * 0.6;\n\n          if (aspectRatio > 1) {\n            width = targetSize;\n            height = targetSize / aspectRatio;\n          } else {\n            height = targetSize;\n            width = targetSize * aspectRatio;\n          }\n\n          // Center in printable area\n          const x = printableArea.minX + (areaWidth - width) / 2;\n          const y = printableArea.minY + (areaHeight - height) / 2;\n\n          const transform: ImageTransform = {\n            position: { x, y },\n            size: { width, height },\n            rotation: 0,\n          };\n\n          // Complete - 100%\n          setUploadState(prev => ({ ...prev, progress: 100 }));\n\n          onImageLoad({\n            id: generateId(),\n            src,\n            naturalWidth,\n            naturalHeight,\n            transform,\n          });\n\n          // Reset upload state after a brief delay for visual feedback\n          setTimeout(() => {\n            setUploadState({\n              isUploading: false,\n              progress: 0,\n              fileName: null\n            });\n          }, 300);\n        };\n\n        img.onerror = () => {\n          setUploadState({\n            isUploading: false,\n            progress: 0,\n            fileName: null\n          });\n          onError?.('Грешка при зареждане на изображението');\n        };\n\n        img.src = src;\n      };\n\n      reader.onerror = () => {\n        setUploadState({\n          isUploading: false,\n          progress: 0,\n          fileName: null\n        });\n        onError?.('Грешка при четене на файла');\n      };\n\n      reader.readAsDataURL(file);\n    },\n    [acceptedTypes, maxFileSize, config, onImageLoad, onError]\n  );\n\n  const handleFileChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      const file = event.target.files?.[0];\n      if (file) {\n        processFile(file);\n      }\n      // Reset input so the same file can be selected again\n      if (inputRef.current) {\n        inputRef.current.value = '';\n      }\n    },\n    [processFile]\n  );\n\n  const handleDrop = useCallback(\n    (event: React.DragEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const file = event.dataTransfer.files?.[0];\n      if (file) {\n        processFile(file);\n      }\n    },\n    [processFile]\n  );\n\n  const handleDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  }, []);\n\n  const openFilePicker = useCallback(() => {\n    inputRef.current?.click();\n  }, []);\n\n  // Handle paste from clipboard\n  const handlePaste = useCallback(\n    (event: ClipboardEvent) => {\n      const items = event.clipboardData?.items;\n      if (!items) return;\n\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i];\n        if (item.type.startsWith('image/')) {\n          const file = item.getAsFile();\n          if (file) {\n            event.preventDefault();\n            processFile(file);\n            return;\n          }\n        }\n      }\n    },\n    [processFile]\n  );\n\n  return {\n    inputRef,\n    handleFileChange,\n    handleDrop,\n    handleDragOver,\n    openFilePicker,\n    handlePaste,\n    acceptedTypes,\n    acceptAttribute,\n    uploadState,\n    isMobile,\n  };\n}\n","import { useState, useCallback, useRef, useEffect } from 'react';\nimport type {\n  ImageData,\n  ImageTransform,\n  DragState,\n  DragMode,\n  ControlHandle,\n  EditorConfig,\n} from '../types';\n\n// Extend DragState to include pointerId for pointer capture\ninterface ExtendedDragState extends DragState {\n  pointerId?: number;\n  element?: HTMLElement;\n}\n\n// State for pinch gesture\ninterface PinchState {\n  imageId: string;\n  startDistance: number;\n  startTransform: ImageTransform;\n  startCenter: { x: number; y: number };\n}\n\n// Touch point interface for cross-compatibility\ninterface TouchPoint {\n  clientX: number;\n  clientY: number;\n}\n\n// Calculate distance between two touch points\nfunction getTouchDistance(touch1: TouchPoint, touch2: TouchPoint): number {\n  const dx = touch1.clientX - touch2.clientX;\n  const dy = touch1.clientY - touch2.clientY;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n// Calculate center point between two touches\nfunction getTouchCenter(touch1: TouchPoint, touch2: TouchPoint): { x: number; y: number } {\n  return {\n    x: (touch1.clientX + touch2.clientX) / 2,\n    y: (touch1.clientY + touch2.clientY) / 2,\n  };\n}\n\ninterface UseImageTransformOptions {\n  images: ImageData[];\n  config: EditorConfig;\n  containerRef: React.RefObject<HTMLElement>;\n  onChange?: (images: ImageData[]) => void;\n  /** Display scale factor for responsive mode (default: 1) */\n  displayScale?: number;\n}\n\nexport function useImageTransform({ images, config, containerRef, onChange, displayScale = 1 }: UseImageTransformOptions) {\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragMode, setDragMode] = useState<DragMode | null>(null);\n  const dragStateRef = useRef<ExtendedDragState | null>(null);\n  const pinchStateRef = useRef<PinchState | null>(null);\n  const [isPinching, setIsPinching] = useState(false);\n\n  // Store latest values in refs to avoid recreating callbacks during drag\n  const imagesRef = useRef(images);\n  const onChangeRef = useRef(onChange);\n  const configRef = useRef(config);\n  const displayScaleRef = useRef(displayScale);\n\n  // Keep refs in sync with props\n  useEffect(() => {\n    imagesRef.current = images;\n  }, [images]);\n\n  useEffect(() => {\n    onChangeRef.current = onChange;\n  }, [onChange]);\n\n  useEffect(() => {\n    configRef.current = config;\n  }, [config]);\n\n  useEffect(() => {\n    displayScaleRef.current = displayScale;\n  }, [displayScale]);\n\n  // Auto-select newly added image\n  useEffect(() => {\n    if (images.length > 0 && !selectedId) {\n      setSelectedId(images[images.length - 1].id);\n    } else if (images.length === 0) {\n      setSelectedId(null);\n    } else if (selectedId && !images.find((img) => img.id === selectedId)) {\n      // Selected image was removed, select the last one\n      setSelectedId(images.length > 0 ? images[images.length - 1].id : null);\n    }\n  }, [images, selectedId]);\n\n  const clampTransform = useCallback(\n    (newTransform: ImageTransform): ImageTransform => {\n      const { position, size, rotation } = newTransform;\n\n      // Only clamp size to min, allow position to be anywhere\n      const minSize = config.minImageSize || 20;\n\n      const clampedWidth = Math.max(minSize, size.width);\n      const clampedHeight = Math.max(minSize, size.height);\n\n      return {\n        position: { x: position.x, y: position.y },\n        size: { width: clampedWidth, height: clampedHeight },\n        rotation,\n      };\n    },\n    [config.minImageSize]\n  );\n\n  const updateImageTransform = useCallback(\n    (imageId: string, newTransform: ImageTransform) => {\n      const clamped = clampTransform(newTransform);\n      const updatedImages = images.map((img) =>\n        img.id === imageId ? { ...img, transform: clamped } : img\n      );\n      onChange?.(updatedImages);\n    },\n    [clampTransform, images, onChange]\n  );\n\n  const handlePointerDown = useCallback(\n    (\n      event: React.PointerEvent,\n      imageId: string,\n      mode: DragMode,\n      handle?: ControlHandle['position']\n    ) => {\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      // Capture pointer for reliable tracking across touch/mouse\n      const element = event.currentTarget as HTMLElement;\n      element.setPointerCapture(event.pointerId);\n\n      setSelectedId(imageId);\n      setIsDragging(true);\n      setDragMode(mode);\n      dragStateRef.current = {\n        mode,\n        imageId,\n        startPosition: { x: event.clientX, y: event.clientY },\n        startTransform: { ...image.transform },\n        handle,\n        pointerId: event.pointerId,\n        element,\n      };\n    },\n    [images]\n  );\n\n  // Stable pointer move handler that reads from refs\n  const handlePointerMove = useCallback(\n    (event: PointerEvent) => {\n      const dragState = dragStateRef.current;\n      if (!dragState) return;\n\n      // Only process events for our captured pointer\n      if (dragState.pointerId !== undefined && event.pointerId !== dragState.pointerId) return;\n\n      const currentImages = imagesRef.current;\n      const currentConfig = configRef.current;\n      const currentDisplayScale = displayScaleRef.current;\n\n      const image = currentImages.find((img) => img.id === dragState.imageId);\n      if (!image) return;\n\n      // Scale delta by inverse of display scale to convert screen pixels to original coordinate space\n      const deltaX = (event.clientX - dragState.startPosition.x) / currentDisplayScale;\n      const deltaY = (event.clientY - dragState.startPosition.y) / currentDisplayScale;\n\n      let newTransform: ImageTransform;\n\n      switch (dragState.mode) {\n        case 'move':\n          newTransform = {\n            ...image.transform,\n            position: {\n              x: dragState.startTransform.position.x + deltaX,\n              y: dragState.startTransform.position.y + deltaY,\n            },\n          };\n          break;\n\n        case 'resize': {\n          const { handle } = dragState;\n          const aspectRatio = image.naturalWidth / image.naturalHeight;\n          const minSize = currentConfig.minImageSize || 20;\n\n          let newWidth = dragState.startTransform.size.width;\n          let newX = dragState.startTransform.position.x;\n          let newY = dragState.startTransform.position.y;\n\n          // Calculate new width based on handle\n          switch (handle) {\n            case 'se':\n            case 'ne':\n              newWidth = dragState.startTransform.size.width + deltaX;\n              break;\n            case 'sw':\n            case 'nw':\n              newWidth = dragState.startTransform.size.width - deltaX;\n              break;\n          }\n\n          // Clamp width to minimum only\n          const clampedWidth = Math.max(minSize, newWidth);\n          const clampedHeight = clampedWidth / aspectRatio;\n\n          // Calculate position based on clamped size\n          const widthDiff = clampedWidth - dragState.startTransform.size.width;\n          const heightDiff = clampedHeight - dragState.startTransform.size.height;\n\n          switch (handle) {\n            case 'se':\n              // Bottom-right: position stays same\n              break;\n            case 'sw':\n              // Bottom-left: x moves left as width increases\n              newX = dragState.startTransform.position.x - widthDiff;\n              break;\n            case 'ne':\n              // Top-right: y moves up as height increases\n              newY = dragState.startTransform.position.y - heightDiff;\n              break;\n            case 'nw':\n              // Top-left: both x and y move\n              newX = dragState.startTransform.position.x - widthDiff;\n              newY = dragState.startTransform.position.y - heightDiff;\n              break;\n          }\n\n          newTransform = {\n            ...image.transform,\n            position: { x: newX, y: newY },\n            size: { width: clampedWidth, height: clampedHeight },\n          };\n          break;\n        }\n\n        case 'rotate': {\n          if (!currentConfig.allowRotation) {\n            return;\n          }\n\n          // Get container position to convert client coords to local coords\n          const container = containerRef.current;\n          if (!container) return;\n\n          const rect = container.getBoundingClientRect();\n\n          // Image center in local (canvas) coordinates - scaled for display\n          const centerX =\n            (dragState.startTransform.position.x +\n            dragState.startTransform.size.width / 2) * currentDisplayScale;\n          const centerY =\n            (dragState.startTransform.position.y +\n            dragState.startTransform.size.height / 2) * currentDisplayScale;\n\n          // Convert pointer positions to local coordinates (already in screen space)\n          const startLocalX = dragState.startPosition.x - rect.left;\n          const startLocalY = dragState.startPosition.y - rect.top;\n          const currentLocalX = event.clientX - rect.left;\n          const currentLocalY = event.clientY - rect.top;\n\n          const startAngle = Math.atan2(\n            startLocalY - centerY,\n            startLocalX - centerX\n          );\n          const currentAngle = Math.atan2(\n            currentLocalY - centerY,\n            currentLocalX - centerX\n          );\n\n          const rotation =\n            dragState.startTransform.rotation +\n            ((currentAngle - startAngle) * 180) / Math.PI;\n\n          newTransform = {\n            ...image.transform,\n            rotation,\n          };\n          break;\n        }\n\n        default:\n          return;\n      }\n\n      // Use ref-based update to avoid dependency on images/onChange\n      const updatedImages = currentImages.map((img) =>\n        img.id === dragState.imageId ? { ...img, transform: clampTransform(newTransform) } : img\n      );\n      onChangeRef.current?.(updatedImages);\n    },\n    [containerRef, clampTransform] // Minimal stable dependencies\n  );\n\n  const handlePointerUp = useCallback((event?: PointerEvent) => {\n    const dragState = dragStateRef.current;\n\n    // Release pointer capture if we have it\n    if (dragState?.element && dragState?.pointerId !== undefined) {\n      try {\n        dragState.element.releasePointerCapture(dragState.pointerId);\n      } catch {\n        // Pointer capture may already be released\n      }\n    }\n\n    setIsDragging(false);\n    setDragMode(null);\n    dragStateRef.current = null;\n  }, []);\n\n  // Pinch gesture handlers for two-finger scaling\n  const handleTouchStart = useCallback(\n    (event: React.TouchEvent, imageId: string) => {\n      // Only handle pinch when we have exactly 2 touches\n      if (event.touches.length !== 2) return;\n\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const touch1 = event.touches[0];\n      const touch2 = event.touches[1];\n      const distance = getTouchDistance(touch1, touch2);\n      const center = getTouchCenter(touch1, touch2);\n\n      setSelectedId(imageId);\n      setIsPinching(true);\n\n      // Cancel any ongoing drag\n      if (dragStateRef.current) {\n        setIsDragging(false);\n        setDragMode(null);\n        dragStateRef.current = null;\n      }\n\n      pinchStateRef.current = {\n        imageId,\n        startDistance: distance,\n        startTransform: { ...image.transform },\n        startCenter: center,\n      };\n    },\n    [images]\n  );\n\n  // Stable touch move handler that reads from refs\n  const handleTouchMove = useCallback(\n    (event: TouchEvent) => {\n      const pinchState = pinchStateRef.current;\n      if (!pinchState || event.touches.length !== 2) return;\n\n      const currentImages = imagesRef.current;\n      const currentConfig = configRef.current;\n      const currentDisplayScale = displayScaleRef.current;\n\n      const image = currentImages.find((img) => img.id === pinchState.imageId);\n      if (!image) return;\n\n      event.preventDefault();\n\n      const touch1 = event.touches[0];\n      const touch2 = event.touches[1];\n      const currentDistance = getTouchDistance(touch1, touch2);\n      const currentCenter = getTouchCenter(touch1, touch2);\n\n      // Calculate scale factor\n      const scale = currentDistance / pinchState.startDistance;\n\n      // Calculate new size maintaining aspect ratio\n      const aspectRatio = image.naturalWidth / image.naturalHeight;\n      const minSize = currentConfig.minImageSize || 20;\n\n      const newWidth = Math.max(minSize, pinchState.startTransform.size.width * scale);\n      const newHeight = newWidth / aspectRatio;\n\n      // Get container rect to convert center coordinates\n      const container = containerRef.current;\n      if (!container) return;\n      const rect = container.getBoundingClientRect();\n\n      // Calculate center movement (for panning while pinching), scaled to original coordinates\n      const centerDeltaX = (currentCenter.x - pinchState.startCenter.x) / currentDisplayScale;\n      const centerDeltaY = (currentCenter.y - pinchState.startCenter.y) / currentDisplayScale;\n\n      // Calculate the image center in container coordinates (original coordinate space)\n      const startImageCenterX = pinchState.startTransform.position.x + pinchState.startTransform.size.width / 2;\n      const startImageCenterY = pinchState.startTransform.position.y + pinchState.startTransform.size.height / 2;\n\n      // Scale around the pinch center point (convert screen to original coordinates)\n      const pinchCenterX = (pinchState.startCenter.x - rect.left) / currentDisplayScale;\n      const pinchCenterY = (pinchState.startCenter.y - rect.top) / currentDisplayScale;\n\n      // Calculate new position to keep the pinch center stable\n      const newCenterX = pinchCenterX + (startImageCenterX - pinchCenterX) * scale + centerDeltaX;\n      const newCenterY = pinchCenterY + (startImageCenterY - pinchCenterY) * scale + centerDeltaY;\n\n      const newX = newCenterX - newWidth / 2;\n      const newY = newCenterY - newHeight / 2;\n\n      const newTransform: ImageTransform = {\n        position: { x: newX, y: newY },\n        size: { width: newWidth, height: newHeight },\n        rotation: pinchState.startTransform.rotation,\n      };\n\n      // Use ref-based update to avoid dependency on images/onChange\n      const updatedImages = currentImages.map((img) =>\n        img.id === pinchState.imageId ? { ...img, transform: clampTransform(newTransform) } : img\n      );\n      onChangeRef.current?.(updatedImages);\n    },\n    [containerRef, clampTransform] // Minimal stable dependencies\n  );\n\n  const handleTouchEnd = useCallback(() => {\n    setIsPinching(false);\n    pinchStateRef.current = null;\n  }, []);\n\n  // Attach global pointer events when dragging\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener('pointermove', handlePointerMove);\n      window.addEventListener('pointerup', handlePointerUp);\n      window.addEventListener('pointercancel', handlePointerUp);\n\n      return () => {\n        window.removeEventListener('pointermove', handlePointerMove);\n        window.removeEventListener('pointerup', handlePointerUp);\n        window.removeEventListener('pointercancel', handlePointerUp);\n      };\n    }\n  }, [isDragging, handlePointerMove, handlePointerUp]);\n\n  // Attach global touch events when pinching\n  useEffect(() => {\n    if (isPinching) {\n      window.addEventListener('touchmove', handleTouchMove, { passive: false });\n      window.addEventListener('touchend', handleTouchEnd);\n      window.addEventListener('touchcancel', handleTouchEnd);\n\n      return () => {\n        window.removeEventListener('touchmove', handleTouchMove);\n        window.removeEventListener('touchend', handleTouchEnd);\n        window.removeEventListener('touchcancel', handleTouchEnd);\n      };\n    }\n  }, [isPinching, handleTouchMove, handleTouchEnd]);\n\n  const selectImage = useCallback((imageId: string | null) => {\n    setSelectedId(imageId);\n  }, []);\n\n  const deselectAll = useCallback(() => {\n    setSelectedId(null);\n  }, []);\n\n  const deleteImage = useCallback(\n    (imageId: string) => {\n      const updatedImages = images.filter((img) => img.id !== imageId);\n      onChange?.(updatedImages);\n    },\n    [images, onChange]\n  );\n\n  const deleteSelected = useCallback(() => {\n    if (selectedId) {\n      deleteImage(selectedId);\n    }\n  }, [selectedId, deleteImage]);\n\n  const bringToFront = useCallback(\n    (imageId: string) => {\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n      const others = images.filter((img) => img.id !== imageId);\n      onChange?.([...others, image]);\n    },\n    [images, onChange]\n  );\n\n  const sendToBack = useCallback(\n    (imageId: string) => {\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n      const others = images.filter((img) => img.id !== imageId);\n      onChange?.([image, ...others]);\n    },\n    [images, onChange]\n  );\n\n  const reorderImage = useCallback(\n    (fromIndex: number, toIndex: number) => {\n      if (fromIndex < 0 || fromIndex >= images.length) return;\n      if (toIndex < 0 || toIndex >= images.length) return;\n      if (fromIndex === toIndex) return;\n\n      const newImages = [...images];\n      const [moved] = newImages.splice(fromIndex, 1);\n      newImages.splice(toIndex, 0, moved);\n      onChange?.(newImages);\n    },\n    [images, onChange]\n  );\n\n  return {\n    selectedId,\n    isDragging,\n    isPinching,\n    dragMode,\n    handlePointerDown,\n    handleTouchStart,\n    selectImage,\n    deselectAll,\n    deleteImage,\n    deleteSelected,\n    bringToFront,\n    sendToBack,\n    reorderImage,\n    updateImageTransform,\n  };\n}\n","import { useState, useEffect, useCallback, useMemo } from 'react';\n\nexport type Breakpoint = 'mobile' | 'tablet' | 'desktop';\n\nexport interface ResponsiveState {\n  /** Current breakpoint: mobile (<640px), tablet (640-1024px), desktop (>1024px) */\n  breakpoint: Breakpoint;\n  /** True when viewport is mobile (<640px) */\n  isMobile: boolean;\n  /** True when viewport is tablet (640-1024px) */\n  isTablet: boolean;\n  /** True when viewport is desktop (>1024px) */\n  isDesktop: boolean;\n  /** Current viewport width in pixels */\n  viewportWidth: number;\n  /** Current viewport height in pixels */\n  viewportHeight: number;\n  /** True when device is in portrait orientation */\n  isPortrait: boolean;\n  /** True when device is in landscape orientation */\n  isLandscape: boolean;\n}\n\nexport interface ResponsiveConfig {\n  /** Mobile breakpoint max width (default: 639px) */\n  mobileBreakpoint?: number;\n  /** Tablet breakpoint max width (default: 1024px) */\n  tabletBreakpoint?: number;\n  /** Enable/disable responsive behavior */\n  enabled?: boolean;\n}\n\nconst DEFAULT_CONFIG: Required<ResponsiveConfig> = {\n  mobileBreakpoint: 639,\n  tabletBreakpoint: 1024,\n  enabled: true,\n};\n\n/**\n * Hook for detecting viewport breakpoints and responsive state.\n * Uses matchMedia for efficient breakpoint detection.\n */\nexport function useResponsive(config?: ResponsiveConfig): ResponsiveState {\n  const { mobileBreakpoint, tabletBreakpoint, enabled } = {\n    ...DEFAULT_CONFIG,\n    ...config,\n  };\n\n  const getBreakpoint = useCallback((width: number): Breakpoint => {\n    if (width <= mobileBreakpoint) return 'mobile';\n    if (width <= tabletBreakpoint) return 'tablet';\n    return 'desktop';\n  }, [mobileBreakpoint, tabletBreakpoint]);\n\n  const getInitialState = useCallback((): ResponsiveState => {\n    // SSR safety - default to desktop if window not available\n    if (typeof window === 'undefined') {\n      return {\n        breakpoint: 'desktop',\n        isMobile: false,\n        isTablet: false,\n        isDesktop: true,\n        viewportWidth: 1200,\n        viewportHeight: 800,\n        isPortrait: false,\n        isLandscape: true,\n      };\n    }\n\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const breakpoint = getBreakpoint(width);\n\n    return {\n      breakpoint,\n      isMobile: breakpoint === 'mobile',\n      isTablet: breakpoint === 'tablet',\n      isDesktop: breakpoint === 'desktop',\n      viewportWidth: width,\n      viewportHeight: height,\n      isPortrait: height > width,\n      isLandscape: width >= height,\n    };\n  }, [getBreakpoint]);\n\n  const [state, setState] = useState<ResponsiveState>(getInitialState);\n\n  useEffect(() => {\n    if (!enabled || typeof window === 'undefined') return;\n\n    // Create media queries for breakpoints\n    const mobileQuery = window.matchMedia(`(max-width: ${mobileBreakpoint}px)`);\n    const tabletQuery = window.matchMedia(`(max-width: ${tabletBreakpoint}px)`);\n    const portraitQuery = window.matchMedia('(orientation: portrait)');\n\n    const updateState = () => {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      const breakpoint = getBreakpoint(width);\n\n      setState({\n        breakpoint,\n        isMobile: breakpoint === 'mobile',\n        isTablet: breakpoint === 'tablet',\n        isDesktop: breakpoint === 'desktop',\n        viewportWidth: width,\n        viewportHeight: height,\n        isPortrait: height > width,\n        isLandscape: width >= height,\n      });\n    };\n\n    // Use matchMedia change events for breakpoint changes\n    const handleMediaChange = () => updateState();\n\n    // Also listen to resize for viewport dimensions\n    const handleResize = () => updateState();\n\n    // Add listeners\n    mobileQuery.addEventListener('change', handleMediaChange);\n    tabletQuery.addEventListener('change', handleMediaChange);\n    portraitQuery.addEventListener('change', handleMediaChange);\n    window.addEventListener('resize', handleResize);\n\n    // Initial update\n    updateState();\n\n    return () => {\n      mobileQuery.removeEventListener('change', handleMediaChange);\n      tabletQuery.removeEventListener('change', handleMediaChange);\n      portraitQuery.removeEventListener('change', handleMediaChange);\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [enabled, mobileBreakpoint, tabletBreakpoint, getBreakpoint]);\n\n  return state;\n}\n\nexport interface ScaledDimensions {\n  /** Scaled width in pixels */\n  width: number;\n  /** Scaled height in pixels */\n  height: number;\n  /** Scale factor applied (1 = original size) */\n  scale: number;\n}\n\n/**\n * Calculate scaled dimensions to fit within a container while maintaining aspect ratio.\n */\nexport function useScaledDimensions(\n  originalWidth: number,\n  originalHeight: number,\n  maxWidth: number,\n  maxHeight: number,\n  enabled: boolean = true\n): ScaledDimensions {\n  return useMemo(() => {\n    if (!enabled) {\n      return { width: originalWidth, height: originalHeight, scale: 1 };\n    }\n\n    const widthScale = maxWidth / originalWidth;\n    const heightScale = maxHeight / originalHeight;\n    const scale = Math.min(widthScale, heightScale, 1); // Never scale up\n\n    return {\n      width: Math.round(originalWidth * scale),\n      height: Math.round(originalHeight * scale),\n      scale,\n    };\n  }, [originalWidth, originalHeight, maxWidth, maxHeight, enabled]);\n}\n","import React, { useState, useCallback } from 'react';\nimport type { ImageTransform, ControlHandle, DragMode } from '../types';\n\ninterface ControlsProps {\n  transform: ImageTransform;\n  allowRotation: boolean;\n  onPointerDown: (\n    event: React.PointerEvent,\n    mode: DragMode,\n    handle?: ControlHandle['position']\n  ) => void;\n  /** Enable touch-friendly sizing (larger hit areas) */\n  isMobile?: boolean;\n}\n\n// Size configurations\nconst HANDLE_SIZE_DESKTOP = 10;\nconst HANDLE_SIZE_MOBILE_VISUAL = 14; // Visual size on mobile\nconst HANDLE_SIZE_MOBILE_HIT = 44; // Touch target size (Apple HIG recommendation)\nconst ROTATION_HANDLE_OFFSET_DESKTOP = 34;\nconst ROTATION_HANDLE_OFFSET_MOBILE = 50;\nconst ACCENT_COLOR = '#4A4A4A'; // dark gray - subtle and professional\n\n// SVG rotate cursor icon encoded as data URI\nconst ROTATE_CURSOR = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8'/%3E%3Cpath d='M21 3v5h-5'/%3E%3C/svg%3E\") 12 12, crosshair`;\n\n// Helper to create handle styles based on mobile state and active state\nfunction getHandleStyle(isMobile: boolean, isActive: boolean): React.CSSProperties {\n  const visualSize = isMobile ? HANDLE_SIZE_MOBILE_VISUAL : HANDLE_SIZE_DESKTOP;\n\n  return {\n    position: 'absolute',\n    width: visualSize,\n    height: visualSize,\n    backgroundColor: '#ffffff',\n    border: `2px solid ${ACCENT_COLOR}`,\n    borderRadius: '50%',\n    boxSizing: 'border-box',\n    boxShadow: isActive\n      ? '0 4px 14px rgba(0, 0, 0, 0.25)'\n      : '0 2px 10px rgba(0, 0, 0, 0.15)',\n    transition: 'transform 0.15s ease-out, box-shadow 0.15s ease-out',\n    transform: isActive ? 'scale(1.2)' : 'scale(1)',\n    touchAction: 'none',\n  };\n}\n\n// Helper to create rotation handle styles based on mobile state and active state\nfunction getRotateHandleStyle(isMobile: boolean, isActive: boolean): React.CSSProperties {\n  const visualSize = isMobile ? HANDLE_SIZE_MOBILE_VISUAL + 4 : HANDLE_SIZE_DESKTOP + 2;\n\n  return {\n    position: 'absolute',\n    width: visualSize,\n    height: visualSize,\n    backgroundColor: ACCENT_COLOR,\n    border: '2px solid #fff',\n    borderRadius: '50%',\n    boxSizing: 'border-box',\n    cursor: ROTATE_CURSOR,\n    boxShadow: isActive\n      ? '0 4px 14px rgba(0, 0, 0, 0.3)'\n      : '0 2px 10px rgba(0, 0, 0, 0.2)',\n    transition: 'transform 0.15s ease-out, box-shadow 0.15s ease-out',\n    transform: isActive ? 'scale(1.2)' : 'scale(1)',\n    touchAction: 'none',\n  };\n}\n\n// Helper to create invisible touch target style for mobile\nfunction getTouchTargetStyle(isMobile: boolean, position: ControlHandle['position']): React.CSSProperties {\n  if (!isMobile) return {};\n\n  const hitSize = HANDLE_SIZE_MOBILE_HIT;\n  const visualSize = HANDLE_SIZE_MOBILE_VISUAL;\n  const offset = (hitSize - visualSize) / 2;\n\n  return {\n    position: 'absolute',\n    width: hitSize,\n    height: hitSize,\n    backgroundColor: 'transparent',\n    borderRadius: '50%',\n    // Center the touch target around the visual handle\n    margin: -offset,\n    touchAction: 'none',\n    cursor: position === 'rotate' ? ROTATE_CURSOR : getCursorForHandle(position),\n  };\n}\n\n// Get cursor style for resize handles\nfunction getCursorForHandle(position: ControlHandle['position']): string {\n  switch (position) {\n    case 'nw':\n    case 'se':\n      return 'nwse-resize';\n    case 'ne':\n    case 'sw':\n      return 'nesw-resize';\n    default:\n      return 'pointer';\n  }\n}\n\nexport function Controls({ transform, allowRotation, onPointerDown, isMobile = false }: ControlsProps) {\n  const { position, size, rotation } = transform;\n\n  // Track which handle is currently active for touch feedback\n  const [activeHandle, setActiveHandle] = useState<string | null>(null);\n\n  // Wrapper for pointer down that adds touch feedback\n  const handlePointerDownWithFeedback = useCallback(\n    (e: React.PointerEvent, mode: DragMode, handle?: ControlHandle['position']) => {\n      setActiveHandle(handle || mode || null);\n      onPointerDown(e, mode, handle);\n\n      // Listen for pointer up to clear active state\n      const clearActive = () => {\n        setActiveHandle(null);\n        document.removeEventListener('pointerup', clearActive);\n        document.removeEventListener('pointercancel', clearActive);\n      };\n      document.addEventListener('pointerup', clearActive);\n      document.addEventListener('pointercancel', clearActive);\n    },\n    [onPointerDown]\n  );\n\n  // Calculate visual and positioning sizes based on mobile state\n  const visualSize = isMobile ? HANDLE_SIZE_MOBILE_VISUAL : HANDLE_SIZE_DESKTOP;\n  const rotationOffset = isMobile ? ROTATION_HANDLE_OFFSET_MOBILE : ROTATION_HANDLE_OFFSET_DESKTOP;\n\n  // On mobile, position handles slightly outside the image bounds for better accessibility\n  const handleOutset = isMobile ? 4 : 0;\n\n  const containerStyle: React.CSSProperties = {\n    position: 'absolute',\n    left: position.x,\n    top: position.y,\n    width: size.width,\n    height: size.height,\n    transform: rotation ? `rotate(${rotation}deg)` : undefined,\n    transformOrigin: 'center center',\n    pointerEvents: 'none',\n  };\n\n  const handles: Array<{\n    position: ControlHandle['position'];\n    style: React.CSSProperties;\n  }> = [\n    {\n      position: 'nw',\n      style: {\n        top: -visualSize / 2 - handleOutset,\n        left: -visualSize / 2 - handleOutset,\n        cursor: 'nwse-resize',\n      },\n    },\n    {\n      position: 'ne',\n      style: {\n        top: -visualSize / 2 - handleOutset,\n        right: -visualSize / 2 - handleOutset,\n        cursor: 'nesw-resize',\n      },\n    },\n    {\n      position: 'sw',\n      style: {\n        bottom: -visualSize / 2 - handleOutset,\n        left: -visualSize / 2 - handleOutset,\n        cursor: 'nesw-resize',\n      },\n    },\n    {\n      position: 'se',\n      style: {\n        bottom: -visualSize / 2 - handleOutset,\n        right: -visualSize / 2 - handleOutset,\n        cursor: 'nwse-resize',\n      },\n    },\n  ];\n\n  // Selection border - thicker and more visible on mobile\n  const borderStyle: React.CSSProperties = {\n    position: 'absolute',\n    inset: -1,\n    border: `${isMobile ? 2.5 : 2}px solid ${ACCENT_COLOR}`,\n    borderRadius: '4px',\n    pointerEvents: 'none',\n    boxShadow: isMobile\n      ? '0 0 0 1px rgba(255, 255, 255, 0.5), 0 2px 12px rgba(0, 0, 0, 0.15)'\n      : '0 2px 10px rgba(0, 0, 0, 0.1)',\n  };\n\n  // Rotation stem sizing\n  const stemHeight = isMobile ? 28 : 18;\n  const stemTop = isMobile ? -38 : -28;\n\n  return (\n    <div style={containerStyle}>\n      <div style={borderStyle} />\n\n      {/* Resize handles */}\n      {handles.map(({ position: pos, style }) => {\n        const isActive = activeHandle === pos;\n        const handleStyles = getHandleStyle(isMobile, isActive);\n\n        return (\n          <div\n            key={pos}\n            style={{\n              ...handleStyles,\n              ...style,\n              pointerEvents: 'auto',\n            }}\n            onPointerDown={(e) => handlePointerDownWithFeedback(e, 'resize', pos)}\n            onContextMenu={(e) => e.preventDefault()}\n          >\n            {/* Invisible touch target for mobile - larger hit area */}\n            {isMobile && (\n              <div\n                style={getTouchTargetStyle(isMobile, pos)}\n                onPointerDown={(e) => {\n                  e.stopPropagation();\n                  handlePointerDownWithFeedback(e, 'resize', pos);\n                }}\n                onContextMenu={(e) => e.preventDefault()}\n              />\n            )}\n          </div>\n        );\n      })}\n\n      {/* Rotation handle */}\n      {allowRotation && (\n        <>\n          {/* Connection stem */}\n          <div\n            style={{\n              position: 'absolute',\n              top: stemTop,\n              left: '50%',\n              width: isMobile ? 2 : 1.5,\n              height: stemHeight,\n              backgroundColor: ACCENT_COLOR,\n              transform: 'translateX(-50%)',\n              opacity: 0.8,\n              pointerEvents: 'none',\n            }}\n          />\n          {/* Rotation handle circle */}\n          <div\n            style={{\n              ...getRotateHandleStyle(isMobile, activeHandle === 'rotate'),\n              top: -rotationOffset - visualSize / 2,\n              left: '50%',\n              transform: 'translateX(-50%)',\n              pointerEvents: 'auto',\n            }}\n            onPointerDown={(e) => handlePointerDownWithFeedback(e, 'rotate')}\n            onContextMenu={(e) => e.preventDefault()}\n          >\n            {/* Invisible touch target for mobile - larger hit area */}\n            {isMobile && (\n              <div\n                style={getTouchTargetStyle(isMobile, 'rotate')}\n                onPointerDown={(e) => {\n                  e.stopPropagation();\n                  handlePointerDownWithFeedback(e, 'rotate');\n                }}\n                onContextMenu={(e) => e.preventDefault()}\n              />\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport type { ImageData, TShirtView } from \"../types\";\n\ninterface LayerPanelProps {\n  images: ImageData[];\n  selectedId: string | null;\n  onSelect: (id: string) => void;\n  onDelete: (id: string) => void;\n  onReorder: (fromIndex: number, toIndex: number) => void;\n  onAddImage: () => void;\n  currentView: TShirtView;\n  onViewChange: (view: TShirtView) => void;\n  /** Compact mode for mobile drawer layout */\n  compact?: boolean;\n  /** Mobile mode for touch-optimized controls */\n  isMobile?: boolean;\n}\n\nconst ITEM_HEIGHT = 56; // Height of each layer item in pixels (desktop)\nconst MOBILE_ITEM_HEIGHT = 64; // Height of each layer item in pixels (mobile, min 48px for touch)\n\n// teniski-varna color palette\nconst COLORS = {\n  ACCENT: \"#FAC000\",\n  BLACK: \"#000000\",\n  WHITE: \"#FFFFFF\",\n  GRAY: \"#9B9B9B\",\n  LIGHT_GRAY: \"#F7F7F7\",\n  DARK_GRAY: \"#4A4A4A\",\n  RED: \"#FF0000\"\n};\n\nconst panelStyle: React.CSSProperties = {\n  width: \"220px\",\n  backgroundColor: COLORS.WHITE,\n  borderRadius: \"10px\",\n  overflow: \"hidden\",\n  boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.1)\",\n  fontFamily: \"Roboto, -apple-system, BlinkMacSystemFont, sans-serif\",\n  // Prevent double-tap zoom on the panel\n  touchAction: \"manipulation\"\n};\n\nconst headerStyle: React.CSSProperties = {\n  display: \"flex\",\n  alignItems: \"center\",\n  padding: \"8px\",\n  borderBottom: `1px solid ${COLORS.LIGHT_GRAY}`\n};\n\nconst viewToggleContainerStyle: React.CSSProperties = {\n  display: \"flex\",\n  width: \"100%\",\n  backgroundColor: COLORS.LIGHT_GRAY,\n  borderRadius: \"8px\",\n  padding: \"4px\"\n};\n\nconst getViewButtonStyle = (isActive: boolean): React.CSSProperties => ({\n  flex: 1,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  gap: \"6px\",\n  padding: \"10px 12px\",\n  border: \"none\",\n  borderRadius: \"6px\",\n  backgroundColor: isActive ? COLORS.WHITE : \"transparent\",\n  color: isActive ? COLORS.DARK_GRAY : COLORS.GRAY,\n  fontSize: \"13px\",\n  fontWeight: 600,\n  cursor: \"pointer\",\n  transition: \"all 0.2s ease-out\",\n  boxShadow: isActive ? \"0 2px 4px rgba(0, 0, 0, 0.08)\" : \"none\"\n});\n\nconst listStyle: React.CSSProperties = {\n  listStyle: \"none\",\n  margin: 0,\n  padding: \"8px\",\n  maxHeight: \"320px\",\n  overflowY: \"auto\",\n  position: \"relative\"\n};\n\nconst emptyStyle: React.CSSProperties = {\n  padding: \"32px 20px\",\n  textAlign: \"center\",\n  color: COLORS.GRAY,\n  fontSize: \"13px\"\n};\n\n// Note: dragHandleStyle and dragLineStyle are now dynamic functions inside the component\n// to support mobile-responsive sizing (getDragHandleStyle and getDragLineStyle)\n\n// Plus icon for add button\nconst PlusIcon = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M8 3v10M3 8h10\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n  </svg>\n);\n\n// Front icon\nconst FrontIcon = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M20 21V19a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <circle cx=\"12\" cy=\"7\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n  </svg>\n);\n\n// Back icon\nconst BackIcon = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M20 21V19a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <circle cx=\"12\" cy=\"7\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M3 3l18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n  </svg>\n);\n\n// Delete icon\nconst DeleteIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M2 4h12M5.333 4V2.667a1.333 1.333 0 011.334-1.334h2.666a1.333 1.333 0 011.334 1.334V4m2 0v9.333a1.333 1.333 0 01-1.334 1.334H4.667a1.333 1.333 0 01-1.334-1.334V4h9.334z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\n// Empty layers icon\nconst EmptyLayersIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M8 1L1 4.5L8 8L15 4.5L8 1Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <path\n      d=\"M1 11.5L8 15L15 11.5\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <path\n      d=\"M1 8L8 11.5L15 8\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\n// Base add button style - will be enhanced for mobile via getAddButtonStyle function\nconst addButtonStyle: React.CSSProperties = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  gap: \"6px\",\n  width: \"100%\",\n  padding: \"12px 16px\",\n  margin: \"8px 0\",\n  backgroundColor: COLORS.ACCENT,\n  color: COLORS.BLACK,\n  border: \"none\",\n  borderRadius: \"10px\",\n  cursor: \"pointer\",\n  fontSize: \"14px\",\n  fontWeight: 600,\n  boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.3)\",\n  transition: \"filter 0.1s ease-out, transform 0.1s ease-out\"\n};\n\n// Mobile-optimized add button style\nconst getMobileAddButtonStyle = (isMobile: boolean): React.CSSProperties => ({\n  ...addButtonStyle,\n  padding: isMobile ? \"16px 20px\" : \"12px 16px\",\n  minHeight: isMobile ? \"52px\" : \"auto\",\n  fontSize: isMobile ? \"15px\" : \"14px\",\n  gap: isMobile ? \"8px\" : \"6px\",\n  touchAction: \"manipulation\"\n});\n\nexport function LayerPanel({\n  images,\n  selectedId,\n  onSelect,\n  onDelete,\n  onReorder,\n  onAddImage,\n  currentView,\n  onViewChange,\n  compact = false,\n  isMobile = false\n}: LayerPanelProps) {\n  // Adjust panel style for compact mode\n  const dynamicPanelStyle: React.CSSProperties = compact\n    ? { ...panelStyle, width: '100%', borderRadius: '0 0 10px 10px', boxShadow: 'none' }\n    : panelStyle;\n\n  // Use mobile item height for touch-friendly targets\n  const itemHeight = isMobile ? MOBILE_ITEM_HEIGHT : ITEM_HEIGHT;\n\n  // Swipe-to-delete state\n  const [swipeState, setSwipeState] = useState<{\n    id: string;\n    startX: number;\n    currentX: number;\n    pointerId: number;\n  } | null>(null);\n\n  const [dragState, setDragState] = useState<{\n    draggingIndex: number;\n    startY: number;\n    currentY: number;\n    pointerId?: number;\n    element?: HTMLElement;\n  } | null>(null);\n\n  const listRef = useRef<HTMLUListElement>(null);\n\n  // Reverse to show top layer first (last in array = top = first in list)\n  const reversedImages = [...images].reverse();\n\n  const handlePointerDown = useCallback((e: React.PointerEvent, reversedIndex: number) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // Capture pointer for reliable tracking across touch/mouse\n    const element = e.currentTarget as HTMLElement;\n    element.setPointerCapture(e.pointerId);\n\n    setDragState({\n      draggingIndex: reversedIndex,\n      startY: e.clientY,\n      currentY: e.clientY,\n      pointerId: e.pointerId,\n      element\n    });\n  }, []);\n\n  const handlePointerMove = useCallback(\n    (e: PointerEvent) => {\n      if (!dragState) return;\n\n      // Only process events for our captured pointer\n      if (dragState.pointerId !== undefined && e.pointerId !== dragState.pointerId) return;\n\n      setDragState(prev =>\n        prev\n          ? {\n              ...prev,\n              currentY: e.clientY\n            }\n          : null\n      );\n    },\n    [dragState]\n  );\n\n  const handlePointerUp = useCallback(() => {\n    if (!dragState) return;\n\n    // Release pointer capture if we have it\n    if (dragState.element && dragState.pointerId !== undefined) {\n      try {\n        dragState.element.releasePointerCapture(dragState.pointerId);\n      } catch {\n        // Pointer capture may already be released\n      }\n    }\n\n    const deltaY = dragState.currentY - dragState.startY;\n    const indexDelta = Math.round(deltaY / itemHeight);\n    const newReversedIndex = Math.max(0, Math.min(reversedImages.length - 1, dragState.draggingIndex + indexDelta));\n\n    if (newReversedIndex !== dragState.draggingIndex) {\n      // Convert reversed indices to original indices\n      const fromOriginal = images.length - 1 - dragState.draggingIndex;\n      const toOriginal = images.length - 1 - newReversedIndex;\n      onReorder(fromOriginal, toOriginal);\n    }\n\n    setDragState(null);\n  }, [dragState, reversedImages.length, images.length, onReorder, itemHeight]);\n\n  useEffect(() => {\n    if (dragState) {\n      window.addEventListener(\"pointermove\", handlePointerMove);\n      window.addEventListener(\"pointerup\", handlePointerUp);\n      window.addEventListener(\"pointercancel\", handlePointerUp);\n\n      return () => {\n        window.removeEventListener(\"pointermove\", handlePointerMove);\n        window.removeEventListener(\"pointerup\", handlePointerUp);\n        window.removeEventListener(\"pointercancel\", handlePointerUp);\n      };\n    }\n  }, [dragState, handlePointerMove, handlePointerUp]);\n\n  const handleDelete = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    onDelete(id);\n  };\n\n  // Swipe-to-delete handlers (mobile only)\n  const handleSwipeStart = useCallback((e: React.PointerEvent, id: string) => {\n    if (!isMobile) return;\n    // Only start swipe if not on drag handle (drag handle is on the left)\n    const target = e.target as HTMLElement;\n    if (target.closest('[data-drag-handle]')) return;\n\n    setSwipeState({\n      id,\n      startX: e.clientX,\n      currentX: e.clientX,\n      pointerId: e.pointerId\n    });\n  }, [isMobile]);\n\n  const handleSwipeMove = useCallback((e: PointerEvent) => {\n    if (!swipeState) return;\n    if (e.pointerId !== swipeState.pointerId) return;\n\n    setSwipeState(prev => prev ? {\n      ...prev,\n      currentX: e.clientX\n    } : null);\n  }, [swipeState]);\n\n  const handleSwipeEnd = useCallback(() => {\n    if (!swipeState) return;\n\n    const deltaX = swipeState.currentX - swipeState.startX;\n    // Delete threshold: swipe left more than 100px\n    if (deltaX < -100) {\n      onDelete(swipeState.id);\n    }\n\n    setSwipeState(null);\n  }, [swipeState, onDelete]);\n\n  // Add swipe listeners\n  useEffect(() => {\n    if (swipeState) {\n      window.addEventListener(\"pointermove\", handleSwipeMove);\n      window.addEventListener(\"pointerup\", handleSwipeEnd);\n      window.addEventListener(\"pointercancel\", handleSwipeEnd);\n\n      return () => {\n        window.removeEventListener(\"pointermove\", handleSwipeMove);\n        window.removeEventListener(\"pointerup\", handleSwipeEnd);\n        window.removeEventListener(\"pointercancel\", handleSwipeEnd);\n      };\n    }\n  }, [swipeState, handleSwipeMove, handleSwipeEnd]);\n\n  // Calculate visual positions during drag\n  const getItemStyle = (reversedIndex: number, isSelected: boolean, swipeOffset: number = 0): React.CSSProperties => {\n    const isDragging = dragState?.draggingIndex === reversedIndex;\n\n    let transform = swipeOffset !== 0 ? `translateX(${swipeOffset}px)` : \"translateY(0)\";\n    let zIndex = 1;\n    let boxShadow = isSelected\n      ? `0 0 0 2px ${COLORS.ACCENT}, 0 2px 10px rgba(250, 192, 0, 0.15)`\n      : \"0 1px 3px rgba(0, 0, 0, 0.05)\";\n    let transition =\n      \"transform 0.3s ease-out, background-color 0.3s ease-out, box-shadow 0.3s ease-out, border-color 0.3s ease-out\";\n\n    // Calculate background color for swipe feedback\n    let backgroundColor = isDragging ? COLORS.WHITE : isSelected ? \"#FEF9E7\" : COLORS.WHITE;\n    if (swipeOffset < -50) {\n      // Red tint as user swipes to delete\n      const intensity = Math.min(1, Math.abs(swipeOffset + 50) / 50);\n      backgroundColor = `rgba(255, ${235 - intensity * 100}, ${235 - intensity * 100}, 1)`;\n    }\n\n    if (dragState) {\n      if (isDragging) {\n        // The dragged item follows the pointer - enhanced visual feedback\n        const deltaY = dragState.currentY - dragState.startY;\n        transform = `translateY(${deltaY}px) scale(1.03)`;\n        zIndex = 100;\n        boxShadow = \"0 12px 28px rgba(0,0,0,0.2), 0 6px 12px rgba(0, 0, 0, 0.12)\";\n        transition = \"box-shadow 0.3s ease-out, scale 0.15s ease-out\";\n        backgroundColor = \"#FEF9E7\"; // Highlight dragged item\n      } else {\n        // Other items shift to make room - smoother animation\n        const draggedIndex = dragState.draggingIndex;\n        const deltaY = dragState.currentY - dragState.startY;\n        const targetIndex = Math.round(deltaY / itemHeight) + draggedIndex;\n        const clampedTarget = Math.max(0, Math.min(reversedImages.length - 1, targetIndex));\n\n        if (draggedIndex < reversedIndex && clampedTarget >= reversedIndex) {\n          // Dragged item moved down past this item - shift up\n          transform = `translateY(-${itemHeight}px)`;\n        } else if (draggedIndex > reversedIndex && clampedTarget <= reversedIndex) {\n          // Dragged item moved up past this item - shift down\n          transform = `translateY(${itemHeight}px)`;\n        }\n      }\n    }\n\n    return {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: isMobile ? \"12px\" : \"10px\",\n      padding: isMobile ? \"12px 14px\" : \"10px 12px\",\n      marginBottom: \"6px\",\n      borderRadius: \"10px\",\n      border: `1px solid ${isSelected ? COLORS.ACCENT : COLORS.LIGHT_GRAY}`,\n      backgroundColor,\n      cursor: \"pointer\",\n      position: \"relative\",\n      zIndex,\n      transform,\n      transition,\n      boxShadow,\n      height: `${itemHeight}px`,\n      boxSizing: \"border-box\",\n      overflow: \"hidden\"\n    };\n  };\n\n  // Mobile-responsive thumbnail size\n  const thumbnailSize = isMobile ? 44 : 36;\n  const thumbnailStyle: React.CSSProperties = {\n    width: `${thumbnailSize}px`,\n    height: `${thumbnailSize}px`,\n    objectFit: \"contain\",\n    backgroundColor: COLORS.LIGHT_GRAY,\n    borderRadius: \"8px\",\n    border: `1px solid ${COLORS.LIGHT_GRAY}`,\n    padding: \"2px\",\n    flexShrink: 0\n  };\n\n  const labelStyle: React.CSSProperties = {\n    flex: 1,\n    fontSize: isMobile ? \"14px\" : \"13px\",\n    fontWeight: 500,\n    color: COLORS.DARK_GRAY,\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\"\n  };\n\n  // Mobile-responsive delete button (min 44px touch target)\n  const deleteButtonSize = isMobile ? 44 : 28;\n  const deleteButtonStyle: React.CSSProperties = {\n    width: `${deleteButtonSize}px`,\n    height: `${deleteButtonSize}px`,\n    padding: 0,\n    border: \"none\",\n    borderRadius: \"50%\",\n    backgroundColor: \"transparent\",\n    color: COLORS.GRAY,\n    cursor: \"pointer\",\n    fontSize: isMobile ? \"18px\" : \"16px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    transition: \"all 0.3s ease-out\",\n    flexShrink: 0\n  };\n\n  const deleteButtonHoverStyle: React.CSSProperties = {\n    ...deleteButtonStyle,\n    backgroundColor: \"#FFEBEB\",\n    color: COLORS.RED,\n    transform: \"scale(1.1)\"\n  };\n\n  // Mobile-responsive drag handle styles\n  const getDragHandleStyle = (isDragging: boolean): React.CSSProperties => ({\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: isMobile ? \"4px\" : \"3px\",\n    cursor: isDragging ? \"grabbing\" : \"grab\",\n    padding: isMobile ? \"10px 8px\" : \"6px 4px\",\n    borderRadius: \"4px\",\n    transition: \"background-color 0.3s ease-out\",\n    touchAction: \"none\",\n    backgroundColor: isDragging ? \"#e2e8f0\" : \"transparent\",\n    minWidth: isMobile ? \"32px\" : \"18px\",\n    alignItems: \"center\"\n  });\n\n  const getDragLineStyle = (): React.CSSProperties => ({\n    width: isMobile ? \"14px\" : \"10px\",\n    height: isMobile ? \"3px\" : \"2px\",\n    backgroundColor: COLORS.GRAY,\n    borderRadius: \"1px\"\n  });\n\n  // Delete button with hover state\n  const [hoveredDeleteId, setHoveredDeleteId] = useState<string | null>(null);\n\n  const [addButtonHovered, setAddButtonHovered] = useState(false);\n  const [addButtonActive, setAddButtonActive] = useState(false);\n\n  return (\n    <div style={dynamicPanelStyle}>\n      {/* Hide view toggle in compact mode - it's rendered separately in TShirtBuilder */}\n      {!compact && (\n        <div style={headerStyle}>\n          <div style={viewToggleContainerStyle}>\n            <button style={getViewButtonStyle(currentView === \"front\")} onClick={() => onViewChange(\"front\")}>\n              <FrontIcon />\n              Отпред\n            </button>\n            <button style={getViewButtonStyle(currentView === \"back\")} onClick={() => onViewChange(\"back\")}>\n              <BackIcon />\n              Отзад\n            </button>\n          </div>\n        </div>\n      )}\n      <div style={{ padding: \"12px 12px 4px\" }}>\n        <button\n          style={{\n            ...getMobileAddButtonStyle(isMobile),\n            margin: 0,\n            ...(addButtonActive\n              ? {\n                  filter: \"brightness(0.9)\",\n                  transform: \"scale(0.95)\"\n                }\n              : addButtonHovered\n                ? {\n                    filter: \"brightness(0.9)\"\n                  }\n                : {})\n          }}\n          onClick={onAddImage}\n          onMouseEnter={() => setAddButtonHovered(true)}\n          onMouseLeave={() => {\n            setAddButtonHovered(false);\n            setAddButtonActive(false);\n          }}\n          onMouseDown={() => setAddButtonActive(true)}\n          onMouseUp={() => setAddButtonActive(false)}\n        >\n          {isMobile ? (\n            // Camera icon for mobile\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                d=\"M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2v11z\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n              <circle cx=\"12\" cy=\"13\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" />\n            </svg>\n          ) : (\n            <PlusIcon />\n          )}\n          {isMobile ? \"Качи снимка\" : \"Добави изображение\"}\n        </button>\n      </div>\n      {images.length === 0 ? (\n        <div style={{\n          ...emptyStyle,\n          padding: isMobile ? \"24px 16px\" : \"32px 20px\"\n        }}>\n          <div style={{ marginBottom: \"8px\", opacity: 0.6 }}>\n            <EmptyLayersIcon />\n          </div>\n          <div style={{ marginBottom: isMobile ? \"8px\" : \"0\" }}>\n            Няма слоеве\n          </div>\n          {isMobile && (\n            <div style={{ fontSize: \"12px\", color: COLORS.GRAY, lineHeight: 1.4 }}>\n              Натиснете бутона отгоре за да качите снимка от камера или галерия\n            </div>\n          )}\n        </div>\n      ) : (\n        <ul ref={listRef} style={listStyle}>\n          {reversedImages.map((image, reversedIndex) => {\n            const originalIndex = images.length - 1 - reversedIndex;\n            const isSelected = image.id === selectedId;\n            const isDragging = dragState?.draggingIndex === reversedIndex;\n\n            // Calculate swipe offset for this item\n            const swipeOffset = swipeState?.id === image.id\n              ? Math.min(0, swipeState.currentX - swipeState.startX) // Only allow left swipe\n              : 0;\n\n            return (\n              <li\n                key={image.id}\n                style={getItemStyle(reversedIndex, isSelected, swipeOffset)}\n                onClick={() => !dragState && !swipeState && onSelect(image.id)}\n                onPointerDown={e => handleSwipeStart(e, image.id)}\n                onContextMenu={e => e.preventDefault()}\n              >\n                {/* Delete indicator shown when swiping */}\n                {isMobile && swipeOffset < -20 && (\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      right: 0,\n                      top: 0,\n                      bottom: 0,\n                      width: Math.abs(swipeOffset),\n                      backgroundColor: swipeOffset < -100 ? COLORS.RED : \"#FFEBEB\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      color: swipeOffset < -100 ? COLORS.WHITE : COLORS.RED,\n                      transition: \"background-color 0.2s ease-out\",\n                      borderRadius: \"0 10px 10px 0\"\n                    }}\n                  >\n                    <DeleteIcon />\n                  </div>\n                )}\n                <div\n                  data-drag-handle\n                  style={getDragHandleStyle(isDragging)}\n                  onPointerDown={e => {\n                    e.stopPropagation();\n                    handlePointerDown(e, reversedIndex);\n                  }}\n                  onContextMenu={e => e.preventDefault()}\n                >\n                  <div style={getDragLineStyle()} />\n                  <div style={getDragLineStyle()} />\n                  <div style={getDragLineStyle()} />\n                </div>\n                <img\n                  src={image.src}\n                  alt={`Layer ${originalIndex + 1}`}\n                  style={thumbnailStyle}\n                  draggable={false}\n                  loading=\"lazy\"\n                  decoding=\"async\"\n                />\n                <span style={labelStyle}>Слой {originalIndex + 1}</span>\n                <button\n                  style={hoveredDeleteId === image.id ? deleteButtonHoverStyle : deleteButtonStyle}\n                  onClick={e => handleDelete(e, image.id)}\n                  onMouseEnter={() => setHoveredDeleteId(image.id)}\n                  onMouseLeave={() => setHoveredDeleteId(null)}\n                  onPointerDown={e => e.stopPropagation()}\n                  title=\"Изтрий слой\"\n                >\n                  <DeleteIcon />\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </div>\n  );\n}\n","import type { ImageData, EditorConfig } from '../types';\n\n// Helper to load an image from a source URL\nfunction loadImage(src: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n\nexport async function exportToDataUrl(\n  canvas: HTMLCanvasElement,\n  backgroundImage: HTMLImageElement | null,\n  images: ImageData[],\n  config: EditorConfig,\n  format: 'image/png' | 'image/jpeg' = 'image/png',\n  quality = 0.92\n): Promise<string> {\n  const scale = config.exportScale || 1;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    throw new Error('Failed to get canvas context');\n  }\n\n  // Pre-load all user images to ensure they're ready for drawing\n  const loadedImages = await Promise.all(\n    images.map(async (imageData) => ({\n      transform: imageData.transform,\n      img: await loadImage(imageData.src),\n    }))\n  );\n\n  // Clear canvas\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  // Scale all drawing operations\n  ctx.save();\n  ctx.scale(scale, scale);\n\n  // Draw background using \"cover\" behavior to match CSS background-size: cover\n  if (backgroundImage) {\n    const imgRatio = backgroundImage.naturalWidth / backgroundImage.naturalHeight;\n    const containerRatio = config.width / config.height;\n\n    let drawWidth: number, drawHeight: number, drawX: number, drawY: number;\n\n    if (imgRatio > containerRatio) {\n      // Image is wider - fit height, crop width\n      drawHeight = config.height;\n      drawWidth = backgroundImage.naturalWidth * (config.height / backgroundImage.naturalHeight);\n      drawX = (config.width - drawWidth) / 2;\n      drawY = 0;\n    } else {\n      // Image is taller - fit width, crop height\n      drawWidth = config.width;\n      drawHeight = backgroundImage.naturalHeight * (config.width / backgroundImage.naturalWidth);\n      drawX = 0;\n      drawY = (config.height - drawHeight) / 2;\n    }\n\n    ctx.drawImage(backgroundImage, drawX, drawY, drawWidth, drawHeight);\n  }\n\n  // Set up clipping if printable area is defined\n  if (config.printableArea) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.rect(\n      config.printableArea.minX,\n      config.printableArea.minY,\n      config.printableArea.maxX - config.printableArea.minX,\n      config.printableArea.maxY - config.printableArea.minY\n    );\n    ctx.clip();\n  }\n\n  // Draw all user images in order (first = bottom, last = top)\n  for (const { transform, img } of loadedImages) {\n    ctx.save();\n\n    if (transform.rotation !== 0) {\n      const centerX = transform.position.x + transform.size.width / 2;\n      const centerY = transform.position.y + transform.size.height / 2;\n      ctx.translate(centerX, centerY);\n      ctx.rotate((transform.rotation * Math.PI) / 180);\n      ctx.translate(-centerX, -centerY);\n    }\n\n    ctx.drawImage(\n      img,\n      transform.position.x,\n      transform.position.y,\n      transform.size.width,\n      transform.size.height\n    );\n\n    ctx.restore();\n  }\n\n  // Restore from clip if it was applied\n  if (config.printableArea) {\n    ctx.restore();\n  }\n\n  // Restore from scale\n  ctx.restore();\n\n  return canvas.toDataURL(format, quality);\n}\n\nexport function createOffscreenCanvas(width: number, height: number): HTMLCanvasElement {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n","import React, { useState, useRef, useCallback, useEffect, useMemo } from \"react\";\nimport type { TShirtBuilderProps, ImageData, EditorConfig, TShirtView, ViewImages, ResponsiveConfig, LayoutMode, BoundingBox } from \"../types\";\nimport { useImageUpload } from \"../hooks/useImageUpload\";\nimport { useImageTransform } from \"../hooks/useImageTransform\";\nimport { useResponsive } from \"../hooks/useResponsive\";\nimport { Controls } from \"./Controls\";\nimport { LayerPanel } from \"./LayerPanel\";\nimport { exportToDataUrl, createOffscreenCanvas } from \"../utils/canvas\";\n\n// teniski-varna color palette\nconst COLORS = {\n  ACCENT: \"#FAC000\",\n  BLACK: \"#000000\",\n  WHITE: \"#FFFFFF\",\n  GRAY: \"#9B9B9B\",\n  LIGHT_GRAY: \"#F7F7F7\",\n  DARK_GRAY: \"#4A4A4A\",\n  RED: \"#FF0000\"\n};\n\nconst DEFAULT_CONFIG: EditorConfig = {\n  width: 400,\n  height: 500,\n  minImageSize: 20,\n  allowRotation: false,\n  acceptedFileTypes: [\"image/png\", \"image/jpeg\", \"image/webp\", \"image/gif\"],\n  maxFileSize: 10 * 1024 * 1024\n};\n\nconst DEFAULT_RESPONSIVE_CONFIG: Required<ResponsiveConfig> = {\n  enabled: false,\n  mobileBreakpoint: 639,\n  tabletBreakpoint: 1024,\n  forceLayout: undefined as unknown as LayoutMode,\n  tabletPanelWidth: 180,\n  desktopPanelWidth: 220,\n  mobileCollapsedByDefault: true\n};\n\n// Helper to calculate scaled dimensions for responsive canvas\nfunction calculateScaledDimensions(\n  originalWidth: number,\n  originalHeight: number,\n  containerWidth: number,\n  maxHeight: number\n): { width: number; height: number; scale: number } {\n  const aspectRatio = originalWidth / originalHeight;\n\n  // First try to fit width\n  let width = Math.min(originalWidth, containerWidth);\n  let height = width / aspectRatio;\n\n  // If height exceeds max, constrain by height instead\n  if (height > maxHeight) {\n    height = maxHeight;\n    width = height * aspectRatio;\n  }\n\n  const scale = width / originalWidth;\n\n  return {\n    width: Math.round(width),\n    height: Math.round(height),\n    scale\n  };\n}\n\n// Scale printable area proportionally\nfunction scalePrintableArea(\n  printableArea: BoundingBox | undefined,\n  scale: number\n): BoundingBox | undefined {\n  if (!printableArea) return undefined;\n  return {\n    minX: Math.round(printableArea.minX * scale),\n    minY: Math.round(printableArea.minY * scale),\n    maxX: Math.round(printableArea.maxX * scale),\n    maxY: Math.round(printableArea.maxY * scale)\n  };\n}\n\nexport function TShirtBuilder({\n  frontBgImage,\n  backBgImage,\n  config: configProp,\n  responsive: responsiveProp,\n  onChange,\n  onExport,\n  className,\n  style,\n  initialImages\n}: TShirtBuilderProps) {\n  const config: EditorConfig = { ...DEFAULT_CONFIG, ...configProp };\n  const responsiveConfig: ResponsiveConfig = { ...DEFAULT_RESPONSIVE_CONFIG, ...responsiveProp };\n\n  // Responsive state detection\n  const responsiveState = useResponsive({\n    mobileBreakpoint: responsiveConfig.mobileBreakpoint,\n    tabletBreakpoint: responsiveConfig.tabletBreakpoint,\n    enabled: responsiveConfig.enabled\n  });\n\n  // Container ref for measuring available space\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const [containerWidth, setContainerWidth] = useState<number>(0);\n\n  // Mobile drawer state\n  const [isPanelCollapsed, setIsPanelCollapsed] = useState(\n    responsiveConfig.mobileCollapsedByDefault ?? true\n  );\n\n  // Measure container width for responsive scaling\n  useEffect(() => {\n    if (!responsiveConfig.enabled || !wrapperRef.current) return;\n\n    const measureContainer = () => {\n      if (wrapperRef.current) {\n        setContainerWidth(wrapperRef.current.clientWidth);\n      }\n    };\n\n    // Initial measurement\n    measureContainer();\n\n    // Use ResizeObserver for efficient container size tracking\n    const resizeObserver = new ResizeObserver(measureContainer);\n    resizeObserver.observe(wrapperRef.current);\n\n    return () => resizeObserver.disconnect();\n  }, [responsiveConfig.enabled]);\n\n  // Determine layout mode based on responsive state or forced layout\n  const layoutMode: LayoutMode = useMemo(() => {\n    if (responsiveConfig.forceLayout) {\n      return responsiveConfig.forceLayout;\n    }\n    if (!responsiveConfig.enabled) {\n      return 'horizontal';\n    }\n    // Mobile uses vertical layout, tablet and desktop use horizontal\n    return responsiveState.isMobile ? 'vertical' : 'horizontal';\n  }, [responsiveConfig.forceLayout, responsiveConfig.enabled, responsiveState.isMobile]);\n\n  // Calculate panel width based on breakpoint\n  const panelWidth = useMemo(() => {\n    if (!responsiveConfig.enabled) {\n      return responsiveConfig.desktopPanelWidth ?? 220;\n    }\n    if (responsiveState.isMobile) {\n      return '100%'; // Full width for mobile drawer\n    }\n    if (responsiveState.isTablet) {\n      return responsiveConfig.tabletPanelWidth ?? 180;\n    }\n    return responsiveConfig.desktopPanelWidth ?? 220;\n  }, [responsiveConfig.enabled, responsiveConfig.tabletPanelWidth, responsiveConfig.desktopPanelWidth, responsiveState.isMobile, responsiveState.isTablet]);\n\n  // Calculate canvas dimensions based on responsive state\n  const canvasDimensions = useMemo(() => {\n    if (!responsiveConfig.enabled || !containerWidth) {\n      return { width: config.width, height: config.height, scale: 1 };\n    }\n\n    // Calculate available width for canvas\n    let availableWidth = containerWidth;\n    if (layoutMode === 'horizontal') {\n      const gap = 16;\n      const numericPanelWidth = typeof panelWidth === 'number' ? panelWidth : 220;\n      availableWidth = containerWidth - numericPanelWidth - gap;\n    } else {\n      // Vertical layout - full width with some padding\n      availableWidth = containerWidth - 32; // 16px padding on each side\n    }\n\n    // Calculate max height (leave room for buttons and panel in vertical layout)\n    const maxHeight = layoutMode === 'vertical'\n      ? responsiveState.viewportHeight * 0.5 // Half of viewport height in vertical layout\n      : responsiveState.viewportHeight - 200; // Leave room for buttons in horizontal\n\n    return calculateScaledDimensions(\n      config.width,\n      config.height,\n      availableWidth,\n      maxHeight\n    );\n  }, [responsiveConfig.enabled, containerWidth, config.width, config.height, layoutMode, panelWidth, responsiveState.viewportHeight]);\n\n  // Calculate scaled printable area\n  const scaledPrintableArea = useMemo(() => {\n    return scalePrintableArea(config.printableArea, canvasDimensions.scale);\n  }, [config.printableArea, canvasDimensions.scale]);\n\n  // Create a scaled config for rendering (keeps original for export)\n  const displayConfig: EditorConfig = useMemo(() => ({\n    ...config,\n    width: canvasDimensions.width,\n    height: canvasDimensions.height,\n    printableArea: scaledPrintableArea\n  }), [config, canvasDimensions.width, canvasDimensions.height, scaledPrintableArea]);\n\n  const [currentView, setCurrentView] = useState<TShirtView>(\"front\");\n  const [viewImages, setViewImages] = useState<ViewImages>(initialImages || { front: [], back: [] });\n  const [bgImage, setBgImage] = useState<HTMLImageElement | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Get current images based on view\n  const images = viewImages[currentView];\n\n  // Get current background image URL based on view\n  const currentBackgroundUrl = currentView === \"front\" ? frontBgImage : backBgImage;\n\n  // Load background image based on current view\n  useEffect(() => {\n    if (currentBackgroundUrl) {\n      const img = new Image();\n      img.onload = () => setBgImage(img);\n      img.onerror = () => setError(\"Грешка при зареждане на изображението\");\n      img.src = currentBackgroundUrl;\n    } else {\n      setBgImage(null);\n    }\n  }, [currentBackgroundUrl]);\n\n  const handleImagesChange = useCallback(\n    (newImages: ImageData[]) => {\n      setViewImages(prev => {\n        const updated = { ...prev, [currentView]: newImages };\n        onChange?.(updated, currentView);\n        return updated;\n      });\n    },\n    [onChange, currentView]\n  );\n\n  const handleImageLoad = useCallback(\n    (newImageData: ImageData) => {\n      setViewImages(prev => {\n        const newImages = [...prev[currentView], newImageData];\n        const updated = { ...prev, [currentView]: newImages };\n        onChange?.(updated, currentView);\n        return updated;\n      });\n      setError(null);\n    },\n    [currentView, onChange]\n  );\n\n  const isMobileMode = responsiveConfig.enabled && responsiveState.isMobile;\n\n  const {\n    inputRef,\n    handleFileChange,\n    handleDrop,\n    handleDragOver,\n    openFilePicker,\n    handlePaste,\n    acceptAttribute,\n    uploadState\n  } = useImageUpload({\n    config,\n    onImageLoad: handleImageLoad,\n    onError: setError,\n    isMobile: isMobileMode\n  });\n\n  // Listen for clipboard paste events\n  useEffect(() => {\n    const handleGlobalPaste = (e: ClipboardEvent) => handlePaste(e);\n    window.addEventListener('paste', handleGlobalPaste);\n    return () => window.removeEventListener('paste', handleGlobalPaste);\n  }, [handlePaste]);\n\n  const {\n    selectedId,\n    isDragging,\n    isPinching,\n    dragMode,\n    handlePointerDown,\n    handleTouchStart,\n    selectImage,\n    deselectAll,\n    deleteImage,\n    deleteSelected,\n    reorderImage\n  } = useImageTransform({\n    images,\n    config,\n    containerRef,\n    onChange: handleImagesChange,\n    displayScale: canvasDimensions.scale\n  });\n\n  // SVG rotate cursor - same as in Controls.tsx\n  const ROTATE_CURSOR = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8'/%3E%3Cpath d='M21 3v5h-5'/%3E%3C/svg%3E\") 12 12, crosshair`;\n\n  // Set cursor on body during rotation to ensure it persists outside the handle\n  useEffect(() => {\n    if (isDragging && dragMode === 'rotate') {\n      document.body.style.cursor = ROTATE_CURSOR;\n      return () => {\n        document.body.style.cursor = '';\n      };\n    }\n  }, [isDragging, dragMode]);\n\n  const handleExport = useCallback(async () => {\n    if (!onExport) return;\n\n    const scale = config.exportScale || 1;\n    const canvas = createOffscreenCanvas(config.width * scale, config.height * scale);\n\n    // Helper to load an image\n    const loadImage = (src: string | undefined): Promise<HTMLImageElement | null> => {\n      if (!src) return Promise.resolve(null);\n      return new Promise((resolve) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = () => resolve(null);\n        img.src = src;\n      });\n    };\n\n    // Load both background images\n    const [frontBg, backBg] = await Promise.all([\n      loadImage(frontBgImage),\n      loadImage(backBgImage)\n    ]);\n\n    // Export front\n    const frontDataUrl = await exportToDataUrl(canvas, frontBg, viewImages.front, config);\n\n    // Export back\n    const backDataUrl = await exportToDataUrl(canvas, backBg, viewImages.back, config);\n\n    onExport({ front: frontDataUrl, back: backDataUrl });\n  }, [config, onExport, frontBgImage, backBgImage, viewImages]);\n\n  const handleContainerClick = useCallback(\n    (e: React.MouseEvent) => {\n      // Deselect if clicking on empty area\n      if (e.target === containerRef.current) {\n        deselectAll();\n      }\n    },\n    [deselectAll]\n  );\n\n  // Scale a transform for display (images are stored in original coordinates)\n  const scaleTransform = useCallback((transform: ImageData['transform']) => {\n    const scale = canvasDimensions.scale;\n    return {\n      position: {\n        x: transform.position.x * scale,\n        y: transform.position.y * scale\n      },\n      size: {\n        width: transform.size.width * scale,\n        height: transform.size.height * scale\n      },\n      rotation: transform.rotation\n    };\n  }, [canvasDimensions.scale]);\n\n  const containerStyle: React.CSSProperties = {\n    position: \"relative\",\n    width: displayConfig.width,\n    height: displayConfig.height,\n    backgroundColor: COLORS.LIGHT_GRAY,\n    backgroundImage: bgImage ? `url(${currentBackgroundUrl})` : undefined,\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\",\n    overflow: \"hidden\",\n    cursor: (isDragging && dragMode !== 'rotate') || isPinching ? \"grabbing\" : \"default\",\n    userSelect: \"none\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.1)\",\n    fontFamily: \"Roboto, -apple-system, BlinkMacSystemFont, sans-serif\",\n    // Prevent browser touch behaviors during interaction\n    touchAction: \"none\"\n  };\n\n  // Wrapper style for responsive layout\n  const wrapperStyle: React.CSSProperties = {\n    width: '100%',\n    fontFamily: \"Roboto, -apple-system, BlinkMacSystemFont, sans-serif\"\n  };\n\n  // Main layout container style based on layout mode\n  const layoutContainerStyle: React.CSSProperties = {\n    display: \"flex\",\n    flexDirection: layoutMode === 'vertical' ? 'column' : 'row',\n    gap: layoutMode === 'vertical' ? '12px' : '16px',\n    alignItems: layoutMode === 'vertical' ? 'center' : 'flex-start'\n  };\n\n  // Panel container style for mobile drawer\n  const panelContainerStyle: React.CSSProperties = layoutMode === 'vertical' ? {\n    width: canvasDimensions.width,\n    order: 2, // Panel below canvas on mobile\n    boxShadow: '0 2px 10px rgba(0, 0, 0, 0.1)',\n    borderRadius: '10px'\n  } : {\n    width: typeof panelWidth === 'number' ? `${panelWidth}px` : panelWidth,\n    flexShrink: 0\n  };\n\n  // Canvas column style\n  const canvasColumnStyle: React.CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: layoutMode === 'vertical' ? 'center' : 'flex-start',\n    order: layoutMode === 'vertical' ? 1 : 2\n  };\n\n  const dropZoneStyle: React.CSSProperties = {\n    position: \"absolute\",\n    inset: 0,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    gap: \"12px\",\n    color: COLORS.GRAY,\n    fontSize: \"14px\",\n    pointerEvents: images.length > 0 ? \"none\" : \"auto\"\n  };\n\n  const [exportButtonHovered, setExportButtonHovered] = useState(false);\n  const [exportButtonActive, setExportButtonActive] = useState(false);\n\n  const exportButtonStyle: React.CSSProperties = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: \"8px\",\n    width: \"100%\",\n    padding: \"14px 20px\",\n    marginTop: \"12px\",\n    backgroundColor: COLORS.ACCENT,\n    color: COLORS.BLACK,\n    border: \"none\",\n    borderRadius: \"10px\",\n    cursor: \"pointer\",\n    fontSize: \"16px\",\n    fontWeight: 600,\n    boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.3)\",\n    transition: \"filter 0.1s ease-out, transform 0.1s ease-out\",\n    ...(exportButtonActive\n      ? {\n          filter: \"brightness(0.9)\",\n          transform: \"scale(0.95)\"\n        }\n      : exportButtonHovered\n        ? {\n            filter: \"brightness(0.9)\"\n          }\n        : {})\n  };\n\n  // Toggle panel collapse (mobile only)\n  const togglePanelCollapse = useCallback(() => {\n    setIsPanelCollapsed(prev => !prev);\n  }, []);\n\n  // Collapse panel when selecting/interacting with image on mobile\n  const handleMobileImageInteraction = useCallback(() => {\n    if (layoutMode === 'vertical' && !isPanelCollapsed) {\n      setIsPanelCollapsed(true);\n    }\n  }, [layoutMode, isPanelCollapsed]);\n\n  return (\n    <div ref={wrapperRef} className={className} style={{ ...wrapperStyle, ...style }}>\n      {/* Keyframes for spinner animation */}\n      <style>\n        {`\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        `}\n      </style>\n\n      {error && (\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: \"8px\",\n            padding: \"12px 16px\",\n            marginBottom: \"12px\",\n            backgroundColor: \"#FFEBEB\",\n            color: COLORS.RED,\n            borderRadius: \"10px\",\n            fontSize: \"13px\",\n            fontWeight: 500,\n            boxShadow: \"0 2px 10px rgba(255, 0, 0, 0.1)\"\n          }}\n        >\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M8 5.333V8M8 10.667h.007M14.667 8A6.667 6.667 0 111.333 8a6.667 6.667 0 0113.334 0z\"\n              stroke=\"currentColor\"\n              strokeWidth=\"1.5\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n          {error}\n        </div>\n      )}\n\n      <div style={layoutContainerStyle}>\n        {/* Layer Panel - with mobile drawer support */}\n        <div style={panelContainerStyle}>\n          {/* Mobile layout with front/back toggle + collapsible layers */}\n          {layoutMode === 'vertical' ? (\n            <div\n              style={{\n                backgroundColor: COLORS.WHITE,\n                borderRadius: '10px',\n                overflow: 'hidden'\n              }}\n            >\n              {/* Front/Back toggle - always visible */}\n              <div\n                style={{\n                  display: 'flex',\n                  padding: '8px',\n                  borderBottom: `1px solid ${COLORS.LIGHT_GRAY}`\n                }}\n              >\n                <div\n                  style={{\n                    display: 'flex',\n                    width: '100%',\n                    backgroundColor: COLORS.LIGHT_GRAY,\n                    borderRadius: '8px',\n                    padding: '4px'\n                  }}\n                >\n                  <button\n                    onClick={() => setCurrentView('front')}\n                    style={{\n                      flex: 1,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: '6px',\n                      padding: '10px 12px',\n                      border: 'none',\n                      borderRadius: '6px',\n                      backgroundColor: currentView === 'front' ? COLORS.WHITE : 'transparent',\n                      color: currentView === 'front' ? COLORS.DARK_GRAY : COLORS.GRAY,\n                      fontSize: '13px',\n                      fontWeight: 600,\n                      cursor: 'pointer',\n                      transition: 'all 0.2s ease-out',\n                      boxShadow: currentView === 'front' ? '0 2px 4px rgba(0, 0, 0, 0.08)' : 'none'\n                    }}\n                  >\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path d=\"M20 21V19a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      <circle cx=\"12\" cy=\"7\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                    </svg>\n                    Отпред\n                  </button>\n                  <button\n                    onClick={() => setCurrentView('back')}\n                    style={{\n                      flex: 1,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: '6px',\n                      padding: '10px 12px',\n                      border: 'none',\n                      borderRadius: '6px',\n                      backgroundColor: currentView === 'back' ? COLORS.WHITE : 'transparent',\n                      color: currentView === 'back' ? COLORS.DARK_GRAY : COLORS.GRAY,\n                      fontSize: '13px',\n                      fontWeight: 600,\n                      cursor: 'pointer',\n                      transition: 'all 0.2s ease-out',\n                      boxShadow: currentView === 'back' ? '0 2px 4px rgba(0, 0, 0, 0.08)' : 'none'\n                    }}\n                  >\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path d=\"M20 21V19a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      <circle cx=\"12\" cy=\"7\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      <path d=\"M3 3l18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n                    </svg>\n                    Отзад\n                  </button>\n                </div>\n              </div>\n              {/* Show/Hide layers toggle */}\n              <button\n                onClick={togglePanelCollapse}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '8px',\n                  width: '100%',\n                  padding: '14px 16px',\n                  backgroundColor: COLORS.WHITE,\n                  border: 'none',\n                  borderBottom: isPanelCollapsed ? 'none' : `1px solid ${COLORS.LIGHT_GRAY}`,\n                  cursor: 'pointer',\n                  fontSize: '14px',\n                  fontWeight: 600,\n                  color: COLORS.DARK_GRAY\n                }}\n              >\n                <svg\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 16 16\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  style={{\n                    transform: isPanelCollapsed ? 'rotate(0deg)' : 'rotate(180deg)',\n                    transition: 'transform 0.3s ease-out'\n                  }}\n                >\n                  <path\n                    d=\"M4 6l4 4 4-4\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                </svg>\n                {isPanelCollapsed ? 'Покажи слоевете' : 'Скрий слоевете'}\n              </button>\n              {/* Collapsible layers content */}\n              <div\n                style={{\n                  maxHeight: isPanelCollapsed ? '0' : '350px',\n                  overflow: 'hidden',\n                  transition: 'max-height 0.3s ease-out'\n                }}\n              >\n                <LayerPanel\n                  images={images}\n                  selectedId={selectedId}\n                  onSelect={(id) => {\n                    selectImage(id);\n                    handleMobileImageInteraction();\n                  }}\n                  onDelete={deleteImage}\n                  onReorder={reorderImage}\n                  onAddImage={openFilePicker}\n                  currentView={currentView}\n                  onViewChange={setCurrentView}\n                  compact={true}\n                  isMobile={true}\n                />\n              </div>\n            </div>\n          ) : (\n            <LayerPanel\n              images={images}\n              selectedId={selectedId}\n              onSelect={(id) => {\n                selectImage(id);\n                handleMobileImageInteraction();\n              }}\n              onDelete={deleteImage}\n              onReorder={reorderImage}\n              onAddImage={openFilePicker}\n              currentView={currentView}\n              onViewChange={setCurrentView}\n              compact={false}\n              isMobile={false}\n            />\n          )}\n        </div>\n\n        {/* Canvas and Export */}\n        <div style={canvasColumnStyle}>\n          <div\n            ref={containerRef}\n            style={containerStyle}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            onClick={handleContainerClick}\n          >\n            {/* Drop zone placeholder */}\n            {images.length === 0 && (\n              <div style={{\n                ...dropZoneStyle,\n                zIndex: isMobileMode ? 10 : undefined\n              }}>\n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    alignItems: \"center\",\n                    padding: isMobileMode ? \"24px 20px\" : \"32px\",\n                    border: `2px dashed ${COLORS.GRAY}`,\n                    borderRadius: \"20px\",\n                    backgroundColor: COLORS.WHITE,\n                    maxWidth: isMobileMode ? \"90%\" : \"280px\",\n                    textAlign: \"center\",\n                    boxShadow: isMobileMode ? \"0 4px 20px rgba(0, 0, 0, 0.1)\" : undefined\n                  }}\n                >\n                  <div\n                    style={{\n                      width: isMobileMode ? \"64px\" : \"56px\",\n                      height: isMobileMode ? \"64px\" : \"56px\",\n                      borderRadius: \"50%\",\n                      backgroundColor: \"#FEF9E7\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      marginBottom: \"16px\",\n                      boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.2)\"\n                    }}\n                  >\n                    {isMobileMode ? (\n                      // Camera icon for mobile\n                      <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path\n                          d=\"M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2v11z\"\n                          stroke={COLORS.ACCENT}\n                          strokeWidth=\"2\"\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                        />\n                        <circle cx=\"12\" cy=\"13\" r=\"4\" stroke={COLORS.ACCENT} strokeWidth=\"2\" />\n                      </svg>\n                    ) : (\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path\n                          d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                          stroke={COLORS.ACCENT}\n                          strokeWidth=\"2\"\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                        />\n                      </svg>\n                    )}\n                  </div>\n                  <span style={{ fontWeight: 600, color: COLORS.DARK_GRAY, marginBottom: \"4px\", fontSize: isMobileMode ? \"15px\" : \"14px\" }}>\n                    {isMobileMode ? \"Докоснете за качване\" : \"Пуснете изображение тук\"}\n                  </span>\n                  <span style={{ color: COLORS.GRAY, fontSize: isMobileMode ? \"14px\" : \"13px\", marginBottom: \"16px\" }}>\n                    {isMobileMode ? \"от камера или галерия\" : \"или кликнете за избор\"}\n                  </span>\n                  <button\n                    onClick={openFilePicker}\n                    style={{\n                      padding: isMobileMode ? \"16px 32px\" : \"12px 24px\",\n                      minHeight: isMobileMode ? \"52px\" : \"auto\",\n                      backgroundColor: COLORS.ACCENT,\n                      color: COLORS.BLACK,\n                      border: \"none\",\n                      borderRadius: \"10px\",\n                      cursor: \"pointer\",\n                      fontWeight: 600,\n                      fontSize: isMobileMode ? \"16px\" : \"14px\",\n                      boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.3)\",\n                      transition: \"all 0.3s ease-out\",\n                      touchAction: \"manipulation\"\n                    }}\n                  >\n                    {isMobileMode ? \"Избери снимка\" : \"Избери файл\"}\n                  </button>\n                  <span style={{ color: COLORS.GRAY, fontSize: isMobileMode ? \"12px\" : \"11px\", marginTop: \"12px\" }}>\n                    PNG, JPG, WebP, GIF до 10MB\n                  </span>\n                </div>\n              </div>\n            )}\n\n            {/* Upload progress overlay */}\n            {uploadState.isUploading && (\n              <div\n                style={{\n                  position: \"absolute\",\n                  inset: 0,\n                  backgroundColor: \"rgba(255, 255, 255, 0.9)\",\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  gap: \"16px\",\n                  zIndex: 200,\n                  borderRadius: \"10px\"\n                }}\n              >\n                <div\n                  style={{\n                    width: isMobileMode ? \"64px\" : \"56px\",\n                    height: isMobileMode ? \"64px\" : \"56px\",\n                    borderRadius: \"50%\",\n                    backgroundColor: \"#FEF9E7\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.2)\"\n                  }}\n                >\n                  {/* Spinning loader */}\n                  <svg\n                    width={isMobileMode ? \"28\" : \"24\"}\n                    height={isMobileMode ? \"28\" : \"24\"}\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    style={{\n                      animation: \"spin 1s linear infinite\"\n                    }}\n                  >\n                    <path\n                      d=\"M12 2v4m0 12v4m-6-10H2m20 0h-4m-1.343-5.657l-2.829 2.829m-5.656 5.656l-2.829 2.829m11.314 0l-2.829-2.829m-5.656-5.656L4.686 6.343\"\n                      stroke={COLORS.ACCENT}\n                      strokeWidth=\"2\"\n                      strokeLinecap=\"round\"\n                    />\n                  </svg>\n                </div>\n                <span style={{ fontWeight: 600, color: COLORS.DARK_GRAY, fontSize: isMobileMode ? \"15px\" : \"14px\" }}>\n                  Качване...\n                </span>\n                {/* Progress bar */}\n                <div\n                  style={{\n                    width: \"80%\",\n                    maxWidth: \"200px\",\n                    height: \"6px\",\n                    backgroundColor: COLORS.LIGHT_GRAY,\n                    borderRadius: \"3px\",\n                    overflow: \"hidden\"\n                  }}\n                >\n                  <div\n                    style={{\n                      width: `${uploadState.progress}%`,\n                      height: \"100%\",\n                      backgroundColor: COLORS.ACCENT,\n                      borderRadius: \"3px\",\n                      transition: \"width 0.2s ease-out\"\n                    }}\n                  />\n                </div>\n                {uploadState.fileName && (\n                  <span style={{ color: COLORS.GRAY, fontSize: isMobileMode ? \"13px\" : \"12px\", maxWidth: \"80%\", overflow: \"hidden\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\" }}>\n                    {uploadState.fileName}\n                  </span>\n                )}\n              </div>\n            )}\n\n            {/* Clipped area for images - clips to printable area */}\n            {displayConfig.printableArea && (\n              <div\n                style={{\n                  position: \"absolute\",\n                  left: displayConfig.printableArea.minX,\n                  top: displayConfig.printableArea.minY,\n                  width: displayConfig.printableArea.maxX - displayConfig.printableArea.minX,\n                  height: displayConfig.printableArea.maxY - displayConfig.printableArea.minY,\n                  overflow: \"hidden\",\n                  pointerEvents: \"none\"\n                }}\n              >\n                {/* Render all images inside clip container */}\n                {images.map(imageData => {\n                  const scaledTransform = scaleTransform(imageData.transform);\n\n                  // Adjust position relative to printable area\n                  const imageStyle: React.CSSProperties = {\n                    position: \"absolute\",\n                    left: scaledTransform.position.x - displayConfig.printableArea!.minX,\n                    top: scaledTransform.position.y - displayConfig.printableArea!.minY,\n                    width: scaledTransform.size.width,\n                    height: scaledTransform.size.height,\n                    transform: scaledTransform.rotation ? `rotate(${scaledTransform.rotation}deg)` : undefined,\n                    transformOrigin: \"center center\",\n                    userSelect: \"none\",\n                    pointerEvents: \"none\"\n                  };\n\n                  return (\n                    <img\n                      key={imageData.id}\n                      src={imageData.src}\n                      alt=\"Качен дизайн\"\n                      style={imageStyle}\n                      draggable={false}\n                    />\n                  );\n                })}\n              </div>\n            )}\n\n            {/* Render all images (interactive layer - invisible but captures events) */}\n            {images.map(imageData => {\n              const scaledTransform = scaleTransform(imageData.transform);\n              const isSelected = imageData.id === selectedId;\n\n              const imageStyle: React.CSSProperties = {\n                position: \"absolute\",\n                left: scaledTransform.position.x,\n                top: scaledTransform.position.y,\n                width: scaledTransform.size.width,\n                height: scaledTransform.size.height,\n                transform: scaledTransform.rotation ? `rotate(${scaledTransform.rotation}deg)` : undefined,\n                transformOrigin: \"center center\",\n                cursor: isDragging ? \"grabbing\" : \"move\",\n                userSelect: \"none\",\n                pointerEvents: \"auto\",\n                opacity: displayConfig.printableArea ? 0 : 1,\n                // Prevent touch behaviors on image\n                touchAction: \"none\"\n              };\n\n              return (\n                <React.Fragment key={imageData.id}>\n                  <img\n                    src={imageData.src}\n                    alt=\"Качен дизайн\"\n                    style={imageStyle}\n                    draggable={false}\n                    onPointerDown={e => {\n                      handleMobileImageInteraction();\n                      handlePointerDown(e, imageData.id, \"move\");\n                    }}\n                    onTouchStart={e => {\n                      handleMobileImageInteraction();\n                      handleTouchStart(e, imageData.id);\n                    }}\n                    onClick={e => {\n                      e.stopPropagation();\n                      selectImage(imageData.id);\n                      handleMobileImageInteraction();\n                    }}\n                    onContextMenu={e => e.preventDefault()}\n                  />\n                  {isSelected && (\n                    <Controls\n                      transform={scaledTransform}\n                      allowRotation={displayConfig.allowRotation || false}\n                      onPointerDown={(e, mode, handle) => handlePointerDown(e, imageData.id, mode, handle)}\n                      isMobile={responsiveConfig.enabled && responsiveState.isMobile}\n                    />\n                  )}\n                </React.Fragment>\n              );\n            })}\n\n            {/* Printable area indicator */}\n            {displayConfig.printableArea && (\n              <div\n                style={{\n                  position: \"absolute\",\n                  left: displayConfig.printableArea.minX,\n                  top: displayConfig.printableArea.minY,\n                  width: displayConfig.printableArea.maxX - displayConfig.printableArea.minX,\n                  height: displayConfig.printableArea.maxY - displayConfig.printableArea.minY,\n                  border: `1.5px dashed rgba(74, 74, 74, 0.4)`,\n                  borderRadius: \"4px\",\n                  boxSizing: \"border-box\",\n                  pointerEvents: \"none\"\n                }}\n              />\n            )}\n          </div>\n\n          {/* Export Button */}\n          {onExport && (\n            <button\n              style={exportButtonStyle}\n              onClick={handleExport}\n              onMouseEnter={() => setExportButtonHovered(true)}\n              onMouseLeave={() => {\n                setExportButtonHovered(false);\n                setExportButtonActive(false);\n              }}\n              onMouseDown={() => setExportButtonActive(true)}\n              onMouseUp={() => setExportButtonActive(false)}\n            >\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M14 10v2.667A1.334 1.334 0 0112.667 14H3.333A1.334 1.334 0 012 12.667V10M4.667 6.667L8 3.333l3.333 3.334M8 3.333V10\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"1.5\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n              </svg>\n              Завърши дизайн\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Hidden file input - mobile-optimized with camera access */}\n      <input\n        ref={inputRef}\n        type=\"file\"\n        accept={acceptAttribute}\n        capture={isMobileMode ? \"environment\" : undefined}\n        onChange={handleFileChange}\n        style={{ display: \"none\" }}\n      />\n    </div>\n  );\n}\n"],"names":["DEFAULT_CONFIG","_jsxs","_jsx","_Fragment","COLORS"],"mappings":";;;AAGA,MAAM,sBAAsB,GAAG,CAAC,WAAW,EAAE,YAAY,EAAE,YAAY,EAAE,WAAW,CAAC;AACrF,MAAM,qBAAqB,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC;AAE/C,SAAS,UAAU,GAAA;AACjB,IAAA,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;AACpD;AAmBM,SAAU,cAAc,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,GAAG,KAAK,EAAyB,EAAA;AACtG,IAAA,MAAM,QAAQ,GAAG,MAAM,CAAmB,IAAI,CAAC;AAC/C,IAAA,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAG,QAAQ,CAAc;AAC1D,QAAA,WAAW,EAAE,KAAK;AAClB,QAAA,QAAQ,EAAE,CAAC;AACX,QAAA,QAAQ,EAAE;AACX,KAAA,CAAC;AAEF,IAAA,MAAM,aAAa,GAAG,MAAM,CAAC,iBAAiB,IAAI,sBAAsB;AACxE,IAAA,MAAM,WAAW,GAAG,MAAM,CAAC,WAAW,IAAI,qBAAqB;;;AAI/D,IAAA,MAAM,eAAe,GAAG,QAAQ,GAAG,SAAS,GAAG,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC;AAEtE,IAAA,MAAM,WAAW,GAAG,WAAW,CAC7B,CAAC,IAAU,KAAI;;;AAGb,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;QAEnF,IAAI,CAAC,OAAO,EAAE;AACZ,YAAA,OAAO,KAAA,IAAA,IAAP,OAAO,KAAA,MAAA,GAAA,MAAA,GAAP,OAAO,CAAG,CAAA,+BAAA,EAAkC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,CAAE,CAAC;YACvE;QACF;;AAGA,QAAA,IAAI,IAAI,CAAC,IAAI,GAAG,WAAW,EAAE;AAC3B,YAAA,OAAO,aAAP,OAAO,KAAA,MAAA,GAAA,MAAA,GAAP,OAAO,CAAG,CAAA,0CAAA,EAA6C,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,GAAG,IAAI,CAAC,CAAA,EAAA,CAAI,CAAC;YACjG;QACF;;AAGA,QAAA,cAAc,CAAC;AACb,YAAA,WAAW,EAAE,IAAI;AACjB,YAAA,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI,CAAC;AAChB,SAAA,CAAC;AAEF,QAAA,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE;;AAG/B,QAAA,MAAM,CAAC,UAAU,GAAG,CAAC,KAAK,KAAI;AAC5B,YAAA,IAAI,KAAK,CAAC,gBAAgB,EAAE;gBAC1B,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;AAC/D,gBAAA,cAAc,CAAC,IAAI,KAAK,EAAE,GAAG,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;YACjD;AACF,QAAA,CAAC;AAED,QAAA,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,KAAI;;YACpB,MAAM,GAAG,GAAG,CAAA,EAAA,GAAA,CAAC,CAAC,MAAM,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,MAAgB;AACtC,YAAA,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE;;AAGvB,YAAA,cAAc,CAAC,IAAI,KAAK,EAAE,GAAG,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;AAEnD,YAAA,GAAG,CAAC,MAAM,GAAG,MAAK;AAChB,gBAAA,cAAc,CAAC,IAAI,KAAK,EAAE,GAAG,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;AAEnD,gBAAA,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,GAAG,GAAG;;AAG3C,gBAAA,MAAM,aAAa,GAAG,MAAM,CAAC,aAAa,IAAI;AAC5C,oBAAA,IAAI,EAAE,CAAC;AACP,oBAAA,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,MAAM,CAAC,KAAK;oBAClB,IAAI,EAAE,MAAM,CAAC,MAAM;iBACpB;gBAED,MAAM,SAAS,GAAG,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI;gBACzD,MAAM,UAAU,GAAG,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI;AAE1D,gBAAA,MAAM,WAAW,GAAG,YAAY,GAAG,aAAa;AAChD,gBAAA,IAAI,KAAa;AACjB,gBAAA,IAAI,MAAc;;AAGlB,gBAAA,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,UAAU,CAAC,GAAG,GAAG;AAExD,gBAAA,IAAI,WAAW,GAAG,CAAC,EAAE;oBACnB,KAAK,GAAG,UAAU;AAClB,oBAAA,MAAM,GAAG,UAAU,GAAG,WAAW;gBACnC;qBAAO;oBACL,MAAM,GAAG,UAAU;AACnB,oBAAA,KAAK,GAAG,UAAU,GAAG,WAAW;gBAClC;;AAGA,gBAAA,MAAM,CAAC,GAAG,aAAa,CAAC,IAAI,GAAG,CAAC,SAAS,GAAG,KAAK,IAAI,CAAC;AACtD,gBAAA,MAAM,CAAC,GAAG,aAAa,CAAC,IAAI,GAAG,CAAC,UAAU,GAAG,MAAM,IAAI,CAAC;AAExD,gBAAA,MAAM,SAAS,GAAmB;AAChC,oBAAA,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;AAClB,oBAAA,IAAI,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE;AACvB,oBAAA,QAAQ,EAAE,CAAC;iBACZ;;AAGD,gBAAA,cAAc,CAAC,IAAI,KAAK,EAAE,GAAG,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;AAEpD,gBAAA,WAAW,CAAC;oBACV,EAAE,EAAE,UAAU,EAAE;oBAChB,GAAG;oBACH,YAAY;oBACZ,aAAa;oBACb,SAAS;AACV,iBAAA,CAAC;;gBAGF,UAAU,CAAC,MAAK;AACd,oBAAA,cAAc,CAAC;AACb,wBAAA,WAAW,EAAE,KAAK;AAClB,wBAAA,QAAQ,EAAE,CAAC;AACX,wBAAA,QAAQ,EAAE;AACX,qBAAA,CAAC;gBACJ,CAAC,EAAE,GAAG,CAAC;AACT,YAAA,CAAC;AAED,YAAA,GAAG,CAAC,OAAO,GAAG,MAAK;AACjB,gBAAA,cAAc,CAAC;AACb,oBAAA,WAAW,EAAE,KAAK;AAClB,oBAAA,QAAQ,EAAE,CAAC;AACX,oBAAA,QAAQ,EAAE;AACX,iBAAA,CAAC;AACF,gBAAA,OAAO,aAAP,OAAO,KAAA,MAAA,GAAA,MAAA,GAAP,OAAO,CAAG,uCAAuC,CAAC;AACpD,YAAA,CAAC;AAED,YAAA,GAAG,CAAC,GAAG,GAAG,GAAG;AACf,QAAA,CAAC;AAED,QAAA,MAAM,CAAC,OAAO,GAAG,MAAK;AACpB,YAAA,cAAc,CAAC;AACb,gBAAA,WAAW,EAAE,KAAK;AAClB,gBAAA,QAAQ,EAAE,CAAC;AACX,gBAAA,QAAQ,EAAE;AACX,aAAA,CAAC;AACF,YAAA,OAAO,aAAP,OAAO,KAAA,MAAA,GAAA,MAAA,GAAP,OAAO,CAAG,4BAA4B,CAAC;AACzC,QAAA,CAAC;AAED,QAAA,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC;AAC5B,IAAA,CAAC,EACD,CAAC,aAAa,EAAE,WAAW,EAAE,MAAM,EAAE,WAAW,EAAE,OAAO,CAAC,CAC3D;AAED,IAAA,MAAM,gBAAgB,GAAG,WAAW,CAClC,CAAC,KAA0C,KAAI;;QAC7C,MAAM,IAAI,GAAG,CAAA,EAAA,GAAA,KAAK,CAAC,MAAM,CAAC,KAAK,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAG,CAAC,CAAC;QACpC,IAAI,IAAI,EAAE;YACR,WAAW,CAAC,IAAI,CAAC;QACnB;;AAEA,QAAA,IAAI,QAAQ,CAAC,OAAO,EAAE;AACpB,YAAA,QAAQ,CAAC,OAAO,CAAC,KAAK,GAAG,EAAE;QAC7B;AACF,IAAA,CAAC,EACD,CAAC,WAAW,CAAC,CACd;AAED,IAAA,MAAM,UAAU,GAAG,WAAW,CAC5B,CAAC,KAAsB,KAAI;;QACzB,KAAK,CAAC,cAAc,EAAE;QACtB,KAAK,CAAC,eAAe,EAAE;QAEvB,MAAM,IAAI,GAAG,CAAA,EAAA,GAAA,KAAK,CAAC,YAAY,CAAC,KAAK,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAG,CAAC,CAAC;QAC1C,IAAI,IAAI,EAAE;YACR,WAAW,CAAC,IAAI,CAAC;QACnB;AACF,IAAA,CAAC,EACD,CAAC,WAAW,CAAC,CACd;AAED,IAAA,MAAM,cAAc,GAAG,WAAW,CAAC,CAAC,KAAsB,KAAI;QAC5D,KAAK,CAAC,cAAc,EAAE;QACtB,KAAK,CAAC,eAAe,EAAE;IACzB,CAAC,EAAE,EAAE,CAAC;AAEN,IAAA,MAAM,cAAc,GAAG,WAAW,CAAC,MAAK;;AACtC,QAAA,CAAA,EAAA,GAAA,QAAQ,CAAC,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,KAAK,EAAE;IAC3B,CAAC,EAAE,EAAE,CAAC;;AAGN,IAAA,MAAM,WAAW,GAAG,WAAW,CAC7B,CAAC,KAAqB,KAAI;;QACxB,MAAM,KAAK,GAAG,CAAA,EAAA,GAAA,KAAK,CAAC,aAAa,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,KAAK;AACxC,QAAA,IAAI,CAAC,KAAK;YAAE;AAEZ,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,YAAA,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;YACrB,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;AAClC,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,EAAE;gBAC7B,IAAI,IAAI,EAAE;oBACR,KAAK,CAAC,cAAc,EAAE;oBACtB,WAAW,CAAC,IAAI,CAAC;oBACjB;gBACF;YACF;QACF;AACF,IAAA,CAAC,EACD,CAAC,WAAW,CAAC,CACd;IAED,OAAO;QACL,QAAQ;QACR,gBAAgB;QAChB,UAAU;QACV,cAAc;QACd,cAAc;QACd,WAAW;QACX,aAAa;QACb,eAAe;QACf,WAAW;QACX,QAAQ;KACT;AACH;;AClNA;AACA,SAAS,gBAAgB,CAAC,MAAkB,EAAE,MAAkB,EAAA;IAC9D,MAAM,EAAE,GAAG,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO;IAC1C,MAAM,EAAE,GAAG,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO;AAC1C,IAAA,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACrC;AAEA;AACA,SAAS,cAAc,CAAC,MAAkB,EAAE,MAAkB,EAAA;IAC5D,OAAO;QACL,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,CAAC;QACxC,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,CAAC;KACzC;AACH;AAWM,SAAU,iBAAiB,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,GAAG,CAAC,EAA4B,EAAA;IACtH,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC;IACjE,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;IACnD,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAkB,IAAI,CAAC;AAC/D,IAAA,MAAM,YAAY,GAAG,MAAM,CAA2B,IAAI,CAAC;AAC3D,IAAA,MAAM,aAAa,GAAG,MAAM,CAAoB,IAAI,CAAC;IACrD,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;;AAGnD,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC;AAChC,IAAA,MAAM,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC;AACpC,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC;AAChC,IAAA,MAAM,eAAe,GAAG,MAAM,CAAC,YAAY,CAAC;;IAG5C,SAAS,CAAC,MAAK;AACb,QAAA,SAAS,CAAC,OAAO,GAAG,MAAM;AAC5B,IAAA,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IAEZ,SAAS,CAAC,MAAK;AACb,QAAA,WAAW,CAAC,OAAO,GAAG,QAAQ;AAChC,IAAA,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAEd,SAAS,CAAC,MAAK;AACb,QAAA,SAAS,CAAC,OAAO,GAAG,MAAM;AAC5B,IAAA,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IAEZ,SAAS,CAAC,MAAK;AACb,QAAA,eAAe,CAAC,OAAO,GAAG,YAAY;AACxC,IAAA,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;;IAGlB,SAAS,CAAC,MAAK;QACb,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE;AACpC,YAAA,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;QAC7C;AAAO,aAAA,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;YAC9B,aAAa,CAAC,IAAI,CAAC;QACrB;AAAO,aAAA,IAAI,UAAU,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,UAAU,CAAC,EAAE;;YAErE,aAAa,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC;QACxE;AACF,IAAA,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AAExB,IAAA,MAAM,cAAc,GAAG,WAAW,CAChC,CAAC,YAA4B,KAAoB;QAC/C,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,YAAY;;AAGjD,QAAA,MAAM,OAAO,GAAG,MAAM,CAAC,YAAY,IAAI,EAAE;AAEzC,QAAA,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC;AAClD,QAAA,MAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC;QAEpD,OAAO;AACL,YAAA,QAAQ,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE;YAC1C,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,EAAE,aAAa,EAAE;YACpD,QAAQ;SACT;AACH,IAAA,CAAC,EACD,CAAC,MAAM,CAAC,YAAY,CAAC,CACtB;IAED,MAAM,oBAAoB,GAAG,WAAW,CACtC,CAAC,OAAe,EAAE,YAA4B,KAAI;AAChD,QAAA,MAAM,OAAO,GAAG,cAAc,CAAC,YAAY,CAAC;AAC5C,QAAA,MAAM,aAAa,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,KACnC,GAAG,CAAC,EAAE,KAAK,OAAO,GAAG,EAAE,GAAG,GAAG,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,GAAG,CAC1D;AACD,QAAA,QAAQ,aAAR,QAAQ,KAAA,MAAA,GAAA,MAAA,GAAR,QAAQ,CAAG,aAAa,CAAC;IAC3B,CAAC,EACD,CAAC,cAAc,EAAE,MAAM,EAAE,QAAQ,CAAC,CACnC;AAED,IAAA,MAAM,iBAAiB,GAAG,WAAW,CACnC,CACE,KAAyB,EACzB,OAAe,EACf,IAAc,EACd,MAAkC,KAChC;AACF,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC;AACtD,QAAA,IAAI,CAAC,KAAK;YAAE;QAEZ,KAAK,CAAC,cAAc,EAAE;QACtB,KAAK,CAAC,eAAe,EAAE;;AAGvB,QAAA,MAAM,OAAO,GAAG,KAAK,CAAC,aAA4B;AAClD,QAAA,OAAO,CAAC,iBAAiB,CAAC,KAAK,CAAC,SAAS,CAAC;QAE1C,aAAa,CAAC,OAAO,CAAC;QACtB,aAAa,CAAC,IAAI,CAAC;QACnB,WAAW,CAAC,IAAI,CAAC;QACjB,YAAY,CAAC,OAAO,GAAG;YACrB,IAAI;YACJ,OAAO;AACP,YAAA,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,EAAE,KAAK,CAAC,OAAO,EAAE;AACrD,YAAA,cAAc,EAAE,EAAE,GAAG,KAAK,CAAC,SAAS,EAAE;YACtC,MAAM;YACN,SAAS,EAAE,KAAK,CAAC,SAAS;YAC1B,OAAO;SACR;AACH,IAAA,CAAC,EACD,CAAC,MAAM,CAAC,CACT;;AAGD,IAAA,MAAM,iBAAiB,GAAG,WAAW,CACnC,CAAC,KAAmB,KAAI;;AACtB,QAAA,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO;AACtC,QAAA,IAAI,CAAC,SAAS;YAAE;;AAGhB,QAAA,IAAI,SAAS,CAAC,SAAS,KAAK,SAAS,IAAI,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,SAAS;YAAE;AAElF,QAAA,MAAM,aAAa,GAAG,SAAS,CAAC,OAAO;AACvC,QAAA,MAAM,aAAa,GAAG,SAAS,CAAC,OAAO;AACvC,QAAA,MAAM,mBAAmB,GAAG,eAAe,CAAC,OAAO;AAEnD,QAAA,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,SAAS,CAAC,OAAO,CAAC;AACvE,QAAA,IAAI,CAAC,KAAK;YAAE;;AAGZ,QAAA,MAAM,MAAM,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,IAAI,mBAAmB;AAChF,QAAA,MAAM,MAAM,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,IAAI,mBAAmB;AAEhF,QAAA,IAAI,YAA4B;AAEhC,QAAA,QAAQ,SAAS,CAAC,IAAI;AACpB,YAAA,KAAK,MAAM;AACT,gBAAA,YAAY,GAAG;oBACb,GAAG,KAAK,CAAC,SAAS;AAClB,oBAAA,QAAQ,EAAE;wBACR,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM;wBAC/C,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM;AAChD,qBAAA;iBACF;gBACD;YAEF,KAAK,QAAQ,EAAE;AACb,gBAAA,MAAM,EAAE,MAAM,EAAE,GAAG,SAAS;gBAC5B,MAAM,WAAW,GAAG,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,aAAa;AAC5D,gBAAA,MAAM,OAAO,GAAG,aAAa,CAAC,YAAY,IAAI,EAAE;gBAEhD,IAAI,QAAQ,GAAG,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK;gBAClD,IAAI,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAC9C,IAAI,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;;gBAG9C,QAAQ,MAAM;AACZ,oBAAA,KAAK,IAAI;AACT,oBAAA,KAAK,IAAI;wBACP,QAAQ,GAAG,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM;wBACvD;AACF,oBAAA,KAAK,IAAI;AACT,oBAAA,KAAK,IAAI;wBACP,QAAQ,GAAG,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM;wBACvD;;;gBAIJ,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC;AAChD,gBAAA,MAAM,aAAa,GAAG,YAAY,GAAG,WAAW;;gBAGhD,MAAM,SAAS,GAAG,YAAY,GAAG,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK;gBACpE,MAAM,UAAU,GAAG,aAAa,GAAG,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM;gBAEvE,QAAQ,MAAM;AACZ,oBAAA,KAAK,IAAI;;wBAEP;AACF,oBAAA,KAAK,IAAI;;wBAEP,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS;wBACtD;AACF,oBAAA,KAAK,IAAI;;wBAEP,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU;wBACvD;AACF,oBAAA,KAAK,IAAI;;wBAEP,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS;wBACtD,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU;wBACvD;;AAGJ,gBAAA,YAAY,GAAG;oBACb,GAAG,KAAK,CAAC,SAAS;oBAClB,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE;oBAC9B,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,EAAE,aAAa,EAAE;iBACrD;gBACD;YACF;YAEA,KAAK,QAAQ,EAAE;AACb,gBAAA,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE;oBAChC;gBACF;;AAGA,gBAAA,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO;AACtC,gBAAA,IAAI,CAAC,SAAS;oBAAE;AAEhB,gBAAA,MAAM,IAAI,GAAG,SAAS,CAAC,qBAAqB,EAAE;;gBAG9C,MAAM,OAAO,GACX,CAAC,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;oBACpC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,mBAAmB;gBAChE,MAAM,OAAO,GACX,CAAC,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;oBACpC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,mBAAmB;;gBAGjE,MAAM,WAAW,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI;gBACzD,MAAM,WAAW,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG;gBACxD,MAAM,aAAa,GAAG,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI;gBAC/C,MAAM,aAAa,GAAG,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG;AAE9C,gBAAA,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAC3B,WAAW,GAAG,OAAO,EACrB,WAAW,GAAG,OAAO,CACtB;AACD,gBAAA,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAC7B,aAAa,GAAG,OAAO,EACvB,aAAa,GAAG,OAAO,CACxB;AAED,gBAAA,MAAM,QAAQ,GACZ,SAAS,CAAC,cAAc,CAAC,QAAQ;AACjC,oBAAA,CAAC,CAAC,YAAY,GAAG,UAAU,IAAI,GAAG,IAAI,IAAI,CAAC,EAAE;AAE/C,gBAAA,YAAY,GAAG;oBACb,GAAG,KAAK,CAAC,SAAS;oBAClB,QAAQ;iBACT;gBACD;YACF;AAEA,YAAA;gBACE;;;AAIJ,QAAA,MAAM,aAAa,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,GAAG,KAC1C,GAAG,CAAC,EAAE,KAAK,SAAS,CAAC,OAAO,GAAG,EAAE,GAAG,GAAG,EAAE,SAAS,EAAE,cAAc,CAAC,YAAY,CAAC,EAAE,GAAG,GAAG,CACzF;AACD,QAAA,CAAA,EAAA,GAAA,WAAW,CAAC,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAA,IAAA,CAAA,WAAA,EAAG,aAAa,CAAC;AACtC,IAAA,CAAC,EACD,CAAC,YAAY,EAAE,cAAc,CAAC;KAC/B;AAED,IAAA,MAAM,eAAe,GAAG,WAAW,CAAC,CAAC,KAAoB,KAAI;AAC3D,QAAA,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO;;QAGtC,IAAI,CAAA,SAAS,KAAA,IAAA,IAAT,SAAS,uBAAT,SAAS,CAAE,OAAO,KAAI,CAAA,SAAS,KAAA,IAAA,IAAT,SAAS,uBAAT,SAAS,CAAE,SAAS,MAAK,SAAS,EAAE;AAC5D,YAAA,IAAI;gBACF,SAAS,CAAC,OAAO,CAAC,qBAAqB,CAAC,SAAS,CAAC,SAAS,CAAC;YAC9D;AAAE,YAAA,OAAA,EAAA,EAAM;;YAER;QACF;QAEA,aAAa,CAAC,KAAK,CAAC;QACpB,WAAW,CAAC,IAAI,CAAC;AACjB,QAAA,YAAY,CAAC,OAAO,GAAG,IAAI;IAC7B,CAAC,EAAE,EAAE,CAAC;;IAGN,MAAM,gBAAgB,GAAG,WAAW,CAClC,CAAC,KAAuB,EAAE,OAAe,KAAI;;AAE3C,QAAA,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC;YAAE;AAEhC,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC;AACtD,QAAA,IAAI,CAAC,KAAK;YAAE;QAEZ,KAAK,CAAC,cAAc,EAAE;QACtB,KAAK,CAAC,eAAe,EAAE;QAEvB,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC/B,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC/B,MAAM,QAAQ,GAAG,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC;QACjD,MAAM,MAAM,GAAG,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC;QAE7C,aAAa,CAAC,OAAO,CAAC;QACtB,aAAa,CAAC,IAAI,CAAC;;AAGnB,QAAA,IAAI,YAAY,CAAC,OAAO,EAAE;YACxB,aAAa,CAAC,KAAK,CAAC;YACpB,WAAW,CAAC,IAAI,CAAC;AACjB,YAAA,YAAY,CAAC,OAAO,GAAG,IAAI;QAC7B;QAEA,aAAa,CAAC,OAAO,GAAG;YACtB,OAAO;AACP,YAAA,aAAa,EAAE,QAAQ;AACvB,YAAA,cAAc,EAAE,EAAE,GAAG,KAAK,CAAC,SAAS,EAAE;AACtC,YAAA,WAAW,EAAE,MAAM;SACpB;AACH,IAAA,CAAC,EACD,CAAC,MAAM,CAAC,CACT;;AAGD,IAAA,MAAM,eAAe,GAAG,WAAW,CACjC,CAAC,KAAiB,KAAI;;AACpB,QAAA,MAAM,UAAU,GAAG,aAAa,CAAC,OAAO;QACxC,IAAI,CAAC,UAAU,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC;YAAE;AAE/C,QAAA,MAAM,aAAa,GAAG,SAAS,CAAC,OAAO;AACvC,QAAA,MAAM,aAAa,GAAG,SAAS,CAAC,OAAO;AACvC,QAAA,MAAM,mBAAmB,GAAG,eAAe,CAAC,OAAO;AAEnD,QAAA,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,UAAU,CAAC,OAAO,CAAC;AACxE,QAAA,IAAI,CAAC,KAAK;YAAE;QAEZ,KAAK,CAAC,cAAc,EAAE;QAEtB,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC/B,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC/B,MAAM,eAAe,GAAG,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC;QACxD,MAAM,aAAa,GAAG,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC;;AAGpD,QAAA,MAAM,KAAK,GAAG,eAAe,GAAG,UAAU,CAAC,aAAa;;QAGxD,MAAM,WAAW,GAAG,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,aAAa;AAC5D,QAAA,MAAM,OAAO,GAAG,aAAa,CAAC,YAAY,IAAI,EAAE;AAEhD,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AAChF,QAAA,MAAM,SAAS,GAAG,QAAQ,GAAG,WAAW;;AAGxC,QAAA,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO;AACtC,QAAA,IAAI,CAAC,SAAS;YAAE;AAChB,QAAA,MAAM,IAAI,GAAG,SAAS,CAAC,qBAAqB,EAAE;;AAG9C,QAAA,MAAM,YAAY,GAAG,CAAC,aAAa,CAAC,CAAC,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,IAAI,mBAAmB;AACvF,QAAA,MAAM,YAAY,GAAG,CAAC,aAAa,CAAC,CAAC,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,IAAI,mBAAmB;;AAGvF,QAAA,MAAM,iBAAiB,GAAG,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC;AACzG,QAAA,MAAM,iBAAiB,GAAG,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;;AAG1G,QAAA,MAAM,YAAY,GAAG,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,mBAAmB;AACjF,QAAA,MAAM,YAAY,GAAG,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,mBAAmB;;AAGhF,QAAA,MAAM,UAAU,GAAG,YAAY,GAAG,CAAC,iBAAiB,GAAG,YAAY,IAAI,KAAK,GAAG,YAAY;AAC3F,QAAA,MAAM,UAAU,GAAG,YAAY,GAAG,CAAC,iBAAiB,GAAG,YAAY,IAAI,KAAK,GAAG,YAAY;AAE3F,QAAA,MAAM,IAAI,GAAG,UAAU,GAAG,QAAQ,GAAG,CAAC;AACtC,QAAA,MAAM,IAAI,GAAG,UAAU,GAAG,SAAS,GAAG,CAAC;AAEvC,QAAA,MAAM,YAAY,GAAmB;YACnC,QAAQ,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE;YAC9B,IAAI,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE;AAC5C,YAAA,QAAQ,EAAE,UAAU,CAAC,cAAc,CAAC,QAAQ;SAC7C;;AAGD,QAAA,MAAM,aAAa,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,GAAG,KAC1C,GAAG,CAAC,EAAE,KAAK,UAAU,CAAC,OAAO,GAAG,EAAE,GAAG,GAAG,EAAE,SAAS,EAAE,cAAc,CAAC,YAAY,CAAC,EAAE,GAAG,GAAG,CAC1F;AACD,QAAA,CAAA,EAAA,GAAA,WAAW,CAAC,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAA,IAAA,CAAA,WAAA,EAAG,aAAa,CAAC;AACtC,IAAA,CAAC,EACD,CAAC,YAAY,EAAE,cAAc,CAAC;KAC/B;AAED,IAAA,MAAM,cAAc,GAAG,WAAW,CAAC,MAAK;QACtC,aAAa,CAAC,KAAK,CAAC;AACpB,QAAA,aAAa,CAAC,OAAO,GAAG,IAAI;IAC9B,CAAC,EAAE,EAAE,CAAC;;IAGN,SAAS,CAAC,MAAK;QACb,IAAI,UAAU,EAAE;AACd,YAAA,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,iBAAiB,CAAC;AACzD,YAAA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,eAAe,CAAC;AACrD,YAAA,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,eAAe,CAAC;AAEzD,YAAA,OAAO,MAAK;AACV,gBAAA,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,iBAAiB,CAAC;AAC5D,gBAAA,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,eAAe,CAAC;AACxD,gBAAA,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,eAAe,CAAC;AAC9D,YAAA,CAAC;QACH;IACF,CAAC,EAAE,CAAC,UAAU,EAAE,iBAAiB,EAAE,eAAe,CAAC,CAAC;;IAGpD,SAAS,CAAC,MAAK;QACb,IAAI,UAAU,EAAE;AACd,YAAA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,eAAe,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;AACzE,YAAA,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,cAAc,CAAC;AACnD,YAAA,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,cAAc,CAAC;AAEtD,YAAA,OAAO,MAAK;AACV,gBAAA,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,eAAe,CAAC;AACxD,gBAAA,MAAM,CAAC,mBAAmB,CAAC,UAAU,EAAE,cAAc,CAAC;AACtD,gBAAA,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,cAAc,CAAC;AAC3D,YAAA,CAAC;QACH;IACF,CAAC,EAAE,CAAC,UAAU,EAAE,eAAe,EAAE,cAAc,CAAC,CAAC;AAEjD,IAAA,MAAM,WAAW,GAAG,WAAW,CAAC,CAAC,OAAsB,KAAI;QACzD,aAAa,CAAC,OAAO,CAAC;IACxB,CAAC,EAAE,EAAE,CAAC;AAEN,IAAA,MAAM,WAAW,GAAG,WAAW,CAAC,MAAK;QACnC,aAAa,CAAC,IAAI,CAAC;IACrB,CAAC,EAAE,EAAE,CAAC;AAEN,IAAA,MAAM,WAAW,GAAG,WAAW,CAC7B,CAAC,OAAe,KAAI;AAClB,QAAA,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC;AAChE,QAAA,QAAQ,aAAR,QAAQ,KAAA,MAAA,GAAA,MAAA,GAAR,QAAQ,CAAG,aAAa,CAAC;AAC3B,IAAA,CAAC,EACD,CAAC,MAAM,EAAE,QAAQ,CAAC,CACnB;AAED,IAAA,MAAM,cAAc,GAAG,WAAW,CAAC,MAAK;QACtC,IAAI,UAAU,EAAE;YACd,WAAW,CAAC,UAAU,CAAC;QACzB;AACF,IAAA,CAAC,EAAE,CAAC,UAAU,EAAE,WAAW,CAAC,CAAC;AAE7B,IAAA,MAAM,YAAY,GAAG,WAAW,CAC9B,CAAC,OAAe,KAAI;AAClB,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC;AACtD,QAAA,IAAI,CAAC,KAAK;YAAE;AACZ,QAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC;AACzD,QAAA,QAAQ,KAAA,IAAA,IAAR,QAAQ,KAAA,MAAA,GAAA,MAAA,GAAR,QAAQ,CAAG,CAAC,GAAG,MAAM,EAAE,KAAK,CAAC,CAAC;AAChC,IAAA,CAAC,EACD,CAAC,MAAM,EAAE,QAAQ,CAAC,CACnB;AAED,IAAA,MAAM,UAAU,GAAG,WAAW,CAC5B,CAAC,OAAe,KAAI;AAClB,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC;AACtD,QAAA,IAAI,CAAC,KAAK;YAAE;AACZ,QAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC;AACzD,QAAA,QAAQ,KAAA,IAAA,IAAR,QAAQ,KAAA,MAAA,GAAA,MAAA,GAAR,QAAQ,CAAG,CAAC,KAAK,EAAE,GAAG,MAAM,CAAC,CAAC;AAChC,IAAA,CAAC,EACD,CAAC,MAAM,EAAE,QAAQ,CAAC,CACnB;IAED,MAAM,YAAY,GAAG,WAAW,CAC9B,CAAC,SAAiB,EAAE,OAAe,KAAI;QACrC,IAAI,SAAS,GAAG,CAAC,IAAI,SAAS,IAAI,MAAM,CAAC,MAAM;YAAE;QACjD,IAAI,OAAO,GAAG,CAAC,IAAI,OAAO,IAAI,MAAM,CAAC,MAAM;YAAE;QAC7C,IAAI,SAAS,KAAK,OAAO;YAAE;AAE3B,QAAA,MAAM,SAAS,GAAG,CAAC,GAAG,MAAM,CAAC;AAC7B,QAAA,MAAM,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;QAC9C,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,EAAE,KAAK,CAAC;AACnC,QAAA,QAAQ,aAAR,QAAQ,KAAA,MAAA,GAAA,MAAA,GAAR,QAAQ,CAAG,SAAS,CAAC;AACvB,IAAA,CAAC,EACD,CAAC,MAAM,EAAE,QAAQ,CAAC,CACnB;IAED,OAAO;QACL,UAAU;QACV,UAAU;QACV,UAAU;QACV,QAAQ;QACR,iBAAiB;QACjB,gBAAgB;QAChB,WAAW;QACX,WAAW;QACX,WAAW;QACX,cAAc;QACd,YAAY;QACZ,UAAU;QACV,YAAY;QACZ,oBAAoB;KACrB;AACH;;ACzfA,MAAMA,gBAAc,GAA+B;AACjD,IAAA,gBAAgB,EAAE,GAAG;AACrB,IAAA,gBAAgB,EAAE,IAAI;AACtB,IAAA,OAAO,EAAE,IAAI;CACd;AAED;;;AAGG;AACG,SAAU,aAAa,CAAC,MAAyB,EAAA;AACrD,IAAA,MAAM,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,OAAO,EAAE,GAAG;AACtD,QAAA,GAAGA,gBAAc;AACjB,QAAA,GAAG,MAAM;KACV;AAED,IAAA,MAAM,aAAa,GAAG,WAAW,CAAC,CAAC,KAAa,KAAgB;QAC9D,IAAI,KAAK,IAAI,gBAAgB;AAAE,YAAA,OAAO,QAAQ;QAC9C,IAAI,KAAK,IAAI,gBAAgB;AAAE,YAAA,OAAO,QAAQ;AAC9C,QAAA,OAAO,SAAS;AAClB,IAAA,CAAC,EAAE,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;AAExC,IAAA,MAAM,eAAe,GAAG,WAAW,CAAC,MAAsB;;AAExD,QAAA,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;YACjC,OAAO;AACL,gBAAA,UAAU,EAAE,SAAS;AACrB,gBAAA,QAAQ,EAAE,KAAK;AACf,gBAAA,QAAQ,EAAE,KAAK;AACf,gBAAA,SAAS,EAAE,IAAI;AACf,gBAAA,aAAa,EAAE,IAAI;AACnB,gBAAA,cAAc,EAAE,GAAG;AACnB,gBAAA,UAAU,EAAE,KAAK;AACjB,gBAAA,WAAW,EAAE,IAAI;aAClB;QACH;AAEA,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,UAAU;AAC/B,QAAA,MAAM,MAAM,GAAG,MAAM,CAAC,WAAW;AACjC,QAAA,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC;QAEvC,OAAO;YACL,UAAU;YACV,QAAQ,EAAE,UAAU,KAAK,QAAQ;YACjC,QAAQ,EAAE,UAAU,KAAK,QAAQ;YACjC,SAAS,EAAE,UAAU,KAAK,SAAS;AACnC,YAAA,aAAa,EAAE,KAAK;AACpB,YAAA,cAAc,EAAE,MAAM;YACtB,UAAU,EAAE,MAAM,GAAG,KAAK;YAC1B,WAAW,EAAE,KAAK,IAAI,MAAM;SAC7B;AACH,IAAA,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC;IAEnB,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAkB,eAAe,CAAC;IAEpE,SAAS,CAAC,MAAK;AACb,QAAA,IAAI,CAAC,OAAO,IAAI,OAAO,MAAM,KAAK,WAAW;YAAE;;QAG/C,MAAM,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC,CAAA,YAAA,EAAe,gBAAgB,CAAA,GAAA,CAAK,CAAC;QAC3E,MAAM,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC,CAAA,YAAA,EAAe,gBAAgB,CAAA,GAAA,CAAK,CAAC;QAC3E,MAAM,aAAa,GAAG,MAAM,CAAC,UAAU,CAAC,yBAAyB,CAAC;QAElE,MAAM,WAAW,GAAG,MAAK;AACvB,YAAA,MAAM,KAAK,GAAG,MAAM,CAAC,UAAU;AAC/B,YAAA,MAAM,MAAM,GAAG,MAAM,CAAC,WAAW;AACjC,YAAA,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC;AAEvC,YAAA,QAAQ,CAAC;gBACP,UAAU;gBACV,QAAQ,EAAE,UAAU,KAAK,QAAQ;gBACjC,QAAQ,EAAE,UAAU,KAAK,QAAQ;gBACjC,SAAS,EAAE,UAAU,KAAK,SAAS;AACnC,gBAAA,aAAa,EAAE,KAAK;AACpB,gBAAA,cAAc,EAAE,MAAM;gBACtB,UAAU,EAAE,MAAM,GAAG,KAAK;gBAC1B,WAAW,EAAE,KAAK,IAAI,MAAM;AAC7B,aAAA,CAAC;AACJ,QAAA,CAAC;;AAGD,QAAA,MAAM,iBAAiB,GAAG,MAAM,WAAW,EAAE;;AAG7C,QAAA,MAAM,YAAY,GAAG,MAAM,WAAW,EAAE;;AAGxC,QAAA,WAAW,CAAC,gBAAgB,CAAC,QAAQ,EAAE,iBAAiB,CAAC;AACzD,QAAA,WAAW,CAAC,gBAAgB,CAAC,QAAQ,EAAE,iBAAiB,CAAC;AACzD,QAAA,aAAa,CAAC,gBAAgB,CAAC,QAAQ,EAAE,iBAAiB,CAAC;AAC3D,QAAA,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,YAAY,CAAC;;AAG/C,QAAA,WAAW,EAAE;AAEb,QAAA,OAAO,MAAK;AACV,YAAA,WAAW,CAAC,mBAAmB,CAAC,QAAQ,EAAE,iBAAiB,CAAC;AAC5D,YAAA,WAAW,CAAC,mBAAmB,CAAC,QAAQ,EAAE,iBAAiB,CAAC;AAC5D,YAAA,aAAa,CAAC,mBAAmB,CAAC,QAAQ,EAAE,iBAAiB,CAAC;AAC9D,YAAA,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,YAAY,CAAC;AACpD,QAAA,CAAC;IACH,CAAC,EAAE,CAAC,OAAO,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,aAAa,CAAC,CAAC;AAEhE,IAAA,OAAO,KAAK;AACd;;ACzHA;AACA,MAAM,mBAAmB,GAAG,EAAE;AAC9B,MAAM,yBAAyB,GAAG,EAAE,CAAC;AACrC,MAAM,sBAAsB,GAAG,EAAE,CAAC;AAClC,MAAM,8BAA8B,GAAG,EAAE;AACzC,MAAM,6BAA6B,GAAG,EAAE;AACxC,MAAM,YAAY,GAAG,SAAS,CAAC;AAE/B;AACA,MAAM,aAAa,GAAG,CAAA,mUAAA,CAAqU;AAE3V;AACA,SAAS,cAAc,CAAC,QAAiB,EAAE,QAAiB,EAAA;IAC1D,MAAM,UAAU,GAAG,QAAQ,GAAG,yBAAyB,GAAG,mBAAmB;IAE7E,OAAO;AACL,QAAA,QAAQ,EAAE,UAAU;AACpB,QAAA,KAAK,EAAE,UAAU;AACjB,QAAA,MAAM,EAAE,UAAU;AAClB,QAAA,eAAe,EAAE,SAAS;QAC1B,MAAM,EAAE,CAAA,UAAA,EAAa,YAAY,CAAA,CAAE;AACnC,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,SAAS,EAAE,YAAY;AACvB,QAAA,SAAS,EAAE;AACT,cAAE;AACF,cAAE,gCAAgC;AACpC,QAAA,UAAU,EAAE,qDAAqD;QACjE,SAAS,EAAE,QAAQ,GAAG,YAAY,GAAG,UAAU;AAC/C,QAAA,WAAW,EAAE,MAAM;KACpB;AACH;AAEA;AACA,SAAS,oBAAoB,CAAC,QAAiB,EAAE,QAAiB,EAAA;AAChE,IAAA,MAAM,UAAU,GAAG,QAAQ,GAAG,yBAAyB,GAAG,CAAC,GAAG,mBAAmB,GAAG,CAAC;IAErF,OAAO;AACL,QAAA,QAAQ,EAAE,UAAU;AACpB,QAAA,KAAK,EAAE,UAAU;AACjB,QAAA,MAAM,EAAE,UAAU;AAClB,QAAA,eAAe,EAAE,YAAY;AAC7B,QAAA,MAAM,EAAE,gBAAgB;AACxB,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,SAAS,EAAE,YAAY;AACvB,QAAA,MAAM,EAAE,aAAa;AACrB,QAAA,SAAS,EAAE;AACT,cAAE;AACF,cAAE,+BAA+B;AACnC,QAAA,UAAU,EAAE,qDAAqD;QACjE,SAAS,EAAE,QAAQ,GAAG,YAAY,GAAG,UAAU;AAC/C,QAAA,WAAW,EAAE,MAAM;KACpB;AACH;AAEA;AACA,SAAS,mBAAmB,CAAC,QAAiB,EAAE,QAAmC,EAAA;AACjF,IAAA,IAAI,CAAC,QAAQ;AAAE,QAAA,OAAO,EAAE;IAExB,MAAM,OAAO,GAAG,sBAAsB;IAItC,OAAO;AACL,QAAA,QAAQ,EAAE,UAAU;AACpB,QAAA,KAAK,EAAE,OAAO;AACd,QAAA,MAAM,EAAE,OAAO;AACf,QAAA,eAAe,EAAE,aAAa;AAC9B,QAAA,YAAY,EAAE,KAAK;;QAEnB,MAAM,EAAE,GAAO;AACf,QAAA,WAAW,EAAE,MAAM;AACnB,QAAA,MAAM,EAAE,QAAQ,KAAK,QAAQ,GAAG,aAAa,GAAG,kBAAkB,CAAC,QAAQ,CAAC;KAC7E;AACH;AAEA;AACA,SAAS,kBAAkB,CAAC,QAAmC,EAAA;IAC7D,QAAQ,QAAQ;AACd,QAAA,KAAK,IAAI;AACT,QAAA,KAAK,IAAI;AACP,YAAA,OAAO,aAAa;AACtB,QAAA,KAAK,IAAI;AACT,QAAA,KAAK,IAAI;AACP,YAAA,OAAO,aAAa;AACtB,QAAA;AACE,YAAA,OAAO,SAAS;;AAEtB;AAEM,SAAU,QAAQ,CAAC,EAAE,SAAS,EAAE,aAAa,EAAE,aAAa,EAAE,QAAQ,GAAG,KAAK,EAAiB,EAAA;IACnG,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,SAAS;;IAG9C,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC;;IAGrE,MAAM,6BAA6B,GAAG,WAAW,CAC/C,CAAC,CAAqB,EAAE,IAAc,EAAE,MAAkC,KAAI;AAC5E,QAAA,eAAe,CAAC,MAAM,IAAI,IAAI,IAAI,IAAI,CAAC;AACvC,QAAA,aAAa,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC;;QAG9B,MAAM,WAAW,GAAG,MAAK;YACvB,eAAe,CAAC,IAAI,CAAC;AACrB,YAAA,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,WAAW,CAAC;AACtD,YAAA,QAAQ,CAAC,mBAAmB,CAAC,eAAe,EAAE,WAAW,CAAC;AAC5D,QAAA,CAAC;AACD,QAAA,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,WAAW,CAAC;AACnD,QAAA,QAAQ,CAAC,gBAAgB,CAAC,eAAe,EAAE,WAAW,CAAC;AACzD,IAAA,CAAC,EACD,CAAC,aAAa,CAAC,CAChB;;IAGD,MAAM,UAAU,GAAG,QAAQ,GAAG,yBAAyB,GAAG,mBAAmB;IAC7E,MAAM,cAAc,GAAG,QAAQ,GAAG,6BAA6B,GAAG,8BAA8B;;IAGhG,MAAM,YAAY,GAAG,QAAQ,GAAG,CAAC,GAAG,CAAC;AAErC,IAAA,MAAM,cAAc,GAAwB;AAC1C,QAAA,QAAQ,EAAE,UAAU;QACpB,IAAI,EAAE,QAAQ,CAAC,CAAC;QAChB,GAAG,EAAE,QAAQ,CAAC,CAAC;QACf,KAAK,EAAE,IAAI,CAAC,KAAK;QACjB,MAAM,EAAE,IAAI,CAAC,MAAM;QACnB,SAAS,EAAE,QAAQ,GAAG,CAAA,OAAA,EAAU,QAAQ,CAAA,IAAA,CAAM,GAAG,SAAS;AAC1D,QAAA,eAAe,EAAE,eAAe;AAChC,QAAA,aAAa,EAAE,MAAM;KACtB;AAED,IAAA,MAAM,OAAO,GAGR;AACH,QAAA;AACE,YAAA,QAAQ,EAAE,IAAI;AACd,YAAA,KAAK,EAAE;AACL,gBAAA,GAAG,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACnC,gBAAA,IAAI,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACpC,gBAAA,MAAM,EAAE,aAAa;AACtB,aAAA;AACF,SAAA;AACD,QAAA;AACE,YAAA,QAAQ,EAAE,IAAI;AACd,YAAA,KAAK,EAAE;AACL,gBAAA,GAAG,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACnC,gBAAA,KAAK,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACrC,gBAAA,MAAM,EAAE,aAAa;AACtB,aAAA;AACF,SAAA;AACD,QAAA;AACE,YAAA,QAAQ,EAAE,IAAI;AACd,YAAA,KAAK,EAAE;AACL,gBAAA,MAAM,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACtC,gBAAA,IAAI,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACpC,gBAAA,MAAM,EAAE,aAAa;AACtB,aAAA;AACF,SAAA;AACD,QAAA;AACE,YAAA,QAAQ,EAAE,IAAI;AACd,YAAA,KAAK,EAAE;AACL,gBAAA,MAAM,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACtC,gBAAA,KAAK,EAAE,CAAC,UAAU,GAAG,CAAC,GAAG,YAAY;AACrC,gBAAA,MAAM,EAAE,aAAa;AACtB,aAAA;AACF,SAAA;KACF;;AAGD,IAAA,MAAM,WAAW,GAAwB;AACvC,QAAA,QAAQ,EAAE,UAAU;QACpB,KAAK,EAAE,EAAE;AACT,QAAA,MAAM,EAAE,CAAA,EAAG,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAA,SAAA,EAAY,YAAY,CAAA,CAAE;AACvD,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,aAAa,EAAE,MAAM;AACrB,QAAA,SAAS,EAAE;AACT,cAAE;AACF,cAAE,+BAA+B;KACpC;;IAGD,MAAM,UAAU,GAAG,QAAQ,GAAG,EAAE,GAAG,EAAE;AACrC,IAAA,MAAM,OAAO,GAAG,QAAQ,GAAG,GAAG,GAAG,GAAG;IAEpC,QACEC,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,cAAc,aACxBC,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,WAAW,EAAA,CAAI,EAG1B,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE,KAAI;AACxC,gBAAA,MAAM,QAAQ,GAAG,YAAY,KAAK,GAAG;gBACrC,MAAM,YAAY,GAAG,cAAc,CAAC,QAAQ,EAAE,QAAQ,CAAC;gBAEvD,QACEA,GAAA,CAAA,KAAA,EAAA,EAEE,KAAK,EAAE;AACL,wBAAA,GAAG,YAAY;AACf,wBAAA,GAAG,KAAK;AACR,wBAAA,aAAa,EAAE,MAAM;qBACtB,EACD,aAAa,EAAE,CAAC,CAAC,KAAK,6BAA6B,CAAC,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC,EACrE,aAAa,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE,EAAA,QAAA,EAGvC,QAAQ,KACPA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE,mBAAmB,CAAC,QAAQ,EAAE,GAAG,CAAC,EACzC,aAAa,EAAE,CAAC,CAAC,KAAI;4BACnB,CAAC,CAAC,eAAe,EAAE;AACnB,4BAAA,6BAA6B,CAAC,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC;AACjD,wBAAA,CAAC,EACD,aAAa,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE,EAAA,CACxC,CACH,IAnBI,GAAG,CAoBJ;YAEV,CAAC,CAAC,EAGD,aAAa,KACZD,IAAA,CAAAE,QAAA,EAAA,EAAA,QAAA,EAAA,CAEED,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,4BAAA,QAAQ,EAAE,UAAU;AACpB,4BAAA,GAAG,EAAE,OAAO;AACZ,4BAAA,IAAI,EAAE,KAAK;4BACX,KAAK,EAAE,QAAQ,GAAG,CAAC,GAAG,GAAG;AACzB,4BAAA,MAAM,EAAE,UAAU;AAClB,4BAAA,eAAe,EAAE,YAAY;AAC7B,4BAAA,SAAS,EAAE,kBAAkB;AAC7B,4BAAA,OAAO,EAAE,GAAG;AACZ,4BAAA,aAAa,EAAE,MAAM;yBACtB,EAAA,CACD,EAEFA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,4BAAA,GAAG,oBAAoB,CAAC,QAAQ,EAAE,YAAY,KAAK,QAAQ,CAAC;AAC5D,4BAAA,GAAG,EAAE,CAAC,cAAc,GAAG,UAAU,GAAG,CAAC;AACrC,4BAAA,IAAI,EAAE,KAAK;AACX,4BAAA,SAAS,EAAE,kBAAkB;AAC7B,4BAAA,aAAa,EAAE,MAAM;yBACtB,EACD,aAAa,EAAE,CAAC,CAAC,KAAK,6BAA6B,CAAC,CAAC,EAAE,QAAQ,CAAC,EAChE,aAAa,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE,YAGvC,QAAQ,KACPA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE,mBAAmB,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAC9C,aAAa,EAAE,CAAC,CAAC,KAAI;gCACnB,CAAC,CAAC,eAAe,EAAE;AACnB,gCAAA,6BAA6B,CAAC,CAAC,EAAE,QAAQ,CAAC;AAC5C,4BAAA,CAAC,EACD,aAAa,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE,GACxC,CACH,EAAA,CACG,IACL,CACJ,CAAA,EAAA,CACG;AAEV;;ACtQA,MAAM,WAAW,GAAG,EAAE,CAAC;AACvB,MAAM,kBAAkB,GAAG,EAAE,CAAC;AAE9B;AACA,MAAME,QAAM,GAAG;AACb,IAAA,MAAM,EAAE,SAAS;AACjB,IAAA,KAAK,EAAE,SAAS;AAChB,IAAA,KAAK,EAAE,SAAS;AAChB,IAAA,IAAI,EAAE,SAAS;AACf,IAAA,UAAU,EAAE,SAAS;AACrB,IAAA,SAAS,EAAE,SAAS;AACpB,IAAA,GAAG,EAAE;CACN;AAED,MAAM,UAAU,GAAwB;AACtC,IAAA,KAAK,EAAE,OAAO;IACd,eAAe,EAAEA,QAAM,CAAC,KAAK;AAC7B,IAAA,YAAY,EAAE,MAAM;AACpB,IAAA,QAAQ,EAAE,QAAQ;AAClB,IAAA,SAAS,EAAE,+BAA+B;AAC1C,IAAA,UAAU,EAAE,uDAAuD;;AAEnE,IAAA,WAAW,EAAE;CACd;AAED,MAAM,WAAW,GAAwB;AACvC,IAAA,OAAO,EAAE,MAAM;AACf,IAAA,UAAU,EAAE,QAAQ;AACpB,IAAA,OAAO,EAAE,KAAK;AACd,IAAA,YAAY,EAAE,CAAA,UAAA,EAAaA,QAAM,CAAC,UAAU,CAAA;CAC7C;AAED,MAAM,wBAAwB,GAAwB;AACpD,IAAA,OAAO,EAAE,MAAM;AACf,IAAA,KAAK,EAAE,MAAM;IACb,eAAe,EAAEA,QAAM,CAAC,UAAU;AAClC,IAAA,YAAY,EAAE,KAAK;AACnB,IAAA,OAAO,EAAE;CACV;AAED,MAAM,kBAAkB,GAAG,CAAC,QAAiB,MAA2B;AACtE,IAAA,IAAI,EAAE,CAAC;AACP,IAAA,OAAO,EAAE,MAAM;AACf,IAAA,UAAU,EAAE,QAAQ;AACpB,IAAA,cAAc,EAAE,QAAQ;AACxB,IAAA,GAAG,EAAE,KAAK;AACV,IAAA,OAAO,EAAE,WAAW;AACpB,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,YAAY,EAAE,KAAK;IACnB,eAAe,EAAE,QAAQ,GAAGA,QAAM,CAAC,KAAK,GAAG,aAAa;AACxD,IAAA,KAAK,EAAE,QAAQ,GAAGA,QAAM,CAAC,SAAS,GAAGA,QAAM,CAAC,IAAI;AAChD,IAAA,QAAQ,EAAE,MAAM;AAChB,IAAA,UAAU,EAAE,GAAG;AACf,IAAA,MAAM,EAAE,SAAS;AACjB,IAAA,UAAU,EAAE,mBAAmB;IAC/B,SAAS,EAAE,QAAQ,GAAG,+BAA+B,GAAG;AACzD,CAAA,CAAC;AAEF,MAAM,SAAS,GAAwB;AACrC,IAAA,SAAS,EAAE,MAAM;AACjB,IAAA,MAAM,EAAE,CAAC;AACT,IAAA,OAAO,EAAE,KAAK;AACd,IAAA,SAAS,EAAE,OAAO;AAClB,IAAA,SAAS,EAAE,MAAM;AACjB,IAAA,QAAQ,EAAE;CACX;AAED,MAAM,UAAU,GAAwB;AACtC,IAAA,OAAO,EAAE,WAAW;AACpB,IAAA,SAAS,EAAE,QAAQ;IACnB,KAAK,EAAEA,QAAM,CAAC,IAAI;AAClB,IAAA,QAAQ,EAAE;CACX;AAED;AACA;AAEA;AACA,MAAM,QAAQ,GAAG,OACfF,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,YAC5FA,GAAA,CAAA,MAAA,EAAA,EAAM,CAAC,EAAC,gBAAgB,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAA,CAAG,EAAA,CACnF,CACP;AAED;AACA,MAAM,SAAS,GAAG,OAChBD,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,aAC5FC,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,yCAAyC,EAC3C,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,GAAG,EACf,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,GACtB,EACFA,GAAA,CAAA,QAAA,EAAA,EAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAC,cAAc,EAAC,OAAO,EAAA,CAAG,CAAA,EAAA,CAC9G,CACP;AAED;AACA,MAAM,QAAQ,GAAG,OACfD,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,aAC5FC,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,yCAAyC,EAC3C,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,GAAG,EACf,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,EACFA,gBAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAC,cAAc,EAAC,OAAO,GAAG,EAClHA,GAAA,CAAA,MAAA,EAAA,EAAM,CAAC,EAAC,YAAY,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAA,CAAG,CAAA,EAAA,CAC/E,CACP;AAED;AACA,MAAM,UAAU,GAAG,OACjBA,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAC5FA,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,0KAA0K,EAC5K,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,KAAK,EACjB,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,EAAA,CACE,CACP;AAED;AACA,MAAM,eAAe,GAAG,OACtBD,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAAA,CAC5FC,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,4BAA4B,EAC9B,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,KAAK,EACjB,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,GACtB,EACFA,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,sBAAsB,EACxB,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,KAAK,EACjB,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,EACFA,cACE,CAAC,EAAC,kBAAkB,EACpB,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,KAAK,EACjB,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,CAAA,EAAA,CACE,CACP;AAED;AACA,MAAM,cAAc,GAAwB;AAC1C,IAAA,OAAO,EAAE,MAAM;AACf,IAAA,UAAU,EAAE,QAAQ;AACpB,IAAA,cAAc,EAAE,QAAQ;AACxB,IAAA,GAAG,EAAE,KAAK;AACV,IAAA,KAAK,EAAE,MAAM;AACb,IAAA,OAAO,EAAE,WAAW;AACpB,IAAA,MAAM,EAAE,OAAO;IACf,eAAe,EAAEE,QAAM,CAAC,MAAM;IAC9B,KAAK,EAAEA,QAAM,CAAC,KAAK;AACnB,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,YAAY,EAAE,MAAM;AACpB,IAAA,MAAM,EAAE,SAAS;AACjB,IAAA,QAAQ,EAAE,MAAM;AAChB,IAAA,UAAU,EAAE,GAAG;AACf,IAAA,SAAS,EAAE,mCAAmC;AAC9C,IAAA,UAAU,EAAE;CACb;AAED;AACA,MAAM,uBAAuB,GAAG,CAAC,QAAiB,MAA2B;AAC3E,IAAA,GAAG,cAAc;IACjB,OAAO,EAAE,QAAQ,GAAG,WAAW,GAAG,WAAW;IAC7C,SAAS,EAAE,QAAQ,GAAG,MAAM,GAAG,MAAM;IACrC,QAAQ,EAAE,QAAQ,GAAG,MAAM,GAAG,MAAM;IACpC,GAAG,EAAE,QAAQ,GAAG,KAAK,GAAG,KAAK;AAC7B,IAAA,WAAW,EAAE;AACd,CAAA,CAAC;AAEI,SAAU,UAAU,CAAC,EACzB,MAAM,EACN,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,UAAU,EACV,WAAW,EACX,YAAY,EACZ,OAAO,GAAG,KAAK,EACf,QAAQ,GAAG,KAAK,EACA,EAAA;;IAEhB,MAAM,iBAAiB,GAAwB;AAC7C,UAAE,EAAE,GAAG,UAAU,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,eAAe,EAAE,SAAS,EAAE,MAAM;UAChF,UAAU;;IAGd,MAAM,UAAU,GAAG,QAAQ,GAAG,kBAAkB,GAAG,WAAW;;IAG9D,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAKlC,IAAI,CAAC;IAEf,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,QAAQ,CAMhC,IAAI,CAAC;AAEf,IAAA,MAAM,OAAO,GAAG,MAAM,CAAmB,IAAI,CAAC;;IAG9C,MAAM,cAAc,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,OAAO,EAAE;IAE5C,MAAM,iBAAiB,GAAG,WAAW,CAAC,CAAC,CAAqB,EAAE,aAAqB,KAAI;QACrF,CAAC,CAAC,cAAc,EAAE;QAClB,CAAC,CAAC,eAAe,EAAE;;AAGnB,QAAA,MAAM,OAAO,GAAG,CAAC,CAAC,aAA4B;AAC9C,QAAA,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC;AAEtC,QAAA,YAAY,CAAC;AACX,YAAA,aAAa,EAAE,aAAa;YAC5B,MAAM,EAAE,CAAC,CAAC,OAAO;YACjB,QAAQ,EAAE,CAAC,CAAC,OAAO;YACnB,SAAS,EAAE,CAAC,CAAC,SAAS;YACtB;AACD,SAAA,CAAC;IACJ,CAAC,EAAE,EAAE,CAAC;AAEN,IAAA,MAAM,iBAAiB,GAAG,WAAW,CACnC,CAAC,CAAe,KAAI;AAClB,QAAA,IAAI,CAAC,SAAS;YAAE;;AAGhB,QAAA,IAAI,SAAS,CAAC,SAAS,KAAK,SAAS,IAAI,CAAC,CAAC,SAAS,KAAK,SAAS,CAAC,SAAS;YAAE;AAE9E,QAAA,YAAY,CAAC,IAAI,IACf;AACE,cAAE;AACE,gBAAA,GAAG,IAAI;gBACP,QAAQ,EAAE,CAAC,CAAC;AACb;cACD,IAAI,CACT;AACH,IAAA,CAAC,EACD,CAAC,SAAS,CAAC,CACZ;AAED,IAAA,MAAM,eAAe,GAAG,WAAW,CAAC,MAAK;AACvC,QAAA,IAAI,CAAC,SAAS;YAAE;;QAGhB,IAAI,SAAS,CAAC,OAAO,IAAI,SAAS,CAAC,SAAS,KAAK,SAAS,EAAE;AAC1D,YAAA,IAAI;gBACF,SAAS,CAAC,OAAO,CAAC,qBAAqB,CAAC,SAAS,CAAC,SAAS,CAAC;YAC9D;AAAE,YAAA,OAAA,EAAA,EAAM;;YAER;QACF;QAEA,MAAM,MAAM,GAAG,SAAS,CAAC,QAAQ,GAAG,SAAS,CAAC,MAAM;QACpD,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC;QAClD,MAAM,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE,SAAS,CAAC,aAAa,GAAG,UAAU,CAAC,CAAC;AAE/G,QAAA,IAAI,gBAAgB,KAAK,SAAS,CAAC,aAAa,EAAE;;YAEhD,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,SAAS,CAAC,aAAa;YAChE,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,gBAAgB;AACvD,YAAA,SAAS,CAAC,YAAY,EAAE,UAAU,CAAC;QACrC;QAEA,YAAY,CAAC,IAAI,CAAC;AACpB,IAAA,CAAC,EAAE,CAAC,SAAS,EAAE,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;IAE5E,SAAS,CAAC,MAAK;QACb,IAAI,SAAS,EAAE;AACb,YAAA,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,iBAAiB,CAAC;AACzD,YAAA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,eAAe,CAAC;AACrD,YAAA,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,eAAe,CAAC;AAEzD,YAAA,OAAO,MAAK;AACV,gBAAA,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,iBAAiB,CAAC;AAC5D,gBAAA,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,eAAe,CAAC;AACxD,gBAAA,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,eAAe,CAAC;AAC9D,YAAA,CAAC;QACH;IACF,CAAC,EAAE,CAAC,SAAS,EAAE,iBAAiB,EAAE,eAAe,CAAC,CAAC;AAEnD,IAAA,MAAM,YAAY,GAAG,CAAC,CAAmB,EAAE,EAAU,KAAI;QACvD,CAAC,CAAC,eAAe,EAAE;QACnB,QAAQ,CAAC,EAAE,CAAC;AACd,IAAA,CAAC;;IAGD,MAAM,gBAAgB,GAAG,WAAW,CAAC,CAAC,CAAqB,EAAE,EAAU,KAAI;AACzE,QAAA,IAAI,CAAC,QAAQ;YAAE;;AAEf,QAAA,MAAM,MAAM,GAAG,CAAC,CAAC,MAAqB;AACtC,QAAA,IAAI,MAAM,CAAC,OAAO,CAAC,oBAAoB,CAAC;YAAE;AAE1C,QAAA,aAAa,CAAC;YACZ,EAAE;YACF,MAAM,EAAE,CAAC,CAAC,OAAO;YACjB,QAAQ,EAAE,CAAC,CAAC,OAAO;YACnB,SAAS,EAAE,CAAC,CAAC;AACd,SAAA,CAAC;AACJ,IAAA,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAEd,IAAA,MAAM,eAAe,GAAG,WAAW,CAAC,CAAC,CAAe,KAAI;AACtD,QAAA,IAAI,CAAC,UAAU;YAAE;AACjB,QAAA,IAAI,CAAC,CAAC,SAAS,KAAK,UAAU,CAAC,SAAS;YAAE;QAE1C,aAAa,CAAC,IAAI,IAAI,IAAI,GAAG;AAC3B,YAAA,GAAG,IAAI;YACP,QAAQ,EAAE,CAAC,CAAC;AACb,SAAA,GAAG,IAAI,CAAC;AACX,IAAA,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAEhB,IAAA,MAAM,cAAc,GAAG,WAAW,CAAC,MAAK;AACtC,QAAA,IAAI,CAAC,UAAU;YAAE;QAEjB,MAAM,MAAM,GAAG,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM;;AAEtD,QAAA,IAAI,MAAM,GAAG,IAAI,EAAE;AACjB,YAAA,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC;QACzB;QAEA,aAAa,CAAC,IAAI,CAAC;AACrB,IAAA,CAAC,EAAE,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;;IAG1B,SAAS,CAAC,MAAK;QACb,IAAI,UAAU,EAAE;AACd,YAAA,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,eAAe,CAAC;AACvD,YAAA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,cAAc,CAAC;AACpD,YAAA,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,cAAc,CAAC;AAExD,YAAA,OAAO,MAAK;AACV,gBAAA,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,eAAe,CAAC;AAC1D,gBAAA,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,cAAc,CAAC;AACvD,gBAAA,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,cAAc,CAAC;AAC7D,YAAA,CAAC;QACH;IACF,CAAC,EAAE,CAAC,UAAU,EAAE,eAAe,EAAE,cAAc,CAAC,CAAC;;IAGjD,MAAM,YAAY,GAAG,CAAC,aAAqB,EAAE,UAAmB,EAAE,WAAA,GAAsB,CAAC,KAAyB;AAChH,QAAA,MAAM,UAAU,GAAG,CAAA,SAAS,KAAA,IAAA,IAAT,SAAS,KAAA,MAAA,GAAA,MAAA,GAAT,SAAS,CAAE,aAAa,MAAK,aAAa;AAE7D,QAAA,IAAI,SAAS,GAAG,WAAW,KAAK,CAAC,GAAG,CAAA,WAAA,EAAc,WAAW,CAAA,GAAA,CAAK,GAAG,eAAe;QACpF,IAAI,MAAM,GAAG,CAAC;QACd,IAAI,SAAS,GAAG;AACd,cAAE,CAAA,UAAA,EAAaA,QAAM,CAAC,MAAM,CAAA,oCAAA;cAC1B,+BAA+B;QACnC,IAAI,UAAU,GACZ,+GAA+G;;QAGjH,IAAI,eAAe,GAAG,UAAU,GAAGA,QAAM,CAAC,KAAK,GAAG,UAAU,GAAG,SAAS,GAAGA,QAAM,CAAC,KAAK;AACvF,QAAA,IAAI,WAAW,GAAG,GAAG,EAAE;;AAErB,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AAC9D,YAAA,eAAe,GAAG,CAAA,UAAA,EAAa,GAAG,GAAG,SAAS,GAAG,GAAG,CAAA,EAAA,EAAK,GAAG,GAAG,SAAS,GAAG,GAAG,MAAM;QACtF;QAEA,IAAI,SAAS,EAAE;YACb,IAAI,UAAU,EAAE;;gBAEd,MAAM,MAAM,GAAG,SAAS,CAAC,QAAQ,GAAG,SAAS,CAAC,MAAM;AACpD,gBAAA,SAAS,GAAG,CAAA,WAAA,EAAc,MAAM,CAAA,eAAA,CAAiB;gBACjD,MAAM,GAAG,GAAG;gBACZ,SAAS,GAAG,6DAA6D;gBACzE,UAAU,GAAG,gDAAgD;AAC7D,gBAAA,eAAe,GAAG,SAAS,CAAC;YAC9B;iBAAO;;AAEL,gBAAA,MAAM,YAAY,GAAG,SAAS,CAAC,aAAa;gBAC5C,MAAM,MAAM,GAAG,SAAS,CAAC,QAAQ,GAAG,SAAS,CAAC,MAAM;AACpD,gBAAA,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC,GAAG,YAAY;gBAClE,MAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE,WAAW,CAAC,CAAC;gBAEnF,IAAI,YAAY,GAAG,aAAa,IAAI,aAAa,IAAI,aAAa,EAAE;;AAElE,oBAAA,SAAS,GAAG,CAAA,YAAA,EAAe,UAAU,CAAA,GAAA,CAAK;gBAC5C;qBAAO,IAAI,YAAY,GAAG,aAAa,IAAI,aAAa,IAAI,aAAa,EAAE;;AAEzE,oBAAA,SAAS,GAAG,CAAA,WAAA,EAAc,UAAU,CAAA,GAAA,CAAK;gBAC3C;YACF;QACF;QAEA,OAAO;AACL,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,UAAU,EAAE,QAAQ;YACpB,GAAG,EAAE,QAAQ,GAAG,MAAM,GAAG,MAAM;YAC/B,OAAO,EAAE,QAAQ,GAAG,WAAW,GAAG,WAAW;AAC7C,YAAA,YAAY,EAAE,KAAK;AACnB,YAAA,YAAY,EAAE,MAAM;AACpB,YAAA,MAAM,EAAE,CAAA,UAAA,EAAa,UAAU,GAAGA,QAAM,CAAC,MAAM,GAAGA,QAAM,CAAC,UAAU,CAAA,CAAE;YACrE,eAAe;AACf,YAAA,MAAM,EAAE,SAAS;AACjB,YAAA,QAAQ,EAAE,UAAU;YACpB,MAAM;YACN,SAAS;YACT,UAAU;YACV,SAAS;YACT,MAAM,EAAE,CAAA,EAAG,UAAU,CAAA,EAAA,CAAI;AACzB,YAAA,SAAS,EAAE,YAAY;AACvB,YAAA,QAAQ,EAAE;SACX;AACH,IAAA,CAAC;;IAGD,MAAM,aAAa,GAAG,QAAQ,GAAG,EAAE,GAAG,EAAE;AACxC,IAAA,MAAM,cAAc,GAAwB;QAC1C,KAAK,EAAE,CAAA,EAAG,aAAa,CAAA,EAAA,CAAI;QAC3B,MAAM,EAAE,CAAA,EAAG,aAAa,CAAA,EAAA,CAAI;AAC5B,QAAA,SAAS,EAAE,SAAS;QACpB,eAAe,EAAEA,QAAM,CAAC,UAAU;AAClC,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,MAAM,EAAE,CAAA,UAAA,EAAaA,QAAM,CAAC,UAAU,CAAA,CAAE;AACxC,QAAA,OAAO,EAAE,KAAK;AACd,QAAA,UAAU,EAAE;KACb;AAED,IAAA,MAAM,UAAU,GAAwB;AACtC,QAAA,IAAI,EAAE,CAAC;QACP,QAAQ,EAAE,QAAQ,GAAG,MAAM,GAAG,MAAM;AACpC,QAAA,UAAU,EAAE,GAAG;QACf,KAAK,EAAEA,QAAM,CAAC,SAAS;AACvB,QAAA,QAAQ,EAAE,QAAQ;AAClB,QAAA,YAAY,EAAE,UAAU;AACxB,QAAA,UAAU,EAAE;KACb;;IAGD,MAAM,gBAAgB,GAAG,QAAQ,GAAG,EAAE,GAAG,EAAE;AAC3C,IAAA,MAAM,iBAAiB,GAAwB;QAC7C,KAAK,EAAE,CAAA,EAAG,gBAAgB,CAAA,EAAA,CAAI;QAC9B,MAAM,EAAE,CAAA,EAAG,gBAAgB,CAAA,EAAA,CAAI;AAC/B,QAAA,OAAO,EAAE,CAAC;AACV,QAAA,MAAM,EAAE,MAAM;AACd,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,eAAe,EAAE,aAAa;QAC9B,KAAK,EAAEA,QAAM,CAAC,IAAI;AAClB,QAAA,MAAM,EAAE,SAAS;QACjB,QAAQ,EAAE,QAAQ,GAAG,MAAM,GAAG,MAAM;AACpC,QAAA,OAAO,EAAE,MAAM;AACf,QAAA,UAAU,EAAE,QAAQ;AACpB,QAAA,cAAc,EAAE,QAAQ;AACxB,QAAA,UAAU,EAAE,mBAAmB;AAC/B,QAAA,UAAU,EAAE;KACb;AAED,IAAA,MAAM,sBAAsB,GAAwB;AAClD,QAAA,GAAG,iBAAiB;AACpB,QAAA,eAAe,EAAE,SAAS;QAC1B,KAAK,EAAEA,QAAM,CAAC,GAAG;AACjB,QAAA,SAAS,EAAE;KACZ;;AAGD,IAAA,MAAM,kBAAkB,GAAG,CAAC,UAAmB,MAA2B;AACxE,QAAA,OAAO,EAAE,MAAM;AACf,QAAA,aAAa,EAAE,QAAQ;QACvB,GAAG,EAAE,QAAQ,GAAG,KAAK,GAAG,KAAK;QAC7B,MAAM,EAAE,UAAU,GAAG,UAAU,GAAG,MAAM;QACxC,OAAO,EAAE,QAAQ,GAAG,UAAU,GAAG,SAAS;AAC1C,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,UAAU,EAAE,gCAAgC;AAC5C,QAAA,WAAW,EAAE,MAAM;QACnB,eAAe,EAAE,UAAU,GAAG,SAAS,GAAG,aAAa;QACvD,QAAQ,EAAE,QAAQ,GAAG,MAAM,GAAG,MAAM;AACpC,QAAA,UAAU,EAAE;AACb,KAAA,CAAC;AAEF,IAAA,MAAM,gBAAgB,GAAG,OAA4B;QACnD,KAAK,EAAE,QAAQ,GAAG,MAAM,GAAG,MAAM;QACjC,MAAM,EAAE,QAAQ,GAAG,KAAK,GAAG,KAAK;QAChC,eAAe,EAAEA,QAAM,CAAC,IAAI;AAC5B,QAAA,YAAY,EAAE;AACf,KAAA,CAAC;;IAGF,MAAM,CAAC,eAAe,EAAE,kBAAkB,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC;IAE3E,MAAM,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;IAC/D,MAAM,CAAC,eAAe,EAAE,kBAAkB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;AAE7D,IAAA,QACEH,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,iBAAiB,EAAA,QAAA,EAAA,CAE1B,CAAC,OAAO,KACPC,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,WAAW,YACrBD,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,wBAAwB,EAAA,QAAA,EAAA,CAClCA,IAAA,CAAA,QAAA,EAAA,EAAQ,KAAK,EAAE,kBAAkB,CAAC,WAAW,KAAK,OAAO,CAAC,EAAE,OAAO,EAAE,MAAM,YAAY,CAAC,OAAO,CAAC,aAC9FC,GAAA,CAAC,SAAS,EAAA,EAAA,CAAG,EAAA,sCAAA,CAAA,EAAA,CAEN,EACTD,IAAA,CAAA,QAAA,EAAA,EAAQ,KAAK,EAAE,kBAAkB,CAAC,WAAW,KAAK,MAAM,CAAC,EAAE,OAAO,EAAE,MAAM,YAAY,CAAC,MAAM,CAAC,EAAA,QAAA,EAAA,CAC5FC,GAAA,CAAC,QAAQ,EAAA,EAAA,CAAG,EAAA,gCAAA,CAAA,EAAA,CAEL,IACL,EAAA,CACF,CACP,EACDA,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,EAAE,OAAO,EAAE,eAAe,EAAE,EAAA,QAAA,EACtCD,IAAA,CAAA,QAAA,EAAA,EACE,KAAK,EAAE;wBACL,GAAG,uBAAuB,CAAC,QAAQ,CAAC;AACpC,wBAAA,MAAM,EAAE,CAAC;AACT,wBAAA,IAAI;AACF,8BAAE;AACE,gCAAA,MAAM,EAAE,iBAAiB;AACzB,gCAAA,SAAS,EAAE;AACZ;AACH,8BAAE;AACA,kCAAE;AACE,oCAAA,MAAM,EAAE;AACT;kCACD,EAAE;AACT,qBAAA,EACD,OAAO,EAAE,UAAU,EACnB,YAAY,EAAE,MAAM,mBAAmB,CAAC,IAAI,CAAC,EAC7C,YAAY,EAAE,MAAK;wBACjB,mBAAmB,CAAC,KAAK,CAAC;wBAC1B,kBAAkB,CAAC,KAAK,CAAC;oBAC3B,CAAC,EACD,WAAW,EAAE,MAAM,kBAAkB,CAAC,IAAI,CAAC,EAC3C,SAAS,EAAE,MAAM,kBAAkB,CAAC,KAAK,CAAC,EAAA,QAAA,EAAA,CAEzC,QAAQ;;wBAEPA,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAAA,CAC5FC,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,gFAAgF,EAClF,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,GAAG,EACf,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,EACFA,GAAA,CAAA,QAAA,EAAA,EAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,IAAI,EAAC,CAAC,EAAC,GAAG,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAA,CAAG,IAClE,KAENA,GAAA,CAAC,QAAQ,EAAA,EAAA,CAAG,CACb,EACA,QAAQ,GAAG,aAAa,GAAG,oBAAoB,CAAA,EAAA,CACzC,EAAA,CACL,EACL,MAAM,CAAC,MAAM,KAAK,CAAC,IAClBD,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE;AACV,oBAAA,GAAG,UAAU;oBACb,OAAO,EAAE,QAAQ,GAAG,WAAW,GAAG;AACnC,iBAAA,EAAA,QAAA,EAAA,CACCC,aAAK,KAAK,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,EAAA,QAAA,EAC/CA,IAAC,eAAe,EAAA,EAAA,CAAG,GACf,EACNA,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,EAAE,YAAY,EAAE,QAAQ,GAAG,KAAK,GAAG,GAAG,EAAE,EAAA,QAAA,EAAA,+DAAA,EAAA,CAE9C,EACL,QAAQ,KACPA,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAEE,QAAM,CAAC,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,qWAE/D,CACP,CAAA,EAAA,CACG,KAENF,YAAI,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAA,QAAA,EAC/B,cAAc,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,aAAa,KAAI;oBAC3C,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,aAAa;AACvD,oBAAA,MAAM,UAAU,GAAG,KAAK,CAAC,EAAE,KAAK,UAAU;AAC1C,oBAAA,MAAM,UAAU,GAAG,CAAA,SAAS,KAAA,IAAA,IAAT,SAAS,KAAA,MAAA,GAAA,MAAA,GAAT,SAAS,CAAE,aAAa,MAAK,aAAa;;AAG7D,oBAAA,MAAM,WAAW,GAAG,CAAA,UAAU,KAAA,IAAA,IAAV,UAAU,KAAA,MAAA,GAAA,MAAA,GAAV,UAAU,CAAE,EAAE,MAAK,KAAK,CAAC;AAC3C,0BAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC;0BACpD,CAAC;AAEL,oBAAA,QACED,IAAA,CAAA,IAAA,EAAA,EAEE,KAAK,EAAE,YAAY,CAAC,aAAa,EAAE,UAAU,EAAE,WAAW,CAAC,EAC3D,OAAO,EAAE,MAAM,CAAC,SAAS,IAAI,CAAC,UAAU,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAC9D,aAAa,EAAE,CAAC,IAAI,gBAAgB,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,EACjD,aAAa,EAAE,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAA,QAAA,EAAA,CAGrC,QAAQ,IAAI,WAAW,GAAG,GAAG,KAC5BC,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,oCAAA,QAAQ,EAAE,UAAU;AACpB,oCAAA,KAAK,EAAE,CAAC;AACR,oCAAA,GAAG,EAAE,CAAC;AACN,oCAAA,MAAM,EAAE,CAAC;AACT,oCAAA,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;AAC5B,oCAAA,eAAe,EAAE,WAAW,GAAG,IAAI,GAAGE,QAAM,CAAC,GAAG,GAAG,SAAS;AAC5D,oCAAA,OAAO,EAAE,MAAM;AACf,oCAAA,UAAU,EAAE,QAAQ;AACpB,oCAAA,cAAc,EAAE,QAAQ;AACxB,oCAAA,KAAK,EAAE,WAAW,GAAG,IAAI,GAAGA,QAAM,CAAC,KAAK,GAAGA,QAAM,CAAC,GAAG;AACrD,oCAAA,UAAU,EAAE,gCAAgC;AAC5C,oCAAA,YAAY,EAAE;AACf,iCAAA,EAAA,QAAA,EAEDF,IAAC,UAAU,EAAA,EAAA,CAAG,GACV,CACP,EACDD,wCAEE,KAAK,EAAE,kBAAkB,CAAC,UAAU,CAAC,EACrC,aAAa,EAAE,CAAC,IAAG;oCACjB,CAAC,CAAC,eAAe,EAAE;AACnB,oCAAA,iBAAiB,CAAC,CAAC,EAAE,aAAa,CAAC;AACrC,gCAAA,CAAC,EACD,aAAa,EAAE,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAA,QAAA,EAAA,CAEtCC,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,gBAAgB,EAAE,EAAA,CAAI,EAClCA,aAAK,KAAK,EAAE,gBAAgB,EAAE,GAAI,EAClCA,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,gBAAgB,EAAE,EAAA,CAAI,CAAA,EAAA,CAC9B,EACNA,aACE,GAAG,EAAE,KAAK,CAAC,GAAG,EACd,GAAG,EAAE,CAAA,MAAA,EAAS,aAAa,GAAG,CAAC,CAAA,CAAE,EACjC,KAAK,EAAE,cAAc,EACrB,SAAS,EAAE,KAAK,EAChB,OAAO,EAAC,MAAM,EACd,QAAQ,EAAC,OAAO,GAChB,EACFD,IAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAE,UAAU,EAAA,QAAA,EAAA,CAAA,2BAAA,EAAQ,aAAa,GAAG,CAAC,IAAQ,EACxDC,GAAA,CAAA,QAAA,EAAA,EACE,KAAK,EAAE,eAAe,KAAK,KAAK,CAAC,EAAE,GAAG,sBAAsB,GAAG,iBAAiB,EAChF,OAAO,EAAE,CAAC,IAAI,YAAY,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,EACvC,YAAY,EAAE,MAAM,kBAAkB,CAAC,KAAK,CAAC,EAAE,CAAC,EAChD,YAAY,EAAE,MAAM,kBAAkB,CAAC,IAAI,CAAC,EAC5C,aAAa,EAAE,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,EACvC,KAAK,EAAC,+DAAa,YAEnBA,GAAA,CAAC,UAAU,EAAA,EAAA,CAAG,EAAA,CACP,KA1DJ,KAAK,CAAC,EAAE,CA2DV;AAET,gBAAA,CAAC,CAAC,EAAA,CACC,CACN,CAAA,EAAA,CACG;AAEV;;AClqBA;AACA,SAAS,SAAS,CAAC,GAAW,EAAA;IAC5B,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAI;AACrC,QAAA,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE;QACvB,GAAG,CAAC,MAAM,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AAC/B,QAAA,GAAG,CAAC,OAAO,GAAG,MAAM;AACpB,QAAA,GAAG,CAAC,GAAG,GAAG,GAAG;AACf,IAAA,CAAC,CAAC;AACJ;AAEO,eAAe,eAAe,CACnC,MAAyB,EACzB,eAAwC,EACxC,MAAmB,EACnB,MAAoB,EACpB,MAAA,GAAqC,WAAW,EAChD,OAAO,GAAG,IAAI,EAAA;AAEd,IAAA,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW,IAAI,CAAC;IACrC,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;IACnC,IAAI,CAAC,GAAG,EAAE;AACR,QAAA,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC;IACjD;;AAGA,IAAA,MAAM,YAAY,GAAG,MAAM,OAAO,CAAC,GAAG,CACpC,MAAM,CAAC,GAAG,CAAC,OAAO,SAAS,MAAM;QAC/B,SAAS,EAAE,SAAS,CAAC,SAAS;AAC9B,QAAA,GAAG,EAAE,MAAM,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC;KACpC,CAAC,CAAC,CACJ;;AAGD,IAAA,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC;;IAGhD,GAAG,CAAC,IAAI,EAAE;AACV,IAAA,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC;;IAGvB,IAAI,eAAe,EAAE;QACnB,MAAM,QAAQ,GAAG,eAAe,CAAC,YAAY,GAAG,eAAe,CAAC,aAAa;QAC7E,MAAM,cAAc,GAAG,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM;AAEnD,QAAA,IAAI,SAAiB,EAAE,UAAkB,EAAE,KAAa,EAAE,KAAa;AAEvE,QAAA,IAAI,QAAQ,GAAG,cAAc,EAAE;;AAE7B,YAAA,UAAU,GAAG,MAAM,CAAC,MAAM;AAC1B,YAAA,SAAS,GAAG,eAAe,CAAC,YAAY,IAAI,MAAM,CAAC,MAAM,GAAG,eAAe,CAAC,aAAa,CAAC;YAC1F,KAAK,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,SAAS,IAAI,CAAC;YACtC,KAAK,GAAG,CAAC;QACX;aAAO;;AAEL,YAAA,SAAS,GAAG,MAAM,CAAC,KAAK;AACxB,YAAA,UAAU,GAAG,eAAe,CAAC,aAAa,IAAI,MAAM,CAAC,KAAK,GAAG,eAAe,CAAC,YAAY,CAAC;YAC1F,KAAK,GAAG,CAAC;YACT,KAAK,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,UAAU,IAAI,CAAC;QAC1C;AAEA,QAAA,GAAG,CAAC,SAAS,CAAC,eAAe,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,CAAC;IACrE;;AAGA,IAAA,IAAI,MAAM,CAAC,aAAa,EAAE;QACxB,GAAG,CAAC,IAAI,EAAE;QACV,GAAG,CAAC,SAAS,EAAE;AACf,QAAA,GAAG,CAAC,IAAI,CACN,MAAM,CAAC,aAAa,CAAC,IAAI,EACzB,MAAM,CAAC,aAAa,CAAC,IAAI,EACzB,MAAM,CAAC,aAAa,CAAC,IAAI,GAAG,MAAM,CAAC,aAAa,CAAC,IAAI,EACrD,MAAM,CAAC,aAAa,CAAC,IAAI,GAAG,MAAM,CAAC,aAAa,CAAC,IAAI,CACtD;QACD,GAAG,CAAC,IAAI,EAAE;IACZ;;IAGA,KAAK,MAAM,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,YAAY,EAAE;QAC7C,GAAG,CAAC,IAAI,EAAE;AAEV,QAAA,IAAI,SAAS,CAAC,QAAQ,KAAK,CAAC,EAAE;AAC5B,YAAA,MAAM,OAAO,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC;AAC/D,YAAA,MAAM,OAAO,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;AAChE,YAAA,GAAG,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC;AAC/B,YAAA,GAAG,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,CAAC;YAChD,GAAG,CAAC,SAAS,CAAC,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC;QACnC;AAEA,QAAA,GAAG,CAAC,SAAS,CACX,GAAG,EACH,SAAS,CAAC,QAAQ,CAAC,CAAC,EACpB,SAAS,CAAC,QAAQ,CAAC,CAAC,EACpB,SAAS,CAAC,IAAI,CAAC,KAAK,EACpB,SAAS,CAAC,IAAI,CAAC,MAAM,CACtB;QAED,GAAG,CAAC,OAAO,EAAE;IACf;;AAGA,IAAA,IAAI,MAAM,CAAC,aAAa,EAAE;QACxB,GAAG,CAAC,OAAO,EAAE;IACf;;IAGA,GAAG,CAAC,OAAO,EAAE;IAEb,OAAO,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,CAAC;AAC1C;AAEM,SAAU,qBAAqB,CAAC,KAAa,EAAE,MAAc,EAAA;IACjE,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;AAC/C,IAAA,MAAM,CAAC,KAAK,GAAG,KAAK;AACpB,IAAA,MAAM,CAAC,MAAM,GAAG,MAAM;AACtB,IAAA,OAAO,MAAM;AACf;;AC5GA;AACA,MAAM,MAAM,GAAG;AACb,IAAA,MAAM,EAAE,SAAS;AACjB,IAAA,KAAK,EAAE,SAAS;AAChB,IAAA,KAAK,EAAE,SAAS;AAChB,IAAA,IAAI,EAAE,SAAS;AACf,IAAA,UAAU,EAAE,SAAS;AACrB,IAAA,SAAS,EAAE,SAAS;AACpB,IAAA,GAAG,EAAE;CACN;AAED,MAAM,cAAc,GAAiB;AACnC,IAAA,KAAK,EAAE,GAAG;AACV,IAAA,MAAM,EAAE,GAAG;AACX,IAAA,YAAY,EAAE,EAAE;AAChB,IAAA,aAAa,EAAE,KAAK;IACpB,iBAAiB,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE,YAAY,EAAE,WAAW,CAAC;AACzE,IAAA,WAAW,EAAE,EAAE,GAAG,IAAI,GAAG;CAC1B;AAED,MAAM,yBAAyB,GAA+B;AAC5D,IAAA,OAAO,EAAE,KAAK;AACd,IAAA,gBAAgB,EAAE,GAAG;AACrB,IAAA,gBAAgB,EAAE,IAAI;AACtB,IAAA,WAAW,EAAE,SAAkC;AAC/C,IAAA,gBAAgB,EAAE,GAAG;AACrB,IAAA,iBAAiB,EAAE,GAAG;AACtB,IAAA,wBAAwB,EAAE;CAC3B;AAED;AACA,SAAS,yBAAyB,CAChC,aAAqB,EACrB,cAAsB,EACtB,cAAsB,EACtB,SAAiB,EAAA;AAEjB,IAAA,MAAM,WAAW,GAAG,aAAa,GAAG,cAAc;;IAGlD,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,cAAc,CAAC;AACnD,IAAA,IAAI,MAAM,GAAG,KAAK,GAAG,WAAW;;AAGhC,IAAA,IAAI,MAAM,GAAG,SAAS,EAAE;QACtB,MAAM,GAAG,SAAS;AAClB,QAAA,KAAK,GAAG,MAAM,GAAG,WAAW;IAC9B;AAEA,IAAA,MAAM,KAAK,GAAG,KAAK,GAAG,aAAa;IAEnC,OAAO;AACL,QAAA,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;AACxB,QAAA,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAC1B;KACD;AACH;AAEA;AACA,SAAS,kBAAkB,CACzB,aAAsC,EACtC,KAAa,EAAA;AAEb,IAAA,IAAI,CAAC,aAAa;AAAE,QAAA,OAAO,SAAS;IACpC,OAAO;QACL,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,GAAG,KAAK,CAAC;QAC5C,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,GAAG,KAAK,CAAC;QAC5C,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,GAAG,KAAK,CAAC;QAC5C,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,GAAG,KAAK;KAC5C;AACH;AAEM,SAAU,aAAa,CAAC,EAC5B,YAAY,EACZ,WAAW,EACX,MAAM,EAAE,UAAU,EAClB,UAAU,EAAE,cAAc,EAC1B,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,KAAK,EACL,aAAa,EACM,EAAA;;IACnB,MAAM,MAAM,GAAiB,EAAE,GAAG,cAAc,EAAE,GAAG,UAAU,EAAE;IACjE,MAAM,gBAAgB,GAAqB,EAAE,GAAG,yBAAyB,EAAE,GAAG,cAAc,EAAE;;IAG9F,MAAM,eAAe,GAAG,aAAa,CAAC;QACpC,gBAAgB,EAAE,gBAAgB,CAAC,gBAAgB;QACnD,gBAAgB,EAAE,gBAAgB,CAAC,gBAAgB;QACnD,OAAO,EAAE,gBAAgB,CAAC;AAC3B,KAAA,CAAC;;AAGF,IAAA,MAAM,UAAU,GAAG,MAAM,CAAiB,IAAI,CAAC;IAC/C,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,QAAQ,CAAS,CAAC,CAAC;;AAG/D,IAAA,MAAM,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,GAAG,QAAQ,CACtD,CAAA,EAAA,GAAA,gBAAgB,CAAC,wBAAwB,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,IAAI,CAClD;;IAGD,SAAS,CAAC,MAAK;QACb,IAAI,CAAC,gBAAgB,CAAC,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO;YAAE;QAEtD,MAAM,gBAAgB,GAAG,MAAK;AAC5B,YAAA,IAAI,UAAU,CAAC,OAAO,EAAE;AACtB,gBAAA,iBAAiB,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,CAAC;YACnD;AACF,QAAA,CAAC;;AAGD,QAAA,gBAAgB,EAAE;;AAGlB,QAAA,MAAM,cAAc,GAAG,IAAI,cAAc,CAAC,gBAAgB,CAAC;AAC3D,QAAA,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC;AAE1C,QAAA,OAAO,MAAM,cAAc,CAAC,UAAU,EAAE;AAC1C,IAAA,CAAC,EAAE,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;;AAG9B,IAAA,MAAM,UAAU,GAAe,OAAO,CAAC,MAAK;AAC1C,QAAA,IAAI,gBAAgB,CAAC,WAAW,EAAE;YAChC,OAAO,gBAAgB,CAAC,WAAW;QACrC;AACA,QAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE;AAC7B,YAAA,OAAO,YAAY;QACrB;;QAEA,OAAO,eAAe,CAAC,QAAQ,GAAG,UAAU,GAAG,YAAY;AAC7D,IAAA,CAAC,EAAE,CAAC,gBAAgB,CAAC,WAAW,EAAE,gBAAgB,CAAC,OAAO,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC;;AAGtF,IAAA,MAAM,UAAU,GAAG,OAAO,CAAC,MAAK;;AAC9B,QAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE;AAC7B,YAAA,OAAO,MAAA,gBAAgB,CAAC,iBAAiB,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,GAAG;QAClD;AACA,QAAA,IAAI,eAAe,CAAC,QAAQ,EAAE;YAC5B,OAAO,MAAM,CAAC;QAChB;AACA,QAAA,IAAI,eAAe,CAAC,QAAQ,EAAE;AAC5B,YAAA,OAAO,MAAA,gBAAgB,CAAC,gBAAgB,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,GAAG;QACjD;AACA,QAAA,OAAO,MAAA,gBAAgB,CAAC,iBAAiB,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,GAAG;IAClD,CAAC,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,gBAAgB,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,iBAAiB,EAAE,eAAe,CAAC,QAAQ,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC;;AAGzJ,IAAA,MAAM,gBAAgB,GAAG,OAAO,CAAC,MAAK;QACpC,IAAI,CAAC,gBAAgB,CAAC,OAAO,IAAI,CAAC,cAAc,EAAE;AAChD,YAAA,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE;QACjE;;QAGA,IAAI,cAAc,GAAG,cAAc;AACnC,QAAA,IAAI,UAAU,KAAK,YAAY,EAAE;YAC/B,MAAM,GAAG,GAAG,EAAE;AACd,YAAA,MAAM,iBAAiB,GAAG,OAAO,UAAU,KAAK,QAAQ,GAAG,UAAU,GAAG,GAAG;AAC3E,YAAA,cAAc,GAAG,cAAc,GAAG,iBAAiB,GAAG,GAAG;QAC3D;aAAO;;AAEL,YAAA,cAAc,GAAG,cAAc,GAAG,EAAE,CAAC;QACvC;;AAGA,QAAA,MAAM,SAAS,GAAG,UAAU,KAAK;AAC/B,cAAE,eAAe,CAAC,cAAc,GAAG,GAAG;cACpC,eAAe,CAAC,cAAc,GAAG,GAAG,CAAC;AAEzC,QAAA,OAAO,yBAAyB,CAC9B,MAAM,CAAC,KAAK,EACZ,MAAM,CAAC,MAAM,EACb,cAAc,EACd,SAAS,CACV;IACH,CAAC,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAc,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,eAAe,CAAC,cAAc,CAAC,CAAC;;AAGnI,IAAA,MAAM,mBAAmB,GAAG,OAAO,CAAC,MAAK;QACvC,OAAO,kBAAkB,CAAC,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,KAAK,CAAC;IACzE,CAAC,EAAE,CAAC,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,KAAK,CAAC,CAAC;;AAGlD,IAAA,MAAM,aAAa,GAAiB,OAAO,CAAC,OAAO;AACjD,QAAA,GAAG,MAAM;QACT,KAAK,EAAE,gBAAgB,CAAC,KAAK;QAC7B,MAAM,EAAE,gBAAgB,CAAC,MAAM;AAC/B,QAAA,aAAa,EAAE;AAChB,KAAA,CAAC,EAAE,CAAC,MAAM,EAAE,gBAAgB,CAAC,KAAK,EAAE,gBAAgB,CAAC,MAAM,EAAE,mBAAmB,CAAC,CAAC;IAEnF,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAG,QAAQ,CAAa,OAAO,CAAC;IACnE,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAa,aAAa,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC;IAClG,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAA0B,IAAI,CAAC;IACrE,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC;AAEvD,IAAA,MAAM,YAAY,GAAG,MAAM,CAAiB,IAAI,CAAC;;AAGjD,IAAA,MAAM,MAAM,GAAG,UAAU,CAAC,WAAW,CAAC;;AAGtC,IAAA,MAAM,oBAAoB,GAAG,WAAW,KAAK,OAAO,GAAG,YAAY,GAAG,WAAW;;IAGjF,SAAS,CAAC,MAAK;QACb,IAAI,oBAAoB,EAAE;AACxB,YAAA,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE;YACvB,GAAG,CAAC,MAAM,GAAG,MAAM,UAAU,CAAC,GAAG,CAAC;YAClC,GAAG,CAAC,OAAO,GAAG,MAAM,QAAQ,CAAC,uCAAuC,CAAC;AACrE,YAAA,GAAG,CAAC,GAAG,GAAG,oBAAoB;QAChC;aAAO;YACL,UAAU,CAAC,IAAI,CAAC;QAClB;AACF,IAAA,CAAC,EAAE,CAAC,oBAAoB,CAAC,CAAC;AAE1B,IAAA,MAAM,kBAAkB,GAAG,WAAW,CACpC,CAAC,SAAsB,KAAI;QACzB,aAAa,CAAC,IAAI,IAAG;AACnB,YAAA,MAAM,OAAO,GAAG,EAAE,GAAG,IAAI,EAAE,CAAC,WAAW,GAAG,SAAS,EAAE;YACrD,QAAQ,KAAA,IAAA,IAAR,QAAQ,KAAA,MAAA,GAAA,MAAA,GAAR,QAAQ,CAAG,OAAO,EAAE,WAAW,CAAC;AAChC,YAAA,OAAO,OAAO;AAChB,QAAA,CAAC,CAAC;AACJ,IAAA,CAAC,EACD,CAAC,QAAQ,EAAE,WAAW,CAAC,CACxB;AAED,IAAA,MAAM,eAAe,GAAG,WAAW,CACjC,CAAC,YAAuB,KAAI;QAC1B,aAAa,CAAC,IAAI,IAAG;YACnB,MAAM,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,YAAY,CAAC;AACtD,YAAA,MAAM,OAAO,GAAG,EAAE,GAAG,IAAI,EAAE,CAAC,WAAW,GAAG,SAAS,EAAE;YACrD,QAAQ,KAAA,IAAA,IAAR,QAAQ,KAAA,MAAA,GAAA,MAAA,GAAR,QAAQ,CAAG,OAAO,EAAE,WAAW,CAAC;AAChC,YAAA,OAAO,OAAO;AAChB,QAAA,CAAC,CAAC;QACF,QAAQ,CAAC,IAAI,CAAC;AAChB,IAAA,CAAC,EACD,CAAC,WAAW,EAAE,QAAQ,CAAC,CACxB;IAED,MAAM,YAAY,GAAG,gBAAgB,CAAC,OAAO,IAAI,eAAe,CAAC,QAAQ;AAEzE,IAAA,MAAM,EACJ,QAAQ,EACR,gBAAgB,EAChB,UAAU,EACV,cAAc,EACd,cAAc,EACd,WAAW,EACX,eAAe,EACf,WAAW,EACZ,GAAG,cAAc,CAAC;QACjB,MAAM;AACN,QAAA,WAAW,EAAE,eAAe;AAC5B,QAAA,OAAO,EAAE,QAAQ;AACjB,QAAA,QAAQ,EAAE;AACX,KAAA,CAAC;;IAGF,SAAS,CAAC,MAAK;QACb,MAAM,iBAAiB,GAAG,CAAC,CAAiB,KAAK,WAAW,CAAC,CAAC,CAAC;AAC/D,QAAA,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,iBAAiB,CAAC;QACnD,OAAO,MAAM,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,iBAAiB,CAAC;AACrE,IAAA,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;IAEjB,MAAM,EACJ,UAAU,EACV,UAAU,EACV,UAAU,EACV,QAAQ,EACR,iBAAiB,EACjB,gBAAgB,EAChB,WAAW,EACX,WAAW,EACX,WAAW,EACX,cAAc,EACd,YAAY,EACb,GAAG,iBAAiB,CAAC;QACpB,MAAM;QACN,MAAM;QACN,YAAY;AACZ,QAAA,QAAQ,EAAE,kBAAkB;QAC5B,YAAY,EAAE,gBAAgB,CAAC;AAChC,KAAA,CAAC;;IAGF,MAAM,aAAa,GAAG,CAAA,mUAAA,CAAqU;;IAG3V,SAAS,CAAC,MAAK;AACb,QAAA,IAAI,UAAU,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACvC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,aAAa;AAC1C,YAAA,OAAO,MAAK;gBACV,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE;AACjC,YAAA,CAAC;QACH;AACF,IAAA,CAAC,EAAE,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;AAE1B,IAAA,MAAM,YAAY,GAAG,WAAW,CAAC,YAAW;AAC1C,QAAA,IAAI,CAAC,QAAQ;YAAE;AAEf,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW,IAAI,CAAC;AACrC,QAAA,MAAM,MAAM,GAAG,qBAAqB,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,EAAE,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;;AAGjF,QAAA,MAAM,SAAS,GAAG,CAAC,GAAuB,KAAsC;AAC9E,YAAA,IAAI,CAAC,GAAG;AAAE,gBAAA,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;AACtC,YAAA,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,KAAI;AAC7B,gBAAA,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE;gBACvB,GAAG,CAAC,MAAM,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;gBAC/B,GAAG,CAAC,OAAO,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC;AACjC,gBAAA,GAAG,CAAC,GAAG,GAAG,GAAG;AACf,YAAA,CAAC,CAAC;AACJ,QAAA,CAAC;;QAGD,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;YAC1C,SAAS,CAAC,YAAY,CAAC;YACvB,SAAS,CAAC,WAAW;AACtB,SAAA,CAAC;;AAGF,QAAA,MAAM,YAAY,GAAG,MAAM,eAAe,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,CAAC,KAAK,EAAE,MAAM,CAAC;;AAGrF,QAAA,MAAM,WAAW,GAAG,MAAM,eAAe,CAAC,MAAM,EAAE,MAAM,EAAE,UAAU,CAAC,IAAI,EAAE,MAAM,CAAC;QAElF,QAAQ,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC;AACtD,IAAA,CAAC,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;AAE7D,IAAA,MAAM,oBAAoB,GAAG,WAAW,CACtC,CAAC,CAAmB,KAAI;;QAEtB,IAAI,CAAC,CAAC,MAAM,KAAK,YAAY,CAAC,OAAO,EAAE;AACrC,YAAA,WAAW,EAAE;QACf;AACF,IAAA,CAAC,EACD,CAAC,WAAW,CAAC,CACd;;AAGD,IAAA,MAAM,cAAc,GAAG,WAAW,CAAC,CAAC,SAAiC,KAAI;AACvE,QAAA,MAAM,KAAK,GAAG,gBAAgB,CAAC,KAAK;QACpC,OAAO;AACL,YAAA,QAAQ,EAAE;AACR,gBAAA,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK;AAC/B,gBAAA,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG;AAC3B,aAAA;AACD,YAAA,IAAI,EAAE;AACJ,gBAAA,KAAK,EAAE,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK;AACnC,gBAAA,MAAM,EAAE,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG;AACjC,aAAA;YACD,QAAQ,EAAE,SAAS,CAAC;SACrB;AACH,IAAA,CAAC,EAAE,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;AAE5B,IAAA,MAAM,cAAc,GAAwB;AAC1C,QAAA,QAAQ,EAAE,UAAU;QACpB,KAAK,EAAE,aAAa,CAAC,KAAK;QAC1B,MAAM,EAAE,aAAa,CAAC,MAAM;QAC5B,eAAe,EAAE,MAAM,CAAC,UAAU;QAClC,eAAe,EAAE,OAAO,GAAG,CAAA,IAAA,EAAO,oBAAoB,CAAA,CAAA,CAAG,GAAG,SAAS;AACrE,QAAA,cAAc,EAAE,OAAO;AACvB,QAAA,kBAAkB,EAAE,QAAQ;AAC5B,QAAA,QAAQ,EAAE,QAAQ;AAClB,QAAA,MAAM,EAAE,CAAC,UAAU,IAAI,QAAQ,KAAK,QAAQ,KAAK,UAAU,GAAG,UAAU,GAAG,SAAS;AACpF,QAAA,UAAU,EAAE,MAAM;AAClB,QAAA,YAAY,EAAE,MAAM;AACpB,QAAA,SAAS,EAAE,+BAA+B;AAC1C,QAAA,UAAU,EAAE,uDAAuD;;AAEnE,QAAA,WAAW,EAAE;KACd;;AAGD,IAAA,MAAM,YAAY,GAAwB;AACxC,QAAA,KAAK,EAAE,MAAM;AACb,QAAA,UAAU,EAAE;KACb;;AAGD,IAAA,MAAM,oBAAoB,GAAwB;AAChD,QAAA,OAAO,EAAE,MAAM;QACf,aAAa,EAAE,UAAU,KAAK,UAAU,GAAG,QAAQ,GAAG,KAAK;QAC3D,GAAG,EAAE,UAAU,KAAK,UAAU,GAAG,MAAM,GAAG,MAAM;QAChD,UAAU,EAAE,UAAU,KAAK,UAAU,GAAG,QAAQ,GAAG;KACpD;;AAGD,IAAA,MAAM,mBAAmB,GAAwB,UAAU,KAAK,UAAU,GAAG;QAC3E,KAAK,EAAE,gBAAgB,CAAC,KAAK;QAC7B,KAAK,EAAE,CAAC;AACR,QAAA,SAAS,EAAE,+BAA+B;AAC1C,QAAA,YAAY,EAAE;AACf,KAAA,GAAG;AACF,QAAA,KAAK,EAAE,OAAO,UAAU,KAAK,QAAQ,GAAG,CAAA,EAAG,UAAU,CAAA,EAAA,CAAI,GAAG,UAAU;AACtE,QAAA,UAAU,EAAE;KACb;;AAGD,IAAA,MAAM,iBAAiB,GAAwB;AAC7C,QAAA,OAAO,EAAE,MAAM;AACf,QAAA,aAAa,EAAE,QAAQ;QACvB,UAAU,EAAE,UAAU,KAAK,UAAU,GAAG,QAAQ,GAAG,YAAY;QAC/D,KAAK,EAAE,UAAU,KAAK,UAAU,GAAG,CAAC,GAAG;KACxC;AAED,IAAA,MAAM,aAAa,GAAwB;AACzC,QAAA,QAAQ,EAAE,UAAU;AACpB,QAAA,KAAK,EAAE,CAAC;AACR,QAAA,OAAO,EAAE,MAAM;AACf,QAAA,UAAU,EAAE,QAAQ;AACpB,QAAA,cAAc,EAAE,QAAQ;AACxB,QAAA,aAAa,EAAE,QAAQ;AACvB,QAAA,GAAG,EAAE,MAAM;QACX,KAAK,EAAE,MAAM,CAAC,IAAI;AAClB,QAAA,QAAQ,EAAE,MAAM;AAChB,QAAA,aAAa,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,MAAM,GAAG;KAC7C;IAED,MAAM,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;IACrE,MAAM,CAAC,kBAAkB,EAAE,qBAAqB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;AAEnE,IAAA,MAAM,iBAAiB,GAAwB;AAC7C,QAAA,OAAO,EAAE,MAAM;AACf,QAAA,UAAU,EAAE,QAAQ;AACpB,QAAA,cAAc,EAAE,QAAQ;AACxB,QAAA,GAAG,EAAE,KAAK;AACV,QAAA,KAAK,EAAE,MAAM;AACb,QAAA,OAAO,EAAE,WAAW;AACpB,QAAA,SAAS,EAAE,MAAM;QACjB,eAAe,EAAE,MAAM,CAAC,MAAM;QAC9B,KAAK,EAAE,MAAM,CAAC,KAAK;AACnB,QAAA,MAAM,EAAE,MAAM;AACd,QAAA,YAAY,EAAE,MAAM;AACpB,QAAA,MAAM,EAAE,SAAS;AACjB,QAAA,QAAQ,EAAE,MAAM;AAChB,QAAA,UAAU,EAAE,GAAG;AACf,QAAA,SAAS,EAAE,mCAAmC;AAC9C,QAAA,UAAU,EAAE,+CAA+C;AAC3D,QAAA,IAAI;AACF,cAAE;AACE,gBAAA,MAAM,EAAE,iBAAiB;AACzB,gBAAA,SAAS,EAAE;AACZ;AACH,cAAE;AACA,kBAAE;AACE,oBAAA,MAAM,EAAE;AACT;kBACD,EAAE;KACT;;AAGD,IAAA,MAAM,mBAAmB,GAAG,WAAW,CAAC,MAAK;QAC3C,mBAAmB,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC;IACpC,CAAC,EAAE,EAAE,CAAC;;AAGN,IAAA,MAAM,4BAA4B,GAAG,WAAW,CAAC,MAAK;AACpD,QAAA,IAAI,UAAU,KAAK,UAAU,IAAI,CAAC,gBAAgB,EAAE;YAClD,mBAAmB,CAAC,IAAI,CAAC;QAC3B;AACF,IAAA,CAAC,EAAE,CAAC,UAAU,EAAE,gBAAgB,CAAC,CAAC;IAElC,QACED,cAAK,GAAG,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,GAAG,YAAY,EAAE,GAAG,KAAK,EAAE,aAE9EC,GAAA,CAAA,OAAA,EAAA,EAAA,QAAA,EACG;;;;;AAKA,QAAA,CAAA,EAAA,CACK,EAEP,KAAK,KACJD,IAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,oBAAA,OAAO,EAAE,MAAM;AACf,oBAAA,UAAU,EAAE,QAAQ;AACpB,oBAAA,GAAG,EAAE,KAAK;AACV,oBAAA,OAAO,EAAE,WAAW;AACpB,oBAAA,YAAY,EAAE,MAAM;AACpB,oBAAA,eAAe,EAAE,SAAS;oBAC1B,KAAK,EAAE,MAAM,CAAC,GAAG;AACjB,oBAAA,YAAY,EAAE,MAAM;AACpB,oBAAA,QAAQ,EAAE,MAAM;AAChB,oBAAA,UAAU,EAAE,GAAG;AACf,oBAAA,SAAS,EAAE;AACZ,iBAAA,EAAA,QAAA,EAAA,CAEDC,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAC5FA,cACE,CAAC,EAAC,qFAAqF,EACvF,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,KAAK,EACjB,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,EAAA,CACE,EACL,KAAK,CAAA,EAAA,CACF,CACP,EAEDD,cAAK,KAAK,EAAE,oBAAoB,EAAA,QAAA,EAAA,CAE9BC,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,mBAAmB,YAE5B,UAAU,KAAK,UAAU,IACxBD,IAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;gCACL,eAAe,EAAE,MAAM,CAAC,KAAK;AAC7B,gCAAA,YAAY,EAAE,MAAM;AACpB,gCAAA,QAAQ,EAAE;6BACX,EAAA,QAAA,EAAA,CAGDC,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,wCAAA,OAAO,EAAE,MAAM;AACf,wCAAA,OAAO,EAAE,KAAK;AACd,wCAAA,YAAY,EAAE,CAAA,UAAA,EAAa,MAAM,CAAC,UAAU,CAAA;qCAC7C,EAAA,QAAA,EAEDD,IAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,4CAAA,OAAO,EAAE,MAAM;AACf,4CAAA,KAAK,EAAE,MAAM;4CACb,eAAe,EAAE,MAAM,CAAC,UAAU;AAClC,4CAAA,YAAY,EAAE,KAAK;AACnB,4CAAA,OAAO,EAAE;AACV,yCAAA,EAAA,QAAA,EAAA,CAEDA,IAAA,CAAA,QAAA,EAAA,EACE,OAAO,EAAE,MAAM,cAAc,CAAC,OAAO,CAAC,EACtC,KAAK,EAAE;AACL,oDAAA,IAAI,EAAE,CAAC;AACP,oDAAA,OAAO,EAAE,MAAM;AACf,oDAAA,UAAU,EAAE,QAAQ;AACpB,oDAAA,cAAc,EAAE,QAAQ;AACxB,oDAAA,GAAG,EAAE,KAAK;AACV,oDAAA,OAAO,EAAE,WAAW;AACpB,oDAAA,MAAM,EAAE,MAAM;AACd,oDAAA,YAAY,EAAE,KAAK;AACnB,oDAAA,eAAe,EAAE,WAAW,KAAK,OAAO,GAAG,MAAM,CAAC,KAAK,GAAG,aAAa;AACvE,oDAAA,KAAK,EAAE,WAAW,KAAK,OAAO,GAAG,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI;AAC/D,oDAAA,QAAQ,EAAE,MAAM;AAChB,oDAAA,UAAU,EAAE,GAAG;AACf,oDAAA,MAAM,EAAE,SAAS;AACjB,oDAAA,UAAU,EAAE,mBAAmB;oDAC/B,SAAS,EAAE,WAAW,KAAK,OAAO,GAAG,+BAA+B,GAAG;AACxE,iDAAA,EAAA,QAAA,EAAA,CAEDA,cAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAAA,CAC5FC,GAAA,CAAA,MAAA,EAAA,EAAM,CAAC,EAAC,yCAAyC,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAC,cAAc,EAAC,OAAO,EAAA,CAAG,EACvIA,GAAA,CAAA,QAAA,EAAA,EAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAC,cAAc,EAAC,OAAO,GAAG,CAAA,EAAA,CAC9G,EAAA,sCAAA,CAAA,EAAA,CAEC,EACTD,IAAA,CAAA,QAAA,EAAA,EACE,OAAO,EAAE,MAAM,cAAc,CAAC,MAAM,CAAC,EACrC,KAAK,EAAE;AACL,oDAAA,IAAI,EAAE,CAAC;AACP,oDAAA,OAAO,EAAE,MAAM;AACf,oDAAA,UAAU,EAAE,QAAQ;AACpB,oDAAA,cAAc,EAAE,QAAQ;AACxB,oDAAA,GAAG,EAAE,KAAK;AACV,oDAAA,OAAO,EAAE,WAAW;AACpB,oDAAA,MAAM,EAAE,MAAM;AACd,oDAAA,YAAY,EAAE,KAAK;AACnB,oDAAA,eAAe,EAAE,WAAW,KAAK,MAAM,GAAG,MAAM,CAAC,KAAK,GAAG,aAAa;AACtE,oDAAA,KAAK,EAAE,WAAW,KAAK,MAAM,GAAG,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI;AAC9D,oDAAA,QAAQ,EAAE,MAAM;AAChB,oDAAA,UAAU,EAAE,GAAG;AACf,oDAAA,MAAM,EAAE,SAAS;AACjB,oDAAA,UAAU,EAAE,mBAAmB;oDAC/B,SAAS,EAAE,WAAW,KAAK,MAAM,GAAG,+BAA+B,GAAG;iDACvE,EAAA,QAAA,EAAA,CAEDA,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAAA,CAC5FC,GAAA,CAAA,MAAA,EAAA,EAAM,CAAC,EAAC,yCAAyC,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAC,cAAc,EAAC,OAAO,EAAA,CAAG,EACvIA,gBAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAC,cAAc,EAAC,OAAO,EAAA,CAAG,EAClHA,GAAA,CAAA,MAAA,EAAA,EAAM,CAAC,EAAC,YAAY,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,GAAG,CAAA,EAAA,CAC/E,EAAA,gCAAA,CAAA,EAAA,CAEC,CAAA,EAAA,CACL,EAAA,CACF,EAEND,IAAA,CAAA,QAAA,EAAA,EACE,OAAO,EAAE,mBAAmB,EAC5B,KAAK,EAAE;AACL,wCAAA,OAAO,EAAE,MAAM;AACf,wCAAA,UAAU,EAAE,QAAQ;AACpB,wCAAA,cAAc,EAAE,QAAQ;AACxB,wCAAA,GAAG,EAAE,KAAK;AACV,wCAAA,KAAK,EAAE,MAAM;AACb,wCAAA,OAAO,EAAE,WAAW;wCACpB,eAAe,EAAE,MAAM,CAAC,KAAK;AAC7B,wCAAA,MAAM,EAAE,MAAM;AACd,wCAAA,YAAY,EAAE,gBAAgB,GAAG,MAAM,GAAG,CAAA,UAAA,EAAa,MAAM,CAAC,UAAU,CAAA,CAAE;AAC1E,wCAAA,MAAM,EAAE,SAAS;AACjB,wCAAA,QAAQ,EAAE,MAAM;AAChB,wCAAA,UAAU,EAAE,GAAG;wCACf,KAAK,EAAE,MAAM,CAAC;qCACf,EAAA,QAAA,EAAA,CAEDC,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAC,IAAI,EACV,MAAM,EAAC,IAAI,EACX,OAAO,EAAC,WAAW,EACnB,IAAI,EAAC,MAAM,EACX,KAAK,EAAC,4BAA4B,EAClC,KAAK,EAAE;gDACL,SAAS,EAAE,gBAAgB,GAAG,cAAc,GAAG,gBAAgB;AAC/D,gDAAA,UAAU,EAAE;AACb,6CAAA,EAAA,QAAA,EAEDA,cACE,CAAC,EAAC,cAAc,EAChB,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,GAAG,EACf,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,GACtB,EAAA,CACE,EACL,gBAAgB,GAAG,iBAAiB,GAAG,gBAAgB,CAAA,EAAA,CACjD,EAETA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;wCACL,SAAS,EAAE,gBAAgB,GAAG,GAAG,GAAG,OAAO;AAC3C,wCAAA,QAAQ,EAAE,QAAQ;AAClB,wCAAA,UAAU,EAAE;AACb,qCAAA,EAAA,QAAA,EAEDA,IAAC,UAAU,EAAA,EACT,MAAM,EAAE,MAAM,EACd,UAAU,EAAE,UAAU,EACtB,QAAQ,EAAE,CAAC,EAAE,KAAI;4CACf,WAAW,CAAC,EAAE,CAAC;AACf,4CAAA,4BAA4B,EAAE;wCAChC,CAAC,EACD,QAAQ,EAAE,WAAW,EACrB,SAAS,EAAE,YAAY,EACvB,UAAU,EAAE,cAAc,EAC1B,WAAW,EAAE,WAAW,EACxB,YAAY,EAAE,cAAc,EAC5B,OAAO,EAAE,IAAI,EACb,QAAQ,EAAE,IAAI,EAAA,CACd,EAAA,CACE,CAAA,EAAA,CACF,KAENA,GAAA,CAAC,UAAU,EAAA,EACT,MAAM,EAAE,MAAM,EACd,UAAU,EAAE,UAAU,EACtB,QAAQ,EAAE,CAAC,EAAE,KAAI;gCACf,WAAW,CAAC,EAAE,CAAC;AACf,gCAAA,4BAA4B,EAAE;AAChC,4BAAA,CAAC,EACD,QAAQ,EAAE,WAAW,EACrB,SAAS,EAAE,YAAY,EACvB,UAAU,EAAE,cAAc,EAC1B,WAAW,EAAE,WAAW,EACxB,YAAY,EAAE,cAAc,EAC5B,OAAO,EAAE,KAAK,EACd,QAAQ,EAAE,KAAK,EAAA,CACf,CACH,GACG,EAGND,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,iBAAiB,EAAA,QAAA,EAAA,CAC3BA,IAAA,CAAA,KAAA,EAAA,EACE,GAAG,EAAE,YAAY,EACjB,KAAK,EAAE,cAAc,EACrB,MAAM,EAAE,UAAU,EAClB,UAAU,EAAE,cAAc,EAC1B,OAAO,EAAE,oBAAoB,aAG5B,MAAM,CAAC,MAAM,KAAK,CAAC,KAClBC,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE;AACV,4CAAA,GAAG,aAAa;4CAChB,MAAM,EAAE,YAAY,GAAG,EAAE,GAAG;yCAC7B,EAAA,QAAA,EACCD,IAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,gDAAA,OAAO,EAAE,MAAM;AACf,gDAAA,aAAa,EAAE,QAAQ;AACvB,gDAAA,UAAU,EAAE,QAAQ;gDACpB,OAAO,EAAE,YAAY,GAAG,WAAW,GAAG,MAAM;AAC5C,gDAAA,MAAM,EAAE,CAAA,WAAA,EAAc,MAAM,CAAC,IAAI,CAAA,CAAE;AACnC,gDAAA,YAAY,EAAE,MAAM;gDACpB,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC7B,QAAQ,EAAE,YAAY,GAAG,KAAK,GAAG,OAAO;AACxC,gDAAA,SAAS,EAAE,QAAQ;gDACnB,SAAS,EAAE,YAAY,GAAG,+BAA+B,GAAG;6CAC7D,EAAA,QAAA,EAAA,CAEDC,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;wDACL,KAAK,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM;wDACrC,MAAM,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM;AACtC,wDAAA,YAAY,EAAE,KAAK;AACnB,wDAAA,eAAe,EAAE,SAAS;AAC1B,wDAAA,OAAO,EAAE,MAAM;AACf,wDAAA,UAAU,EAAE,QAAQ;AACpB,wDAAA,cAAc,EAAE,QAAQ;AACxB,wDAAA,YAAY,EAAE,MAAM;AACpB,wDAAA,SAAS,EAAE;qDACZ,EAAA,QAAA,EAEA,YAAY;;oDAEXD,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAAA,CAC5FC,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,gFAAgF,EAClF,MAAM,EAAE,MAAM,CAAC,MAAM,EACrB,WAAW,EAAC,GAAG,EACf,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,EACFA,GAAA,CAAA,QAAA,EAAA,EAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,IAAI,EAAC,CAAC,EAAC,GAAG,EAAC,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,WAAW,EAAC,GAAG,GAAG,CAAA,EAAA,CACnE,KAENA,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAC5FA,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,2JAA2J,EAC7J,MAAM,EAAE,MAAM,CAAC,MAAM,EACrB,WAAW,EAAC,GAAG,EACf,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,GACtB,EAAA,CACE,CACP,GACG,EACNA,GAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAE,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM,EAAE,EAAA,QAAA,EACrH,YAAY,GAAG,sBAAsB,GAAG,yBAAyB,EAAA,CAC7D,EACPA,GAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,EAAA,QAAA,EAChG,YAAY,GAAG,uBAAuB,GAAG,uBAAuB,EAAA,CAC5D,EACPA,GAAA,CAAA,QAAA,EAAA,EACE,OAAO,EAAE,cAAc,EACvB,KAAK,EAAE;wDACL,OAAO,EAAE,YAAY,GAAG,WAAW,GAAG,WAAW;wDACjD,SAAS,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM;wDACzC,eAAe,EAAE,MAAM,CAAC,MAAM;wDAC9B,KAAK,EAAE,MAAM,CAAC,KAAK;AACnB,wDAAA,MAAM,EAAE,MAAM;AACd,wDAAA,YAAY,EAAE,MAAM;AACpB,wDAAA,MAAM,EAAE,SAAS;AACjB,wDAAA,UAAU,EAAE,GAAG;wDACf,QAAQ,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM;AACxC,wDAAA,SAAS,EAAE,mCAAmC;AAC9C,wDAAA,UAAU,EAAE,mBAAmB;AAC/B,wDAAA,WAAW,EAAE;qDACd,EAAA,QAAA,EAEA,YAAY,GAAG,eAAe,GAAG,aAAa,EAAA,CACxC,EACTA,cAAM,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,sDAEzF,CAAA,EAAA,CACH,EAAA,CACF,CACP,EAGA,WAAW,CAAC,WAAW,KACtBD,IAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,4CAAA,QAAQ,EAAE,UAAU;AACpB,4CAAA,KAAK,EAAE,CAAC;AACR,4CAAA,eAAe,EAAE,0BAA0B;AAC3C,4CAAA,OAAO,EAAE,MAAM;AACf,4CAAA,aAAa,EAAE,QAAQ;AACvB,4CAAA,UAAU,EAAE,QAAQ;AACpB,4CAAA,cAAc,EAAE,QAAQ;AACxB,4CAAA,GAAG,EAAE,MAAM;AACX,4CAAA,MAAM,EAAE,GAAG;AACX,4CAAA,YAAY,EAAE;yCACf,EAAA,QAAA,EAAA,CAEDC,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;oDACL,KAAK,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM;oDACrC,MAAM,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM;AACtC,oDAAA,YAAY,EAAE,KAAK;AACnB,oDAAA,eAAe,EAAE,SAAS;AAC1B,oDAAA,OAAO,EAAE,MAAM;AACf,oDAAA,UAAU,EAAE,QAAQ;AACpB,oDAAA,cAAc,EAAE,QAAQ;AACxB,oDAAA,SAAS,EAAE;AACZ,iDAAA,EAAA,QAAA,EAGDA,aACE,KAAK,EAAE,YAAY,GAAG,IAAI,GAAG,IAAI,EACjC,MAAM,EAAE,YAAY,GAAG,IAAI,GAAG,IAAI,EAClC,OAAO,EAAC,WAAW,EACnB,IAAI,EAAC,MAAM,EACX,KAAK,EAAC,4BAA4B,EAClC,KAAK,EAAE;AACL,wDAAA,SAAS,EAAE;qDACZ,EAAA,QAAA,EAEDA,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,mIAAmI,EACrI,MAAM,EAAE,MAAM,CAAC,MAAM,EACrB,WAAW,EAAC,GAAG,EACf,aAAa,EAAC,OAAO,EAAA,CACrB,GACE,EAAA,CACF,EACNA,GAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAE,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,SAAS,EAAE,QAAQ,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM,EAAE,EAAA,QAAA,EAAA,+CAAA,EAAA,CAE5F,EAEPA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,oDAAA,KAAK,EAAE,KAAK;AACZ,oDAAA,QAAQ,EAAE,OAAO;AACjB,oDAAA,MAAM,EAAE,KAAK;oDACb,eAAe,EAAE,MAAM,CAAC,UAAU;AAClC,oDAAA,YAAY,EAAE,KAAK;AACnB,oDAAA,QAAQ,EAAE;iDACX,EAAA,QAAA,EAEDA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,wDAAA,KAAK,EAAE,CAAA,EAAG,WAAW,CAAC,QAAQ,CAAA,CAAA,CAAG;AACjC,wDAAA,MAAM,EAAE,MAAM;wDACd,eAAe,EAAE,MAAM,CAAC,MAAM;AAC9B,wDAAA,YAAY,EAAE,KAAK;AACnB,wDAAA,UAAU,EAAE;AACb,qDAAA,EAAA,CACD,EAAA,CACE,EACL,WAAW,CAAC,QAAQ,KACnBA,GAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,YAAY,GAAG,MAAM,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAA,QAAA,EAC/J,WAAW,CAAC,QAAQ,EAAA,CAChB,CACR,CAAA,EAAA,CACG,CACP,EAGA,aAAa,CAAC,aAAa,KAC1BA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,4CAAA,QAAQ,EAAE,UAAU;AACpB,4CAAA,IAAI,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI;AACtC,4CAAA,GAAG,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI;4CACrC,KAAK,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,aAAa,CAAC,IAAI;4CAC1E,MAAM,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,aAAa,CAAC,IAAI;AAC3E,4CAAA,QAAQ,EAAE,QAAQ;AAClB,4CAAA,aAAa,EAAE;AAChB,yCAAA,EAAA,QAAA,EAGA,MAAM,CAAC,GAAG,CAAC,SAAS,IAAG;4CACtB,MAAM,eAAe,GAAG,cAAc,CAAC,SAAS,CAAC,SAAS,CAAC;;AAG3D,4CAAA,MAAM,UAAU,GAAwB;AACtC,gDAAA,QAAQ,EAAE,UAAU;gDACpB,IAAI,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC,GAAG,aAAa,CAAC,aAAc,CAAC,IAAI;gDACpE,GAAG,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC,GAAG,aAAa,CAAC,aAAc,CAAC,IAAI;AACnE,gDAAA,KAAK,EAAE,eAAe,CAAC,IAAI,CAAC,KAAK;AACjC,gDAAA,MAAM,EAAE,eAAe,CAAC,IAAI,CAAC,MAAM;AACnC,gDAAA,SAAS,EAAE,eAAe,CAAC,QAAQ,GAAG,CAAA,OAAA,EAAU,eAAe,CAAC,QAAQ,CAAA,IAAA,CAAM,GAAG,SAAS;AAC1F,gDAAA,eAAe,EAAE,eAAe;AAChC,gDAAA,UAAU,EAAE,MAAM;AAClB,gDAAA,aAAa,EAAE;6CAChB;4CAED,QACEA,GAAA,CAAA,KAAA,EAAA,EAEE,GAAG,EAAE,SAAS,CAAC,GAAG,EAClB,GAAG,EAAC,qEAAc,EAClB,KAAK,EAAE,UAAU,EACjB,SAAS,EAAE,KAAK,EAAA,EAJX,SAAS,CAAC,EAAE,CAKjB;wCAEN,CAAC,CAAC,EAAA,CACE,CACP,EAGA,MAAM,CAAC,GAAG,CAAC,SAAS,IAAG;wCACtB,MAAM,eAAe,GAAG,cAAc,CAAC,SAAS,CAAC,SAAS,CAAC;AAC3D,wCAAA,MAAM,UAAU,GAAG,SAAS,CAAC,EAAE,KAAK,UAAU;AAE9C,wCAAA,MAAM,UAAU,GAAwB;AACtC,4CAAA,QAAQ,EAAE,UAAU;AACpB,4CAAA,IAAI,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC;AAChC,4CAAA,GAAG,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC;AAC/B,4CAAA,KAAK,EAAE,eAAe,CAAC,IAAI,CAAC,KAAK;AACjC,4CAAA,MAAM,EAAE,eAAe,CAAC,IAAI,CAAC,MAAM;AACnC,4CAAA,SAAS,EAAE,eAAe,CAAC,QAAQ,GAAG,CAAA,OAAA,EAAU,eAAe,CAAC,QAAQ,CAAA,IAAA,CAAM,GAAG,SAAS;AAC1F,4CAAA,eAAe,EAAE,eAAe;4CAChC,MAAM,EAAE,UAAU,GAAG,UAAU,GAAG,MAAM;AACxC,4CAAA,UAAU,EAAE,MAAM;AAClB,4CAAA,aAAa,EAAE,MAAM;4CACrB,OAAO,EAAE,aAAa,CAAC,aAAa,GAAG,CAAC,GAAG,CAAC;;AAE5C,4CAAA,WAAW,EAAE;yCACd;AAED,wCAAA,QACED,IAAA,CAAC,KAAK,CAAC,QAAQ,EAAA,EAAA,QAAA,EAAA,CACbC,GAAA,CAAA,KAAA,EAAA,EACE,GAAG,EAAE,SAAS,CAAC,GAAG,EAClB,GAAG,EAAC,qEAAc,EAClB,KAAK,EAAE,UAAU,EACjB,SAAS,EAAE,KAAK,EAChB,aAAa,EAAE,CAAC,IAAG;AACjB,wDAAA,4BAA4B,EAAE;wDAC9B,iBAAiB,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,MAAM,CAAC;AAC5C,oDAAA,CAAC,EACD,YAAY,EAAE,CAAC,IAAG;AAChB,wDAAA,4BAA4B,EAAE;AAC9B,wDAAA,gBAAgB,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,CAAC;AACnC,oDAAA,CAAC,EACD,OAAO,EAAE,CAAC,IAAG;wDACX,CAAC,CAAC,eAAe,EAAE;AACnB,wDAAA,WAAW,CAAC,SAAS,CAAC,EAAE,CAAC;AACzB,wDAAA,4BAA4B,EAAE;AAChC,oDAAA,CAAC,EACD,aAAa,EAAE,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAA,CACtC,EACD,UAAU,KACTA,GAAA,CAAC,QAAQ,EAAA,EACP,SAAS,EAAE,eAAe,EAC1B,aAAa,EAAE,aAAa,CAAC,aAAa,IAAI,KAAK,EACnD,aAAa,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,KAAK,iBAAiB,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,EACpF,QAAQ,EAAE,gBAAgB,CAAC,OAAO,IAAI,eAAe,CAAC,QAAQ,EAAA,CAC9D,CACH,KA5BkB,SAAS,CAAC,EAAE,CA6BhB;oCAErB,CAAC,CAAC,EAGD,aAAa,CAAC,aAAa,KAC1BA,GAAA,CAAA,KAAA,EAAA,EACE,KAAK,EAAE;AACL,4CAAA,QAAQ,EAAE,UAAU;AACpB,4CAAA,IAAI,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI;AACtC,4CAAA,GAAG,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI;4CACrC,KAAK,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,aAAa,CAAC,IAAI;4CAC1E,MAAM,EAAE,aAAa,CAAC,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,aAAa,CAAC,IAAI;AAC3E,4CAAA,MAAM,EAAE,CAAA,kCAAA,CAAoC;AAC5C,4CAAA,YAAY,EAAE,KAAK;AACnB,4CAAA,SAAS,EAAE,YAAY;AACvB,4CAAA,aAAa,EAAE;AAChB,yCAAA,EAAA,CACD,CACH,CAAA,EAAA,CACG,EAGL,QAAQ,KACPD,IAAA,CAAA,QAAA,EAAA,EACE,KAAK,EAAE,iBAAiB,EACxB,OAAO,EAAE,YAAY,EACrB,YAAY,EAAE,MAAM,sBAAsB,CAAC,IAAI,CAAC,EAChD,YAAY,EAAE,MAAK;oCACjB,sBAAsB,CAAC,KAAK,CAAC;oCAC7B,qBAAqB,CAAC,KAAK,CAAC;gCAC9B,CAAC,EACD,WAAW,EAAE,MAAM,qBAAqB,CAAC,IAAI,CAAC,EAC9C,SAAS,EAAE,MAAM,qBAAqB,CAAC,KAAK,CAAC,EAAA,QAAA,EAAA,CAE7CC,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAC5FA,GAAA,CAAA,MAAA,EAAA,EACE,CAAC,EAAC,qHAAqH,EACvH,MAAM,EAAC,cAAc,EACrB,WAAW,EAAC,KAAK,EACjB,aAAa,EAAC,OAAO,EACrB,cAAc,EAAC,OAAO,EAAA,CACtB,EAAA,CACE,EAAA,iFAAA,CAAA,EAAA,CAEC,CACV,CAAA,EAAA,CACG,CAAA,EAAA,CACF,EAGNA,GAAA,CAAA,OAAA,EAAA,EACE,GAAG,EAAE,QAAQ,EACb,IAAI,EAAC,MAAM,EACX,MAAM,EAAE,eAAe,EACvB,OAAO,EAAE,YAAY,GAAG,aAAa,GAAG,SAAS,EACjD,QAAQ,EAAE,gBAAgB,EAC1B,KAAK,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,EAAA,CAC1B,CAAA,EAAA,CACE;AAEV;;;;"}