{"version":3,"file":"index.esm.js","sources":["../src/hooks/useImageUpload.ts","../src/hooks/useImageTransform.ts","../src/components/Controls.tsx","../src/components/Toolbar.tsx","../src/components/LayerPanel.tsx","../src/utils/canvas.ts","../src/components/TShirtBuilder.tsx"],"sourcesContent":["import { useCallback, useRef } from 'react';\nimport type { ImageData, ImageTransform, EditorConfig } from '../types';\n\nconst DEFAULT_ACCEPTED_TYPES = ['image/png', 'image/jpeg', 'image/webp', 'image/gif'];\nconst DEFAULT_MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\n\nfunction generateId(): string {\n  return Math.random().toString(36).substring(2, 11);\n}\n\ninterface UseImageUploadOptions {\n  config: EditorConfig;\n  onImageLoad: (imageData: ImageData) => void;\n  onError?: (error: string) => void;\n}\n\nexport function useImageUpload({ config, onImageLoad, onError }: UseImageUploadOptions) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const acceptedTypes = config.acceptedFileTypes || DEFAULT_ACCEPTED_TYPES;\n  const maxFileSize = config.maxFileSize || DEFAULT_MAX_FILE_SIZE;\n\n  const processFile = useCallback(\n    (file: File) => {\n      // Validate file type\n      if (!acceptedTypes.includes(file.type)) {\n        onError?.(`Invalid file type. Accepted: ${acceptedTypes.join(', ')}`);\n        return;\n      }\n\n      // Validate file size\n      if (file.size > maxFileSize) {\n        onError?.(`File too large. Maximum size: ${Math.round(maxFileSize / 1024 / 1024)}MB`);\n        return;\n      }\n\n      const reader = new FileReader();\n\n      reader.onload = (e) => {\n        const src = e.target?.result as string;\n        const img = new Image();\n\n        img.onload = () => {\n          const { naturalWidth, naturalHeight } = img;\n\n          // Calculate initial size to fit within editor while maintaining aspect ratio\n          const printableArea = config.printableArea || {\n            minX: 0,\n            minY: 0,\n            maxX: config.width,\n            maxY: config.height,\n          };\n\n          const areaWidth = printableArea.maxX - printableArea.minX;\n          const areaHeight = printableArea.maxY - printableArea.minY;\n\n          const aspectRatio = naturalWidth / naturalHeight;\n          let width: number;\n          let height: number;\n\n          // Fit image to 60% of printable area by default\n          const targetSize = Math.min(areaWidth, areaHeight) * 0.6;\n\n          if (aspectRatio > 1) {\n            width = targetSize;\n            height = targetSize / aspectRatio;\n          } else {\n            height = targetSize;\n            width = targetSize * aspectRatio;\n          }\n\n          // Center in printable area\n          const x = printableArea.minX + (areaWidth - width) / 2;\n          const y = printableArea.minY + (areaHeight - height) / 2;\n\n          const transform: ImageTransform = {\n            position: { x, y },\n            size: { width, height },\n            rotation: 0,\n          };\n\n          onImageLoad({\n            id: generateId(),\n            src,\n            naturalWidth,\n            naturalHeight,\n            transform,\n          });\n        };\n\n        img.onerror = () => {\n          onError?.('Failed to load image');\n        };\n\n        img.src = src;\n      };\n\n      reader.onerror = () => {\n        onError?.('Failed to read file');\n      };\n\n      reader.readAsDataURL(file);\n    },\n    [acceptedTypes, maxFileSize, config, onImageLoad, onError]\n  );\n\n  const handleFileChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      const file = event.target.files?.[0];\n      if (file) {\n        processFile(file);\n      }\n      // Reset input so the same file can be selected again\n      if (inputRef.current) {\n        inputRef.current.value = '';\n      }\n    },\n    [processFile]\n  );\n\n  const handleDrop = useCallback(\n    (event: React.DragEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const file = event.dataTransfer.files?.[0];\n      if (file) {\n        processFile(file);\n      }\n    },\n    [processFile]\n  );\n\n  const handleDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  }, []);\n\n  const openFilePicker = useCallback(() => {\n    inputRef.current?.click();\n  }, []);\n\n  return {\n    inputRef,\n    handleFileChange,\n    handleDrop,\n    handleDragOver,\n    openFilePicker,\n    acceptedTypes,\n  };\n}\n","import { useState, useCallback, useRef, useEffect } from 'react';\nimport type {\n  ImageData,\n  ImageTransform,\n  DragState,\n  DragMode,\n  ControlHandle,\n  EditorConfig,\n} from '../types';\n\ninterface UseImageTransformOptions {\n  images: ImageData[];\n  config: EditorConfig;\n  onChange?: (images: ImageData[]) => void;\n}\n\nexport function useImageTransform({ images, config, onChange }: UseImageTransformOptions) {\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const dragStateRef = useRef<DragState | null>(null);\n\n  // Auto-select newly added image\n  useEffect(() => {\n    if (images.length > 0 && !selectedId) {\n      setSelectedId(images[images.length - 1].id);\n    } else if (images.length === 0) {\n      setSelectedId(null);\n    } else if (selectedId && !images.find((img) => img.id === selectedId)) {\n      // Selected image was removed, select the last one\n      setSelectedId(images.length > 0 ? images[images.length - 1].id : null);\n    }\n  }, [images, selectedId]);\n\n  const clampTransform = useCallback(\n    (newTransform: ImageTransform): ImageTransform => {\n      const { position, size, rotation } = newTransform;\n\n      // Only clamp size to min/max, allow position to be anywhere\n      const minSize = config.minImageSize || 20;\n      const maxSize = config.maxImageSize || Math.max(config.width, config.height);\n\n      const clampedWidth = Math.max(minSize, Math.min(maxSize, size.width));\n      const clampedHeight = Math.max(minSize, Math.min(maxSize, size.height));\n\n      return {\n        position: { x: position.x, y: position.y },\n        size: { width: clampedWidth, height: clampedHeight },\n        rotation,\n      };\n    },\n    [config]\n  );\n\n  const updateImageTransform = useCallback(\n    (imageId: string, newTransform: ImageTransform) => {\n      const clamped = clampTransform(newTransform);\n      const updatedImages = images.map((img) =>\n        img.id === imageId ? { ...img, transform: clamped } : img\n      );\n      onChange?.(updatedImages);\n    },\n    [clampTransform, images, onChange]\n  );\n\n  const handleMouseDown = useCallback(\n    (\n      event: React.MouseEvent,\n      imageId: string,\n      mode: DragMode,\n      handle?: ControlHandle['position']\n    ) => {\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      setSelectedId(imageId);\n      setIsDragging(true);\n      dragStateRef.current = {\n        mode,\n        imageId,\n        startPosition: { x: event.clientX, y: event.clientY },\n        startTransform: { ...image.transform },\n        handle,\n      };\n    },\n    [images]\n  );\n\n  const handleMouseMove = useCallback(\n    (event: MouseEvent) => {\n      const dragState = dragStateRef.current;\n      if (!dragState) return;\n\n      const image = images.find((img) => img.id === dragState.imageId);\n      if (!image) return;\n\n      const deltaX = event.clientX - dragState.startPosition.x;\n      const deltaY = event.clientY - dragState.startPosition.y;\n\n      let newTransform: ImageTransform;\n\n      switch (dragState.mode) {\n        case 'move':\n          newTransform = {\n            ...image.transform,\n            position: {\n              x: dragState.startTransform.position.x + deltaX,\n              y: dragState.startTransform.position.y + deltaY,\n            },\n          };\n          break;\n\n        case 'resize': {\n          const { handle } = dragState;\n          const aspectRatio = image.naturalWidth / image.naturalHeight;\n          const minSize = config.minImageSize || 20;\n          const maxSize = config.maxImageSize || Math.max(config.width, config.height);\n\n          let newWidth = dragState.startTransform.size.width;\n          let newX = dragState.startTransform.position.x;\n          let newY = dragState.startTransform.position.y;\n\n          // Calculate new width based on handle\n          switch (handle) {\n            case 'se':\n            case 'ne':\n              newWidth = dragState.startTransform.size.width + deltaX;\n              break;\n            case 'sw':\n            case 'nw':\n              newWidth = dragState.startTransform.size.width - deltaX;\n              break;\n          }\n\n          // Clamp width first\n          const clampedWidth = Math.max(minSize, Math.min(maxSize, newWidth));\n          const clampedHeight = clampedWidth / aspectRatio;\n\n          // Calculate position based on clamped size\n          const widthDiff = clampedWidth - dragState.startTransform.size.width;\n          const heightDiff = clampedHeight - dragState.startTransform.size.height;\n\n          switch (handle) {\n            case 'se':\n              // Bottom-right: position stays same\n              break;\n            case 'sw':\n              // Bottom-left: x moves left as width increases\n              newX = dragState.startTransform.position.x - widthDiff;\n              break;\n            case 'ne':\n              // Top-right: y moves up as height increases\n              newY = dragState.startTransform.position.y - heightDiff;\n              break;\n            case 'nw':\n              // Top-left: both x and y move\n              newX = dragState.startTransform.position.x - widthDiff;\n              newY = dragState.startTransform.position.y - heightDiff;\n              break;\n          }\n\n          newTransform = {\n            ...image.transform,\n            position: { x: newX, y: newY },\n            size: { width: clampedWidth, height: clampedHeight },\n          };\n          break;\n        }\n\n        case 'rotate': {\n          if (!config.allowRotation) {\n            return;\n          }\n          const centerX =\n            dragState.startTransform.position.x +\n            dragState.startTransform.size.width / 2;\n          const centerY =\n            dragState.startTransform.position.y +\n            dragState.startTransform.size.height / 2;\n\n          const startAngle = Math.atan2(\n            dragState.startPosition.y - centerY,\n            dragState.startPosition.x - centerX\n          );\n          const currentAngle = Math.atan2(\n            event.clientY - centerY,\n            event.clientX - centerX\n          );\n\n          const rotation =\n            dragState.startTransform.rotation +\n            ((currentAngle - startAngle) * 180) / Math.PI;\n\n          newTransform = {\n            ...image.transform,\n            rotation,\n          };\n          break;\n        }\n\n        default:\n          return;\n      }\n\n      updateImageTransform(dragState.imageId, newTransform);\n    },\n    [images, config.allowRotation, updateImageTransform]\n  );\n\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false);\n    dragStateRef.current = null;\n  }, []);\n\n  // Attach global mouse events when dragging\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n\n      return () => {\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n\n  const selectImage = useCallback((imageId: string | null) => {\n    setSelectedId(imageId);\n  }, []);\n\n  const deselectAll = useCallback(() => {\n    setSelectedId(null);\n  }, []);\n\n  const deleteImage = useCallback(\n    (imageId: string) => {\n      const updatedImages = images.filter((img) => img.id !== imageId);\n      onChange?.(updatedImages);\n    },\n    [images, onChange]\n  );\n\n  const deleteSelected = useCallback(() => {\n    if (selectedId) {\n      deleteImage(selectedId);\n    }\n  }, [selectedId, deleteImage]);\n\n  const bringToFront = useCallback(\n    (imageId: string) => {\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n      const others = images.filter((img) => img.id !== imageId);\n      onChange?.([...others, image]);\n    },\n    [images, onChange]\n  );\n\n  const sendToBack = useCallback(\n    (imageId: string) => {\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n      const others = images.filter((img) => img.id !== imageId);\n      onChange?.([image, ...others]);\n    },\n    [images, onChange]\n  );\n\n  const reorderImage = useCallback(\n    (fromIndex: number, toIndex: number) => {\n      if (fromIndex < 0 || fromIndex >= images.length) return;\n      if (toIndex < 0 || toIndex >= images.length) return;\n      if (fromIndex === toIndex) return;\n\n      const newImages = [...images];\n      const [moved] = newImages.splice(fromIndex, 1);\n      newImages.splice(toIndex, 0, moved);\n      onChange?.(newImages);\n    },\n    [images, onChange]\n  );\n\n  return {\n    selectedId,\n    isDragging,\n    handleMouseDown,\n    selectImage,\n    deselectAll,\n    deleteImage,\n    deleteSelected,\n    bringToFront,\n    sendToBack,\n    reorderImage,\n    updateImageTransform,\n  };\n}\n","import React from 'react';\nimport type { ImageTransform, ControlHandle, DragMode } from '../types';\n\ninterface ControlsProps {\n  transform: ImageTransform;\n  allowRotation: boolean;\n  onMouseDown: (\n    event: React.MouseEvent,\n    mode: DragMode,\n    handle?: ControlHandle['position']\n  ) => void;\n}\n\nconst HANDLE_SIZE = 12;\n\nconst handleStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: HANDLE_SIZE,\n  height: HANDLE_SIZE,\n  backgroundColor: '#fff',\n  border: '2px solid #0066ff',\n  borderRadius: '2px',\n  boxSizing: 'border-box',\n};\n\nconst rotateHandleStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: HANDLE_SIZE,\n  height: HANDLE_SIZE,\n  backgroundColor: '#0066ff',\n  border: '2px solid #fff',\n  borderRadius: '50%',\n  boxSizing: 'border-box',\n  cursor: 'grab',\n};\n\nexport function Controls({ transform, allowRotation, onMouseDown }: ControlsProps) {\n  const { position, size, rotation } = transform;\n\n  const containerStyle: React.CSSProperties = {\n    position: 'absolute',\n    left: position.x,\n    top: position.y,\n    width: size.width,\n    height: size.height,\n    transform: rotation ? `rotate(${rotation}deg)` : undefined,\n    transformOrigin: 'center center',\n    pointerEvents: 'none',\n  };\n\n  const borderStyle: React.CSSProperties = {\n    position: 'absolute',\n    inset: 0,\n    border: '2px dashed #0066ff',\n    pointerEvents: 'none',\n  };\n\n  const handles: Array<{\n    position: ControlHandle['position'];\n    style: React.CSSProperties;\n  }> = [\n    {\n      position: 'nw',\n      style: { top: -HANDLE_SIZE / 2, left: -HANDLE_SIZE / 2, cursor: 'nwse-resize' },\n    },\n    {\n      position: 'ne',\n      style: { top: -HANDLE_SIZE / 2, right: -HANDLE_SIZE / 2, cursor: 'nesw-resize' },\n    },\n    {\n      position: 'sw',\n      style: { bottom: -HANDLE_SIZE / 2, left: -HANDLE_SIZE / 2, cursor: 'nesw-resize' },\n    },\n    {\n      position: 'se',\n      style: { bottom: -HANDLE_SIZE / 2, right: -HANDLE_SIZE / 2, cursor: 'nwse-resize' },\n    },\n  ];\n\n  return (\n    <div style={containerStyle}>\n      <div style={borderStyle} />\n\n      {/* Resize handles */}\n      {handles.map(({ position: pos, style }) => (\n        <div\n          key={pos}\n          style={{ ...handleStyle, ...style, pointerEvents: 'auto' }}\n          onMouseDown={(e) => onMouseDown(e, 'resize', pos)}\n        />\n      ))}\n\n      {/* Rotation handle */}\n      {allowRotation && (\n        <>\n          <div\n            style={{\n              position: 'absolute',\n              top: -30,\n              left: '50%',\n              width: 2,\n              height: 20,\n              backgroundColor: '#0066ff',\n              transform: 'translateX(-50%)',\n            }}\n          />\n          <div\n            style={{\n              ...rotateHandleStyle,\n              top: -36 - HANDLE_SIZE / 2,\n              left: '50%',\n              transform: 'translateX(-50%)',\n              pointerEvents: 'auto',\n            }}\n            onMouseDown={(e) => onMouseDown(e, 'rotate')}\n          />\n        </>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\ninterface ToolbarProps {\n  imageCount: number;\n  hasSelection: boolean;\n  onUploadClick: () => void;\n  onRemoveClick: () => void;\n  onRemoveAllClick: () => void;\n  onExportClick?: () => void;\n}\n\nconst toolbarStyle: React.CSSProperties = {\n  display: 'flex',\n  gap: '8px',\n  padding: '8px',\n  backgroundColor: '#f5f5f5',\n  borderRadius: '4px',\n  marginBottom: '8px',\n  flexWrap: 'wrap',\n};\n\nconst buttonStyle: React.CSSProperties = {\n  padding: '8px 16px',\n  border: 'none',\n  borderRadius: '4px',\n  cursor: 'pointer',\n  fontSize: '14px',\n  fontWeight: 500,\n  transition: 'background-color 0.2s',\n};\n\nconst primaryButtonStyle: React.CSSProperties = {\n  ...buttonStyle,\n  backgroundColor: '#0066ff',\n  color: '#fff',\n};\n\nconst secondaryButtonStyle: React.CSSProperties = {\n  ...buttonStyle,\n  backgroundColor: '#e0e0e0',\n  color: '#333',\n};\n\nconst dangerButtonStyle: React.CSSProperties = {\n  ...buttonStyle,\n  backgroundColor: '#ff4444',\n  color: '#fff',\n};\n\nexport function Toolbar({\n  imageCount,\n  hasSelection,\n  onUploadClick,\n  onRemoveClick,\n  onRemoveAllClick,\n  onExportClick,\n}: ToolbarProps) {\n  return (\n    <div style={toolbarStyle}>\n      <button style={primaryButtonStyle} onClick={onUploadClick}>\n        Add Image\n      </button>\n\n      {hasSelection && (\n        <button style={dangerButtonStyle} onClick={onRemoveClick}>\n          Remove Selected\n        </button>\n      )}\n\n      {imageCount > 0 && (\n        <>\n          <button style={dangerButtonStyle} onClick={onRemoveAllClick}>\n            Remove All\n          </button>\n          {onExportClick && (\n            <button style={secondaryButtonStyle} onClick={onExportClick}>\n              Export\n            </button>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useRef, useCallback, useEffect } from 'react';\nimport type { ImageData } from '../types';\n\ninterface LayerPanelProps {\n  images: ImageData[];\n  selectedId: string | null;\n  onSelect: (id: string) => void;\n  onDelete: (id: string) => void;\n  onReorder: (fromIndex: number, toIndex: number) => void;\n}\n\nconst ITEM_HEIGHT = 52; // Height of each layer item in pixels\n\nconst panelStyle: React.CSSProperties = {\n  width: '200px',\n  backgroundColor: '#fff',\n  border: '1px solid #e0e0e0',\n  borderRadius: '4px',\n  overflow: 'hidden',\n};\n\nconst headerStyle: React.CSSProperties = {\n  padding: '8px 12px',\n  backgroundColor: '#f5f5f5',\n  borderBottom: '1px solid #e0e0e0',\n  fontSize: '12px',\n  fontWeight: 600,\n  color: '#666',\n  textTransform: 'uppercase',\n};\n\nconst listStyle: React.CSSProperties = {\n  listStyle: 'none',\n  margin: 0,\n  padding: 0,\n  maxHeight: '300px',\n  overflowY: 'auto',\n  position: 'relative',\n};\n\nconst emptyStyle: React.CSSProperties = {\n  padding: '20px',\n  textAlign: 'center',\n  color: '#999',\n  fontSize: '13px',\n};\n\nconst dragHandleStyle: React.CSSProperties = {\n  display: 'flex',\n  flexDirection: 'column',\n  gap: '2px',\n  cursor: 'grab',\n  padding: '4px',\n  borderRadius: '2px',\n};\n\nconst dragLineStyle: React.CSSProperties = {\n  width: '12px',\n  height: '2px',\n  backgroundColor: '#999',\n  borderRadius: '1px',\n};\n\nexport function LayerPanel({\n  images,\n  selectedId,\n  onSelect,\n  onDelete,\n  onReorder,\n}: LayerPanelProps) {\n  const [dragState, setDragState] = useState<{\n    draggingIndex: number;\n    startY: number;\n    currentY: number;\n  } | null>(null);\n\n  const listRef = useRef<HTMLUListElement>(null);\n\n  // Reverse to show top layer first (last in array = top = first in list)\n  const reversedImages = [...images].reverse();\n\n  const handleMouseDown = useCallback((e: React.MouseEvent, reversedIndex: number) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    setDragState({\n      draggingIndex: reversedIndex,\n      startY: e.clientY,\n      currentY: e.clientY,\n    });\n  }, []);\n\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    if (!dragState) return;\n\n    setDragState(prev => prev ? {\n      ...prev,\n      currentY: e.clientY,\n    } : null);\n  }, [dragState]);\n\n  const handleMouseUp = useCallback(() => {\n    if (!dragState) return;\n\n    const deltaY = dragState.currentY - dragState.startY;\n    const indexDelta = Math.round(deltaY / ITEM_HEIGHT);\n    const newReversedIndex = Math.max(0, Math.min(reversedImages.length - 1, dragState.draggingIndex + indexDelta));\n\n    if (newReversedIndex !== dragState.draggingIndex) {\n      // Convert reversed indices to original indices\n      const fromOriginal = images.length - 1 - dragState.draggingIndex;\n      const toOriginal = images.length - 1 - newReversedIndex;\n      onReorder(fromOriginal, toOriginal);\n    }\n\n    setDragState(null);\n  }, [dragState, reversedImages.length, images.length, onReorder]);\n\n  useEffect(() => {\n    if (dragState) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n\n      return () => {\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [dragState, handleMouseMove, handleMouseUp]);\n\n  const handleDelete = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    onDelete(id);\n  };\n\n  // Calculate visual positions during drag\n  const getItemStyle = (reversedIndex: number, isSelected: boolean): React.CSSProperties => {\n    const isDragging = dragState?.draggingIndex === reversedIndex;\n\n    let transform = 'translateY(0)';\n    let zIndex = 1;\n    let boxShadow = 'none';\n    let transition = 'transform 0.2s ease, background-color 0.15s, box-shadow 0.2s ease';\n\n    if (dragState) {\n      if (isDragging) {\n        // The dragged item follows the mouse\n        const deltaY = dragState.currentY - dragState.startY;\n        transform = `translateY(${deltaY}px)`;\n        zIndex = 100;\n        boxShadow = '0 4px 12px rgba(0,0,0,0.15)';\n        transition = 'box-shadow 0.2s ease';\n      } else {\n        // Other items shift to make room\n        const draggedIndex = dragState.draggingIndex;\n        const deltaY = dragState.currentY - dragState.startY;\n        const targetIndex = Math.round(deltaY / ITEM_HEIGHT) + draggedIndex;\n        const clampedTarget = Math.max(0, Math.min(reversedImages.length - 1, targetIndex));\n\n        if (draggedIndex < reversedIndex && clampedTarget >= reversedIndex) {\n          // Dragged item moved down past this item - shift up\n          transform = `translateY(-${ITEM_HEIGHT}px)`;\n        } else if (draggedIndex > reversedIndex && clampedTarget <= reversedIndex) {\n          // Dragged item moved up past this item - shift down\n          transform = `translateY(${ITEM_HEIGHT}px)`;\n        }\n      }\n    }\n\n    return {\n      display: 'flex',\n      alignItems: 'center',\n      gap: '8px',\n      padding: '8px 12px',\n      borderBottom: '1px solid #eee',\n      backgroundColor: isDragging ? '#fff' : isSelected ? '#e3f2fd' : 'transparent',\n      cursor: 'pointer',\n      position: 'relative',\n      zIndex,\n      transform,\n      transition,\n      boxShadow,\n      height: `${ITEM_HEIGHT}px`,\n      boxSizing: 'border-box',\n    };\n  };\n\n  const thumbnailStyle: React.CSSProperties = {\n    width: '32px',\n    height: '32px',\n    objectFit: 'contain',\n    backgroundColor: '#f5f5f5',\n    borderRadius: '2px',\n    border: '1px solid #ddd',\n  };\n\n  const labelStyle: React.CSSProperties = {\n    flex: 1,\n    fontSize: '13px',\n    color: '#333',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n  };\n\n  const deleteButtonStyle: React.CSSProperties = {\n    width: '20px',\n    height: '20px',\n    padding: 0,\n    border: 'none',\n    borderRadius: '2px',\n    backgroundColor: '#ffcdd2',\n    color: '#c62828',\n    cursor: 'pointer',\n    fontSize: '12px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  };\n\n  return (\n    <div style={panelStyle}>\n      <div style={headerStyle}>Layers</div>\n      {images.length === 0 ? (\n        <div style={emptyStyle}>No images added</div>\n      ) : (\n        <ul ref={listRef} style={listStyle}>\n          {reversedImages.map((image, reversedIndex) => {\n            const originalIndex = images.length - 1 - reversedIndex;\n            const isSelected = image.id === selectedId;\n            const isDragging = dragState?.draggingIndex === reversedIndex;\n\n            return (\n              <li\n                key={image.id}\n                style={getItemStyle(reversedIndex, isSelected)}\n                onClick={() => !dragState && onSelect(image.id)}\n              >\n                <div\n                  style={{\n                    ...dragHandleStyle,\n                    cursor: isDragging ? 'grabbing' : 'grab',\n                  }}\n                  onMouseDown={(e) => handleMouseDown(e, reversedIndex)}\n                >\n                  <div style={dragLineStyle} />\n                  <div style={dragLineStyle} />\n                  <div style={dragLineStyle} />\n                </div>\n                <img\n                  src={image.src}\n                  alt={`Layer ${originalIndex + 1}`}\n                  style={thumbnailStyle}\n                  draggable={false}\n                />\n                <span style={labelStyle}>Layer {originalIndex + 1}</span>\n                <button\n                  style={deleteButtonStyle}\n                  onClick={(e) => handleDelete(e, image.id)}\n                  title=\"Delete\"\n                >\n                  Ã—\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </div>\n  );\n}\n","import type { ImageData, EditorConfig } from '../types';\n\nexport function exportToDataUrl(\n  canvas: HTMLCanvasElement,\n  backgroundImage: HTMLImageElement | null,\n  images: ImageData[],\n  config: EditorConfig,\n  format: 'image/png' | 'image/jpeg' = 'image/png',\n  quality = 0.92\n): string {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    throw new Error('Failed to get canvas context');\n  }\n\n  // Clear canvas\n  ctx.clearRect(0, 0, config.width, config.height);\n\n  // Draw background if exists\n  if (backgroundImage) {\n    ctx.drawImage(backgroundImage, 0, 0, config.width, config.height);\n  }\n\n  // Draw all user images in order (first = bottom, last = top)\n  // Clip to printable area if defined\n  if (config.printableArea) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.rect(\n      config.printableArea.minX,\n      config.printableArea.minY,\n      config.printableArea.maxX - config.printableArea.minX,\n      config.printableArea.maxY - config.printableArea.minY\n    );\n    ctx.clip();\n  }\n\n  for (const imageData of images) {\n    const { transform, src } = imageData;\n    const img = new Image();\n    img.src = src;\n\n    ctx.save();\n\n    // Apply rotation around image center\n    if (transform.rotation !== 0) {\n      const centerX = transform.position.x + transform.size.width / 2;\n      const centerY = transform.position.y + transform.size.height / 2;\n      ctx.translate(centerX, centerY);\n      ctx.rotate((transform.rotation * Math.PI) / 180);\n      ctx.translate(-centerX, -centerY);\n    }\n\n    ctx.drawImage(\n      img,\n      transform.position.x,\n      transform.position.y,\n      transform.size.width,\n      transform.size.height\n    );\n\n    ctx.restore();\n  }\n\n  // Restore from clip\n  if (config.printableArea) {\n    ctx.restore();\n  }\n\n  return canvas.toDataURL(format, quality);\n}\n\nexport function createOffscreenCanvas(width: number, height: number): HTMLCanvasElement {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n","import React, { useState, useRef, useCallback, useEffect } from 'react';\nimport type { TShirtBuilderProps, ImageData, EditorConfig } from '../types';\nimport { useImageUpload } from '../hooks/useImageUpload';\nimport { useImageTransform } from '../hooks/useImageTransform';\nimport { Controls } from './Controls';\nimport { Toolbar } from './Toolbar';\nimport { LayerPanel } from './LayerPanel';\nimport { exportToDataUrl, createOffscreenCanvas } from '../utils/canvas';\n\nconst DEFAULT_CONFIG: EditorConfig = {\n  width: 400,\n  height: 500,\n  minImageSize: 20,\n  maxImageSize: 800,\n  allowRotation: false,\n  acceptedFileTypes: ['image/png', 'image/jpeg', 'image/webp', 'image/gif'],\n  maxFileSize: 10 * 1024 * 1024,\n};\n\nexport function TShirtBuilder({\n  backgroundImage,\n  config: configProp,\n  onChange,\n  onExport,\n  className,\n  style,\n  initialImages,\n}: TShirtBuilderProps) {\n  const config: EditorConfig = { ...DEFAULT_CONFIG, ...configProp };\n\n  const [images, setImages] = useState<ImageData[]>(initialImages || []);\n  const [bgImage, setBgImage] = useState<HTMLImageElement | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Load background image\n  useEffect(() => {\n    if (backgroundImage) {\n      const img = new Image();\n      img.onload = () => setBgImage(img);\n      img.onerror = () => setError('Failed to load background image');\n      img.src = backgroundImage;\n    } else {\n      setBgImage(null);\n    }\n  }, [backgroundImage]);\n\n  const handleImagesChange = useCallback(\n    (newImages: ImageData[]) => {\n      setImages(newImages);\n      onChange?.(newImages);\n    },\n    [onChange]\n  );\n\n  const handleImageLoad = useCallback(\n    (newImageData: ImageData) => {\n      const newImages = [...images, newImageData];\n      setImages(newImages);\n      setError(null);\n      onChange?.(newImages);\n    },\n    [images, onChange]\n  );\n\n  const { inputRef, handleFileChange, handleDrop, handleDragOver, openFilePicker, acceptedTypes } =\n    useImageUpload({\n      config,\n      onImageLoad: handleImageLoad,\n      onError: setError,\n    });\n\n  const {\n    selectedId,\n    isDragging,\n    handleMouseDown,\n    selectImage,\n    deselectAll,\n    deleteImage,\n    deleteSelected,\n    reorderImage,\n  } = useImageTransform({\n    images,\n    config,\n    onChange: handleImagesChange,\n  });\n\n  const handleRemoveAll = useCallback(() => {\n    setImages([]);\n    onChange?.([]);\n  }, [onChange]);\n\n  const handleExport = useCallback(() => {\n    if (!onExport) return;\n\n    const canvas = createOffscreenCanvas(config.width, config.height);\n    const dataUrl = exportToDataUrl(canvas, bgImage, images, config);\n    onExport(dataUrl);\n  }, [bgImage, images, config, onExport]);\n\n  const handleContainerClick = useCallback(\n    (e: React.MouseEvent) => {\n      // Deselect if clicking on empty area\n      if (e.target === containerRef.current) {\n        deselectAll();\n      }\n    },\n    [deselectAll]\n  );\n\n  const containerStyle: React.CSSProperties = {\n    position: 'relative',\n    width: config.width,\n    height: config.height,\n    backgroundColor: '#f0f0f0',\n    backgroundImage: bgImage ? `url(${backgroundImage})` : undefined,\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n    overflow: 'hidden',\n    cursor: isDragging ? 'grabbing' : 'default',\n    userSelect: 'none',\n  };\n\n  const dropZoneStyle: React.CSSProperties = {\n    position: 'absolute',\n    inset: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    gap: '8px',\n    color: '#666',\n    fontSize: '14px',\n    pointerEvents: images.length > 0 ? 'none' : 'auto',\n  };\n\n  return (\n    <div className={className} style={style}>\n      <Toolbar\n        imageCount={images.length}\n        hasSelection={selectedId !== null}\n        onUploadClick={openFilePicker}\n        onRemoveClick={deleteSelected}\n        onRemoveAllClick={handleRemoveAll}\n        onExportClick={onExport ? handleExport : undefined}\n      />\n\n      {error && (\n        <div\n          style={{\n            padding: '8px 12px',\n            marginBottom: '8px',\n            backgroundColor: '#ffebee',\n            color: '#c62828',\n            borderRadius: '4px',\n            fontSize: '14px',\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      <div style={{ display: 'flex', gap: '16px' }}>\n        {/* Layer Panel */}\n        <LayerPanel\n          images={images}\n          selectedId={selectedId}\n          onSelect={selectImage}\n          onDelete={deleteImage}\n          onReorder={reorderImage}\n        />\n\n        {/* Canvas */}\n        <div\n          ref={containerRef}\n          style={containerStyle}\n          onDrop={handleDrop}\n          onDragOver={handleDragOver}\n          onClick={handleContainerClick}\n        >\n          {/* Drop zone placeholder */}\n          {images.length === 0 && (\n            <div style={dropZoneStyle}>\n              <span>Drag & drop an image here</span>\n              <span>or</span>\n              <button\n                onClick={openFilePicker}\n                style={{\n                  padding: '8px 16px',\n                  backgroundColor: '#0066ff',\n                  color: '#fff',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                }}\n              >\n                Browse Files\n              </button>\n            </div>\n          )}\n\n          {/* Clipped area for images - clips to printable area */}\n          {config.printableArea && (\n            <div\n              style={{\n                position: 'absolute',\n                left: config.printableArea.minX,\n                top: config.printableArea.minY,\n                width: config.printableArea.maxX - config.printableArea.minX,\n                height: config.printableArea.maxY - config.printableArea.minY,\n                overflow: 'hidden',\n                pointerEvents: 'none',\n              }}\n            >\n              {/* Render all images inside clip container */}\n              {images.map((imageData) => {\n                const { transform } = imageData;\n\n                // Adjust position relative to printable area\n                const imageStyle: React.CSSProperties = {\n                  position: 'absolute',\n                  left: transform.position.x - config.printableArea!.minX,\n                  top: transform.position.y - config.printableArea!.minY,\n                  width: transform.size.width,\n                  height: transform.size.height,\n                  transform: transform.rotation ? `rotate(${transform.rotation}deg)` : undefined,\n                  transformOrigin: 'center center',\n                  userSelect: 'none',\n                  pointerEvents: 'none',\n                };\n\n                return (\n                  <img\n                    key={imageData.id}\n                    src={imageData.src}\n                    alt=\"Uploaded design\"\n                    style={imageStyle}\n                    draggable={false}\n                  />\n                );\n              })}\n            </div>\n          )}\n\n          {/* Render all images (interactive layer - invisible but captures events) */}\n          {images.map((imageData) => {\n            const { transform } = imageData;\n            const isSelected = imageData.id === selectedId;\n\n            const imageStyle: React.CSSProperties = {\n              position: 'absolute',\n              left: transform.position.x,\n              top: transform.position.y,\n              width: transform.size.width,\n              height: transform.size.height,\n              transform: transform.rotation ? `rotate(${transform.rotation}deg)` : undefined,\n              transformOrigin: 'center center',\n              cursor: isDragging ? 'grabbing' : 'move',\n              userSelect: 'none',\n              pointerEvents: 'auto',\n              opacity: config.printableArea ? 0 : 1,\n            };\n\n            return (\n              <React.Fragment key={imageData.id}>\n                <img\n                  src={imageData.src}\n                  alt=\"Uploaded design\"\n                  style={imageStyle}\n                  draggable={false}\n                  onMouseDown={(e) => handleMouseDown(e, imageData.id, 'move')}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    selectImage(imageData.id);\n                  }}\n                />\n                {isSelected && (\n                  <Controls\n                    transform={transform}\n                    allowRotation={config.allowRotation || false}\n                    onMouseDown={(e, mode, handle) =>\n                      handleMouseDown(e, imageData.id, mode, handle)\n                    }\n                  />\n                )}\n              </React.Fragment>\n            );\n          })}\n\n          {/* Printable area indicator */}\n          {config.printableArea && (\n            <div\n              style={{\n                position: 'absolute',\n                left: config.printableArea.minX,\n                top: config.printableArea.minY,\n                width: config.printableArea.maxX - config.printableArea.minX,\n                height: config.printableArea.maxY - config.printableArea.minY,\n                border: '1px dashed rgba(0, 0, 0, 0.3)',\n                pointerEvents: 'none',\n              }}\n            />\n          )}\n        </div>\n      </div>\n\n      {/* Hidden file input */}\n      <input\n        ref={inputRef}\n        type=\"file\"\n        accept={acceptedTypes.join(',')}\n        onChange={handleFileChange}\n        style={{ display: 'none' }}\n      />\n    </div>\n  );\n}\n"],"names":["_jsxs","_jsx","_Fragment"],"mappings":"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"}