{"version":3,"file":"index.cjs.js","sources":["../src/hooks/useImageUpload.ts","../src/hooks/useImageTransform.ts","../src/components/Controls.tsx","../src/components/LayerPanel.tsx","../src/utils/canvas.ts","../src/components/TShirtBuilder.tsx"],"sourcesContent":["import { useCallback, useRef } from 'react';\nimport type { ImageData, ImageTransform, EditorConfig } from '../types';\n\nconst DEFAULT_ACCEPTED_TYPES = ['image/png', 'image/jpeg', 'image/webp', 'image/gif'];\nconst DEFAULT_MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\n\nfunction generateId(): string {\n  return Math.random().toString(36).substring(2, 11);\n}\n\ninterface UseImageUploadOptions {\n  config: EditorConfig;\n  onImageLoad: (imageData: ImageData) => void;\n  onError?: (error: string) => void;\n}\n\nexport function useImageUpload({ config, onImageLoad, onError }: UseImageUploadOptions) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const acceptedTypes = config.acceptedFileTypes || DEFAULT_ACCEPTED_TYPES;\n  const maxFileSize = config.maxFileSize || DEFAULT_MAX_FILE_SIZE;\n\n  const processFile = useCallback(\n    (file: File) => {\n      // Validate file type\n      if (!acceptedTypes.includes(file.type)) {\n        onError?.(`Невалиден тип файл. Позволени: ${acceptedTypes.join(', ')}`);\n        return;\n      }\n\n      // Validate file size\n      if (file.size > maxFileSize) {\n        onError?.(`Файлът е твърде голям. Максимален размер: ${Math.round(maxFileSize / 1024 / 1024)}MB`);\n        return;\n      }\n\n      const reader = new FileReader();\n\n      reader.onload = (e) => {\n        const src = e.target?.result as string;\n        const img = new Image();\n\n        img.onload = () => {\n          const { naturalWidth, naturalHeight } = img;\n\n          // Calculate initial size to fit within editor while maintaining aspect ratio\n          const printableArea = config.printableArea || {\n            minX: 0,\n            minY: 0,\n            maxX: config.width,\n            maxY: config.height,\n          };\n\n          const areaWidth = printableArea.maxX - printableArea.minX;\n          const areaHeight = printableArea.maxY - printableArea.minY;\n\n          const aspectRatio = naturalWidth / naturalHeight;\n          let width: number;\n          let height: number;\n\n          // Fit image to 60% of printable area by default\n          const targetSize = Math.min(areaWidth, areaHeight) * 0.6;\n\n          if (aspectRatio > 1) {\n            width = targetSize;\n            height = targetSize / aspectRatio;\n          } else {\n            height = targetSize;\n            width = targetSize * aspectRatio;\n          }\n\n          // Center in printable area\n          const x = printableArea.minX + (areaWidth - width) / 2;\n          const y = printableArea.minY + (areaHeight - height) / 2;\n\n          const transform: ImageTransform = {\n            position: { x, y },\n            size: { width, height },\n            rotation: 0,\n          };\n\n          onImageLoad({\n            id: generateId(),\n            src,\n            naturalWidth,\n            naturalHeight,\n            transform,\n          });\n        };\n\n        img.onerror = () => {\n          onError?.('Грешка при зареждане на изображението');\n        };\n\n        img.src = src;\n      };\n\n      reader.onerror = () => {\n        onError?.('Грешка при четене на файла');\n      };\n\n      reader.readAsDataURL(file);\n    },\n    [acceptedTypes, maxFileSize, config, onImageLoad, onError]\n  );\n\n  const handleFileChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      const file = event.target.files?.[0];\n      if (file) {\n        processFile(file);\n      }\n      // Reset input so the same file can be selected again\n      if (inputRef.current) {\n        inputRef.current.value = '';\n      }\n    },\n    [processFile]\n  );\n\n  const handleDrop = useCallback(\n    (event: React.DragEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const file = event.dataTransfer.files?.[0];\n      if (file) {\n        processFile(file);\n      }\n    },\n    [processFile]\n  );\n\n  const handleDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  }, []);\n\n  const openFilePicker = useCallback(() => {\n    inputRef.current?.click();\n  }, []);\n\n  return {\n    inputRef,\n    handleFileChange,\n    handleDrop,\n    handleDragOver,\n    openFilePicker,\n    acceptedTypes,\n  };\n}\n","import { useState, useCallback, useRef, useEffect } from 'react';\nimport type {\n  ImageData,\n  ImageTransform,\n  DragState,\n  DragMode,\n  ControlHandle,\n  EditorConfig,\n} from '../types';\n\ninterface UseImageTransformOptions {\n  images: ImageData[];\n  config: EditorConfig;\n  containerRef: React.RefObject<HTMLElement>;\n  onChange?: (images: ImageData[]) => void;\n}\n\nexport function useImageTransform({ images, config, containerRef, onChange }: UseImageTransformOptions) {\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragMode, setDragMode] = useState<DragMode | null>(null);\n  const dragStateRef = useRef<DragState | null>(null);\n\n  // Store latest values in refs to avoid recreating callbacks\n  const imagesRef = useRef(images);\n  const onChangeRef = useRef(onChange);\n  const configRef = useRef(config);\n\n  // Keep refs updated\n  useEffect(() => {\n    imagesRef.current = images;\n  }, [images]);\n\n  useEffect(() => {\n    onChangeRef.current = onChange;\n  }, [onChange]);\n\n  useEffect(() => {\n    configRef.current = config;\n  }, [config]);\n\n  // Auto-select newly added image\n  useEffect(() => {\n    if (images.length > 0 && !selectedId) {\n      setSelectedId(images[images.length - 1].id);\n    } else if (images.length === 0) {\n      setSelectedId(null);\n    } else if (selectedId && !images.find((img) => img.id === selectedId)) {\n      // Selected image was removed, select the last one\n      setSelectedId(images.length > 0 ? images[images.length - 1].id : null);\n    }\n  }, [images, selectedId]);\n\n  const clampTransform = useCallback(\n    (newTransform: ImageTransform): ImageTransform => {\n      const { position, size, rotation } = newTransform;\n\n      // Only clamp size to min, allow position to be anywhere\n      const minSize = configRef.current.minImageSize || 20;\n\n      const clampedWidth = Math.max(minSize, size.width);\n      const clampedHeight = Math.max(minSize, size.height);\n\n      return {\n        position: { x: position.x, y: position.y },\n        size: { width: clampedWidth, height: clampedHeight },\n        rotation,\n      };\n    },\n    []\n  );\n\n  const updateImageTransform = useCallback(\n    (imageId: string, newTransform: ImageTransform) => {\n      const clamped = clampTransform(newTransform);\n      const updatedImages = imagesRef.current.map((img) =>\n        img.id === imageId ? { ...img, transform: clamped } : img\n      );\n      onChangeRef.current?.(updatedImages);\n    },\n    [clampTransform]\n  );\n\n  const handleMouseDown = useCallback(\n    (\n      event: React.MouseEvent,\n      imageId: string,\n      mode: DragMode,\n      handle?: ControlHandle['position']\n    ) => {\n      const image = imagesRef.current.find((img) => img.id === imageId);\n      if (!image) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      setSelectedId(imageId);\n      setIsDragging(true);\n      setDragMode(mode);\n      dragStateRef.current = {\n        mode,\n        imageId,\n        startPosition: { x: event.clientX, y: event.clientY },\n        startTransform: { ...image.transform },\n        handle,\n      };\n    },\n    []\n  );\n\n  const handleMouseMove = useCallback(\n    (event: MouseEvent) => {\n      const dragState = dragStateRef.current;\n      if (!dragState) return;\n\n      const image = imagesRef.current.find((img) => img.id === dragState.imageId);\n      if (!image) return;\n\n      const deltaX = event.clientX - dragState.startPosition.x;\n      const deltaY = event.clientY - dragState.startPosition.y;\n\n      let newTransform: ImageTransform;\n\n      switch (dragState.mode) {\n        case 'move':\n          newTransform = {\n            ...dragState.startTransform,\n            position: {\n              x: dragState.startTransform.position.x + deltaX,\n              y: dragState.startTransform.position.y + deltaY,\n            },\n          };\n          break;\n\n        case 'resize': {\n          const { handle } = dragState;\n          const aspectRatio = image.naturalWidth / image.naturalHeight;\n          const minSize = configRef.current.minImageSize || 20;\n\n          let newWidth = dragState.startTransform.size.width;\n          let newX = dragState.startTransform.position.x;\n          let newY = dragState.startTransform.position.y;\n\n          // Calculate new width based on handle\n          switch (handle) {\n            case 'se':\n            case 'ne':\n              newWidth = dragState.startTransform.size.width + deltaX;\n              break;\n            case 'sw':\n            case 'nw':\n              newWidth = dragState.startTransform.size.width - deltaX;\n              break;\n          }\n\n          // Clamp width to minimum only\n          const clampedWidth = Math.max(minSize, newWidth);\n          const clampedHeight = clampedWidth / aspectRatio;\n\n          // Calculate position based on clamped size\n          const widthDiff = clampedWidth - dragState.startTransform.size.width;\n          const heightDiff = clampedHeight - dragState.startTransform.size.height;\n\n          switch (handle) {\n            case 'se':\n              // Bottom-right: position stays same\n              break;\n            case 'sw':\n              // Bottom-left: x moves left as width increases\n              newX = dragState.startTransform.position.x - widthDiff;\n              break;\n            case 'ne':\n              // Top-right: y moves up as height increases\n              newY = dragState.startTransform.position.y - heightDiff;\n              break;\n            case 'nw':\n              // Top-left: both x and y move\n              newX = dragState.startTransform.position.x - widthDiff;\n              newY = dragState.startTransform.position.y - heightDiff;\n              break;\n          }\n\n          newTransform = {\n            ...dragState.startTransform,\n            position: { x: newX, y: newY },\n            size: { width: clampedWidth, height: clampedHeight },\n          };\n          break;\n        }\n\n        case 'rotate': {\n          if (!configRef.current.allowRotation) {\n            return;\n          }\n\n          // Get container position to convert client coords to local coords\n          const container = containerRef.current;\n          if (!container) return;\n\n          const rect = container.getBoundingClientRect();\n\n          // Image center in local (canvas) coordinates\n          const centerX =\n            dragState.startTransform.position.x +\n            dragState.startTransform.size.width / 2;\n          const centerY =\n            dragState.startTransform.position.y +\n            dragState.startTransform.size.height / 2;\n\n          // Convert mouse positions to local coordinates\n          const startLocalX = dragState.startPosition.x - rect.left;\n          const startLocalY = dragState.startPosition.y - rect.top;\n          const currentLocalX = event.clientX - rect.left;\n          const currentLocalY = event.clientY - rect.top;\n\n          const startAngle = Math.atan2(\n            startLocalY - centerY,\n            startLocalX - centerX\n          );\n          const currentAngle = Math.atan2(\n            currentLocalY - centerY,\n            currentLocalX - centerX\n          );\n\n          const rotation =\n            dragState.startTransform.rotation +\n            ((currentAngle - startAngle) * 180) / Math.PI;\n\n          newTransform = {\n            ...dragState.startTransform,\n            rotation,\n          };\n          break;\n        }\n\n        default:\n          return;\n      }\n\n      updateImageTransform(dragState.imageId, newTransform);\n    },\n    [containerRef, updateImageTransform]\n  );\n\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false);\n    setDragMode(null);\n    dragStateRef.current = null;\n  }, []);\n\n  // Attach global mouse events when dragging\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n\n      return () => {\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n\n  const selectImage = useCallback((imageId: string | null) => {\n    setSelectedId(imageId);\n  }, []);\n\n  const deselectAll = useCallback(() => {\n    setSelectedId(null);\n  }, []);\n\n  const deleteImage = useCallback(\n    (imageId: string) => {\n      const updatedImages = imagesRef.current.filter((img) => img.id !== imageId);\n      onChangeRef.current?.(updatedImages);\n    },\n    []\n  );\n\n  const deleteSelected = useCallback(() => {\n    if (selectedId) {\n      deleteImage(selectedId);\n    }\n  }, [selectedId, deleteImage]);\n\n  const bringToFront = useCallback(\n    (imageId: string) => {\n      const images = imagesRef.current;\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n      const others = images.filter((img) => img.id !== imageId);\n      onChangeRef.current?.([...others, image]);\n    },\n    []\n  );\n\n  const sendToBack = useCallback(\n    (imageId: string) => {\n      const images = imagesRef.current;\n      const image = images.find((img) => img.id === imageId);\n      if (!image) return;\n      const others = images.filter((img) => img.id !== imageId);\n      onChangeRef.current?.([image, ...others]);\n    },\n    []\n  );\n\n  const reorderImage = useCallback(\n    (fromIndex: number, toIndex: number) => {\n      const images = imagesRef.current;\n      if (fromIndex < 0 || fromIndex >= images.length) return;\n      if (toIndex < 0 || toIndex >= images.length) return;\n      if (fromIndex === toIndex) return;\n\n      const newImages = [...images];\n      const [moved] = newImages.splice(fromIndex, 1);\n      newImages.splice(toIndex, 0, moved);\n      onChangeRef.current?.(newImages);\n    },\n    []\n  );\n\n  return {\n    selectedId,\n    isDragging,\n    dragMode,\n    handleMouseDown,\n    selectImage,\n    deselectAll,\n    deleteImage,\n    deleteSelected,\n    bringToFront,\n    sendToBack,\n    reorderImage,\n    updateImageTransform,\n  };\n}\n","import React from 'react';\nimport type { ImageTransform, ControlHandle, DragMode } from '../types';\n\ninterface ControlsProps {\n  transform: ImageTransform;\n  allowRotation: boolean;\n  onMouseDown: (\n    event: React.MouseEvent,\n    mode: DragMode,\n    handle?: ControlHandle['position']\n  ) => void;\n}\n\nconst HANDLE_SIZE = 10;\nconst ACCENT_COLOR = '#4A4A4A'; // dark gray - subtle and professional\n\n// SVG rotate cursor icon encoded as data URI\nconst ROTATE_CURSOR = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8'/%3E%3Cpath d='M21 3v5h-5'/%3E%3C/svg%3E\") 12 12, crosshair`;\n\nconst handleStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: HANDLE_SIZE,\n  height: HANDLE_SIZE,\n  backgroundColor: '#ffffff',\n  border: `2px solid ${ACCENT_COLOR}`,\n  borderRadius: '50%',\n  boxSizing: 'border-box',\n  boxShadow: '0 2px 10px rgba(0, 0, 0, 0.15)',\n  transition: 'transform 0.3s ease-out, box-shadow 0.3s ease-out',\n};\n\nconst rotateHandleStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: HANDLE_SIZE + 2,\n  height: HANDLE_SIZE + 2,\n  backgroundColor: ACCENT_COLOR,\n  border: '2px solid #fff',\n  borderRadius: '50%',\n  boxSizing: 'border-box',\n  cursor: ROTATE_CURSOR,\n  boxShadow: '0 2px 10px rgba(0, 0, 0, 0.2)',\n};\n\nexport function Controls({ transform, allowRotation, onMouseDown }: ControlsProps) {\n  const { position, size, rotation } = transform;\n\n  const containerStyle: React.CSSProperties = {\n    position: 'absolute',\n    left: position.x,\n    top: position.y,\n    width: size.width,\n    height: size.height,\n    transform: rotation ? `rotate(${rotation}deg)` : undefined,\n    transformOrigin: 'center center',\n    pointerEvents: 'none',\n  };\n\n  const borderStyle: React.CSSProperties = {\n    position: 'absolute',\n    inset: -1,\n    border: `2px solid ${ACCENT_COLOR}`,\n    borderRadius: '4px',\n    pointerEvents: 'none',\n    boxShadow: '0 2px 10px rgba(0, 0, 0, 0.1)',\n  };\n\n  const handles: Array<{\n    position: ControlHandle['position'];\n    style: React.CSSProperties;\n  }> = [\n    {\n      position: 'nw',\n      style: { top: -HANDLE_SIZE / 2, left: -HANDLE_SIZE / 2, cursor: 'nwse-resize' },\n    },\n    {\n      position: 'ne',\n      style: { top: -HANDLE_SIZE / 2, right: -HANDLE_SIZE / 2, cursor: 'nesw-resize' },\n    },\n    {\n      position: 'sw',\n      style: { bottom: -HANDLE_SIZE / 2, left: -HANDLE_SIZE / 2, cursor: 'nesw-resize' },\n    },\n    {\n      position: 'se',\n      style: { bottom: -HANDLE_SIZE / 2, right: -HANDLE_SIZE / 2, cursor: 'nwse-resize' },\n    },\n  ];\n\n  return (\n    <div style={containerStyle}>\n      <div style={borderStyle} />\n\n      {/* Resize handles */}\n      {handles.map(({ position: pos, style }) => (\n        <div\n          key={pos}\n          style={{ ...handleStyle, ...style, pointerEvents: 'auto' }}\n          onMouseDown={(e) => onMouseDown(e, 'resize', pos)}\n        />\n      ))}\n\n      {/* Rotation handle */}\n      {allowRotation && (\n        <>\n          <div\n            style={{\n              position: 'absolute',\n              top: -28,\n              left: '50%',\n              width: 1.5,\n              height: 18,\n              backgroundColor: ACCENT_COLOR,\n              transform: 'translateX(-50%)',\n              opacity: 0.8,\n            }}\n          />\n          <div\n            style={{\n              ...rotateHandleStyle,\n              top: -34 - HANDLE_SIZE / 2,\n              left: '50%',\n              transform: 'translateX(-50%)',\n              pointerEvents: 'auto',\n            }}\n            onMouseDown={(e) => onMouseDown(e, 'rotate')}\n          />\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport type { ImageData, TShirtView } from \"../types\";\n\ninterface LayerPanelProps {\n  images: ImageData[];\n  selectedId: string | null;\n  onSelect: (id: string) => void;\n  onDelete: (id: string) => void;\n  onReorder: (fromIndex: number, toIndex: number) => void;\n  onAddImage: () => void;\n  currentView: TShirtView;\n  onViewChange: (view: TShirtView) => void;\n}\n\nconst ITEM_HEIGHT = 56; // Height of each layer item in pixels\n\n// teniski-varna color palette\nconst COLORS = {\n  ACCENT: \"#FAC000\",\n  BLACK: \"#000000\",\n  WHITE: \"#FFFFFF\",\n  GRAY: \"#9B9B9B\",\n  LIGHT_GRAY: \"#F7F7F7\",\n  DARK_GRAY: \"#4A4A4A\",\n  RED: \"#FF0000\"\n};\n\n// Layer icon component\nconst LayerIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M8 1L1 4.5L8 8L15 4.5L8 1Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <path\n      d=\"M1 11.5L8 15L15 11.5\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <path d=\"M1 8L8 11.5L15 8\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n  </svg>\n);\n\nconst panelStyle: React.CSSProperties = {\n  width: \"220px\",\n  backgroundColor: COLORS.WHITE,\n  borderRadius: \"10px\",\n  overflow: \"hidden\",\n  boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.1)\",\n  fontFamily: \"Roboto, -apple-system, BlinkMacSystemFont, sans-serif\"\n};\n\nconst headerStyle: React.CSSProperties = {\n  display: \"flex\",\n  alignItems: \"center\",\n  padding: \"8px\",\n  borderBottom: `1px solid ${COLORS.LIGHT_GRAY}`\n};\n\nconst viewToggleContainerStyle: React.CSSProperties = {\n  display: \"flex\",\n  width: \"100%\",\n  backgroundColor: COLORS.LIGHT_GRAY,\n  borderRadius: \"8px\",\n  padding: \"4px\"\n};\n\nconst getViewButtonStyle = (isActive: boolean): React.CSSProperties => ({\n  flex: 1,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  gap: \"6px\",\n  padding: \"10px 12px\",\n  border: \"none\",\n  borderRadius: \"6px\",\n  backgroundColor: isActive ? COLORS.WHITE : \"transparent\",\n  color: isActive ? COLORS.DARK_GRAY : COLORS.GRAY,\n  fontSize: \"13px\",\n  fontWeight: 600,\n  cursor: \"pointer\",\n  transition: \"all 0.2s ease-out\",\n  boxShadow: isActive ? \"0 2px 4px rgba(0, 0, 0, 0.08)\" : \"none\"\n});\n\nconst listStyle: React.CSSProperties = {\n  listStyle: \"none\",\n  margin: 0,\n  padding: \"8px\",\n  maxHeight: \"320px\",\n  overflowY: \"auto\",\n  position: \"relative\"\n};\n\nconst emptyStyle: React.CSSProperties = {\n  padding: \"32px 20px\",\n  textAlign: \"center\",\n  color: COLORS.GRAY,\n  fontSize: \"13px\"\n};\n\nconst dragHandleStyle: React.CSSProperties = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  gap: \"3px\",\n  cursor: \"grab\",\n  padding: \"6px 4px\",\n  borderRadius: \"4px\",\n  transition: \"background-color 0.3s ease-out\"\n};\n\nconst dragLineStyle: React.CSSProperties = {\n  width: \"10px\",\n  height: \"2px\",\n  backgroundColor: COLORS.GRAY,\n  borderRadius: \"1px\"\n};\n\n// Plus icon for add button\nconst PlusIcon = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M8 3v10M3 8h10\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n  </svg>\n);\n\nconst addButtonStyle: React.CSSProperties = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  gap: \"6px\",\n  width: \"100%\",\n  padding: \"12px 16px\",\n  margin: \"8px 0\",\n  backgroundColor: COLORS.ACCENT,\n  color: COLORS.BLACK,\n  border: \"none\",\n  borderRadius: \"10px\",\n  cursor: \"pointer\",\n  fontSize: \"14px\",\n  fontWeight: 600,\n  boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.3)\",\n  transition: \"filter 0.1s ease-out, transform 0.1s ease-out\"\n};\n\nexport function LayerPanel({\n  images,\n  selectedId,\n  onSelect,\n  onDelete,\n  onReorder,\n  onAddImage,\n  currentView,\n  onViewChange\n}: LayerPanelProps) {\n  const [dragState, setDragState] = useState<{\n    draggingIndex: number;\n    startY: number;\n    currentY: number;\n  } | null>(null);\n\n  const listRef = useRef<HTMLUListElement>(null);\n\n  // Reverse to show top layer first (last in array = top = first in list)\n  const reversedImages = [...images].reverse();\n\n  const handleMouseDown = useCallback((e: React.MouseEvent, reversedIndex: number) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    setDragState({\n      draggingIndex: reversedIndex,\n      startY: e.clientY,\n      currentY: e.clientY\n    });\n  }, []);\n\n  const handleMouseMove = useCallback(\n    (e: MouseEvent) => {\n      if (!dragState) return;\n\n      setDragState(prev =>\n        prev\n          ? {\n              ...prev,\n              currentY: e.clientY\n            }\n          : null\n      );\n    },\n    [dragState]\n  );\n\n  const handleMouseUp = useCallback(() => {\n    if (!dragState) return;\n\n    const deltaY = dragState.currentY - dragState.startY;\n    const indexDelta = Math.round(deltaY / ITEM_HEIGHT);\n    const newReversedIndex = Math.max(0, Math.min(reversedImages.length - 1, dragState.draggingIndex + indexDelta));\n\n    if (newReversedIndex !== dragState.draggingIndex) {\n      // Convert reversed indices to original indices\n      const fromOriginal = images.length - 1 - dragState.draggingIndex;\n      const toOriginal = images.length - 1 - newReversedIndex;\n      onReorder(fromOriginal, toOriginal);\n    }\n\n    setDragState(null);\n  }, [dragState, reversedImages.length, images.length, onReorder]);\n\n  useEffect(() => {\n    if (dragState) {\n      window.addEventListener(\"mousemove\", handleMouseMove);\n      window.addEventListener(\"mouseup\", handleMouseUp);\n\n      return () => {\n        window.removeEventListener(\"mousemove\", handleMouseMove);\n        window.removeEventListener(\"mouseup\", handleMouseUp);\n      };\n    }\n  }, [dragState, handleMouseMove, handleMouseUp]);\n\n  const handleDelete = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    onDelete(id);\n  };\n\n  // Calculate visual positions during drag\n  const getItemStyle = (reversedIndex: number, isSelected: boolean): React.CSSProperties => {\n    const isDragging = dragState?.draggingIndex === reversedIndex;\n\n    let transform = \"translateY(0)\";\n    let zIndex = 1;\n    let boxShadow = isSelected\n      ? `0 0 0 2px ${COLORS.ACCENT}, 0 2px 10px rgba(250, 192, 0, 0.15)`\n      : \"0 1px 3px rgba(0, 0, 0, 0.05)\";\n    let transition =\n      \"transform 0.3s ease-out, background-color 0.3s ease-out, box-shadow 0.3s ease-out, border-color 0.3s ease-out\";\n\n    if (dragState) {\n      if (isDragging) {\n        // The dragged item follows the mouse\n        const deltaY = dragState.currentY - dragState.startY;\n        transform = `translateY(${deltaY}px) scale(1.02)`;\n        zIndex = 100;\n        boxShadow = \"0 8px 24px rgba(0,0,0,0.15), 0 4px 8px rgba(0, 0, 0, 0.1)\";\n        transition = \"box-shadow 0.3s ease-out\";\n      } else {\n        // Other items shift to make room\n        const draggedIndex = dragState.draggingIndex;\n        const deltaY = dragState.currentY - dragState.startY;\n        const targetIndex = Math.round(deltaY / ITEM_HEIGHT) + draggedIndex;\n        const clampedTarget = Math.max(0, Math.min(reversedImages.length - 1, targetIndex));\n\n        if (draggedIndex < reversedIndex && clampedTarget >= reversedIndex) {\n          // Dragged item moved down past this item - shift up\n          transform = `translateY(-${ITEM_HEIGHT}px)`;\n        } else if (draggedIndex > reversedIndex && clampedTarget <= reversedIndex) {\n          // Dragged item moved up past this item - shift down\n          transform = `translateY(${ITEM_HEIGHT}px)`;\n        }\n      }\n    }\n\n    return {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"10px\",\n      padding: \"10px 12px\",\n      marginBottom: \"6px\",\n      borderRadius: \"10px\",\n      border: `1px solid ${isSelected ? COLORS.ACCENT : COLORS.LIGHT_GRAY}`,\n      backgroundColor: isDragging ? COLORS.WHITE : isSelected ? \"#FEF9E7\" : COLORS.WHITE,\n      cursor: \"pointer\",\n      position: \"relative\",\n      zIndex,\n      transform,\n      transition,\n      boxShadow,\n      height: `${ITEM_HEIGHT}px`,\n      boxSizing: \"border-box\"\n    };\n  };\n\n  const thumbnailStyle: React.CSSProperties = {\n    width: \"36px\",\n    height: \"36px\",\n    objectFit: \"contain\",\n    backgroundColor: COLORS.LIGHT_GRAY,\n    borderRadius: \"8px\",\n    border: `1px solid ${COLORS.LIGHT_GRAY}`,\n    padding: \"2px\"\n  };\n\n  const labelStyle: React.CSSProperties = {\n    flex: 1,\n    fontSize: \"13px\",\n    fontWeight: 500,\n    color: COLORS.DARK_GRAY,\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\"\n  };\n\n  const deleteButtonStyle: React.CSSProperties = {\n    width: \"28px\",\n    height: \"28px\",\n    padding: 0,\n    border: \"none\",\n    borderRadius: \"50%\",\n    backgroundColor: \"transparent\",\n    color: COLORS.GRAY,\n    cursor: \"pointer\",\n    fontSize: \"16px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    transition: \"all 0.3s ease-out\"\n  };\n\n  const deleteButtonHoverStyle: React.CSSProperties = {\n    ...deleteButtonStyle,\n    backgroundColor: \"#FFEBEB\",\n    color: COLORS.RED,\n    transform: \"scale(1.1)\"\n  };\n\n  // Delete button with hover state\n  const [hoveredDeleteId, setHoveredDeleteId] = useState<string | null>(null);\n\n  const [addButtonHovered, setAddButtonHovered] = useState(false);\n  const [addButtonActive, setAddButtonActive] = useState(false);\n\n  // Front icon\n  const FrontIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M20 21V19a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <circle cx=\"12\" cy=\"7\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    </svg>\n  );\n\n  // Back icon\n  const BackIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M20 21V19a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <circle cx=\"12\" cy=\"7\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M3 3l18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n    </svg>\n  );\n\n  return (\n    <div style={panelStyle}>\n      <div style={headerStyle}>\n        <div style={viewToggleContainerStyle}>\n          <button style={getViewButtonStyle(currentView === \"front\")} onClick={() => onViewChange(\"front\")}>\n            <FrontIcon />\n            Отпред\n          </button>\n          <button style={getViewButtonStyle(currentView === \"back\")} onClick={() => onViewChange(\"back\")}>\n            <BackIcon />\n            Отзад\n          </button>\n        </div>\n      </div>\n      <div style={{ padding: \"12px 12px 4px\" }}>\n        <button\n          style={{\n            ...addButtonStyle,\n            margin: 0,\n            ...(addButtonActive\n              ? {\n                  filter: \"brightness(0.9)\",\n                  transform: \"scale(0.95)\"\n                }\n              : addButtonHovered\n                ? {\n                    filter: \"brightness(0.9)\"\n                  }\n                : {})\n          }}\n          onClick={onAddImage}\n          onMouseEnter={() => setAddButtonHovered(true)}\n          onMouseLeave={() => {\n            setAddButtonHovered(false);\n            setAddButtonActive(false);\n          }}\n          onMouseDown={() => setAddButtonActive(true)}\n          onMouseUp={() => setAddButtonActive(false)}\n        >\n          <PlusIcon />\n          Добави изображение\n        </button>\n      </div>\n      {images.length === 0 ? (\n        <div style={emptyStyle}>\n          <div style={{ marginBottom: \"4px\", opacity: 0.6 }}>\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                d=\"M8 1L1 4.5L8 8L15 4.5L8 1Z\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.5\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n              <path\n                d=\"M1 11.5L8 15L15 11.5\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.5\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n              <path\n                d=\"M1 8L8 11.5L15 8\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.5\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n            </svg>\n          </div>\n          Няма слоеве\n        </div>\n      ) : (\n        <ul ref={listRef} style={listStyle}>\n          {reversedImages.map((image, reversedIndex) => {\n            const originalIndex = images.length - 1 - reversedIndex;\n            const isSelected = image.id === selectedId;\n            const isDragging = dragState?.draggingIndex === reversedIndex;\n\n            return (\n              <li\n                key={image.id}\n                style={getItemStyle(reversedIndex, isSelected)}\n                onClick={() => !dragState && onSelect(image.id)}\n              >\n                <div\n                  style={{\n                    ...dragHandleStyle,\n                    cursor: isDragging ? \"grabbing\" : \"grab\",\n                    backgroundColor: isDragging ? \"#e2e8f0\" : \"transparent\"\n                  }}\n                  onMouseDown={e => handleMouseDown(e, reversedIndex)}\n                >\n                  <div style={dragLineStyle} />\n                  <div style={dragLineStyle} />\n                  <div style={dragLineStyle} />\n                </div>\n                <img src={image.src} alt={`Layer ${originalIndex + 1}`} style={thumbnailStyle} draggable={false} />\n                <span style={labelStyle}>Слой {originalIndex + 1}</span>\n                <button\n                  style={hoveredDeleteId === image.id ? deleteButtonHoverStyle : deleteButtonStyle}\n                  onClick={e => handleDelete(e, image.id)}\n                  onMouseEnter={() => setHoveredDeleteId(image.id)}\n                  onMouseLeave={() => setHoveredDeleteId(null)}\n                  title=\"Изтрий слой\"\n                >\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                      d=\"M2 4h12M5.333 4V2.667a1.333 1.333 0 011.334-1.334h2.666a1.333 1.333 0 011.334 1.334V4m2 0v9.333a1.333 1.333 0 01-1.334 1.334H4.667a1.333 1.333 0 01-1.334-1.334V4h9.334z\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"1.5\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                    />\n                  </svg>\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </div>\n  );\n}\n","import type { ImageData, EditorConfig } from '../types';\n\n// Helper to load an image from a source URL\nfunction loadImage(src: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n\nexport async function exportToDataUrl(\n  canvas: HTMLCanvasElement,\n  backgroundImage: HTMLImageElement | null,\n  images: ImageData[],\n  config: EditorConfig,\n  format: 'image/png' | 'image/jpeg' = 'image/png',\n  quality = 0.92\n): Promise<string> {\n  const scale = config.exportScale || 1;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    throw new Error('Failed to get canvas context');\n  }\n\n  // Pre-load all user images to ensure they're ready for drawing\n  const loadedImages = await Promise.all(\n    images.map(async (imageData) => ({\n      transform: imageData.transform,\n      img: await loadImage(imageData.src),\n    }))\n  );\n\n  // Clear canvas\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  // Scale all drawing operations\n  ctx.save();\n  ctx.scale(scale, scale);\n\n  // Draw background using \"cover\" behavior to match CSS background-size: cover\n  if (backgroundImage) {\n    const imgRatio = backgroundImage.naturalWidth / backgroundImage.naturalHeight;\n    const containerRatio = config.width / config.height;\n\n    let drawWidth: number, drawHeight: number, drawX: number, drawY: number;\n\n    if (imgRatio > containerRatio) {\n      // Image is wider - fit height, crop width\n      drawHeight = config.height;\n      drawWidth = backgroundImage.naturalWidth * (config.height / backgroundImage.naturalHeight);\n      drawX = (config.width - drawWidth) / 2;\n      drawY = 0;\n    } else {\n      // Image is taller - fit width, crop height\n      drawWidth = config.width;\n      drawHeight = backgroundImage.naturalHeight * (config.width / backgroundImage.naturalWidth);\n      drawX = 0;\n      drawY = (config.height - drawHeight) / 2;\n    }\n\n    ctx.drawImage(backgroundImage, drawX, drawY, drawWidth, drawHeight);\n  }\n\n  // Set up clipping if printable area is defined\n  if (config.printableArea) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.rect(\n      config.printableArea.minX,\n      config.printableArea.minY,\n      config.printableArea.maxX - config.printableArea.minX,\n      config.printableArea.maxY - config.printableArea.minY\n    );\n    ctx.clip();\n  }\n\n  // Draw all user images in order (first = bottom, last = top)\n  for (const { transform, img } of loadedImages) {\n    ctx.save();\n\n    if (transform.rotation !== 0) {\n      const centerX = transform.position.x + transform.size.width / 2;\n      const centerY = transform.position.y + transform.size.height / 2;\n      ctx.translate(centerX, centerY);\n      ctx.rotate((transform.rotation * Math.PI) / 180);\n      ctx.translate(-centerX, -centerY);\n    }\n\n    ctx.drawImage(\n      img,\n      transform.position.x,\n      transform.position.y,\n      transform.size.width,\n      transform.size.height\n    );\n\n    ctx.restore();\n  }\n\n  // Restore from clip if it was applied\n  if (config.printableArea) {\n    ctx.restore();\n  }\n\n  // Restore from scale\n  ctx.restore();\n\n  return canvas.toDataURL(format, quality);\n}\n\nexport function createOffscreenCanvas(width: number, height: number): HTMLCanvasElement {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport type { TShirtBuilderProps, ImageData, EditorConfig, TShirtView, ViewImages } from \"../types\";\nimport { useImageUpload } from \"../hooks/useImageUpload\";\nimport { useImageTransform } from \"../hooks/useImageTransform\";\nimport { Controls } from \"./Controls\";\nimport { LayerPanel } from \"./LayerPanel\";\nimport { exportToDataUrl, createOffscreenCanvas } from \"../utils/canvas\";\n\n// teniski-varna color palette\nconst COLORS = {\n  ACCENT: \"#FAC000\",\n  BLACK: \"#000000\",\n  WHITE: \"#FFFFFF\",\n  GRAY: \"#9B9B9B\",\n  LIGHT_GRAY: \"#F7F7F7\",\n  DARK_GRAY: \"#4A4A4A\",\n  RED: \"#FF0000\"\n};\n\nconst DEFAULT_CONFIG: EditorConfig = {\n  width: 400,\n  height: 500,\n  minImageSize: 20,\n  allowRotation: false,\n  acceptedFileTypes: [\"image/png\", \"image/jpeg\", \"image/webp\", \"image/gif\"],\n  maxFileSize: 10 * 1024 * 1024\n};\n\nexport function TShirtBuilder({\n  frontBgImage,\n  backBgImage,\n  config: configProp,\n  onChange,\n  onExport,\n  className,\n  style,\n  initialImages\n}: TShirtBuilderProps) {\n  const config: EditorConfig = { ...DEFAULT_CONFIG, ...configProp };\n\n  const [currentView, setCurrentView] = useState<TShirtView>(\"front\");\n  const [viewImages, setViewImages] = useState<ViewImages>(initialImages || { front: [], back: [] });\n  const [bgImage, setBgImage] = useState<HTMLImageElement | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Get current images based on view\n  const images = viewImages[currentView];\n\n  // Get current background image URL based on view\n  const currentBackgroundUrl = currentView === \"front\" ? frontBgImage : backBgImage;\n\n  // Load background image based on current view\n  useEffect(() => {\n    if (currentBackgroundUrl) {\n      const img = new Image();\n      img.onload = () => setBgImage(img);\n      img.onerror = () => setError(\"Грешка при зареждане на изображението\");\n      img.src = currentBackgroundUrl;\n    } else {\n      setBgImage(null);\n    }\n  }, [currentBackgroundUrl]);\n\n  const handleImagesChange = useCallback(\n    (newImages: ImageData[]) => {\n      setViewImages(prev => {\n        const updated = { ...prev, [currentView]: newImages };\n        onChange?.(updated, currentView);\n        return updated;\n      });\n    },\n    [onChange, currentView]\n  );\n\n  const handleImageLoad = useCallback(\n    (newImageData: ImageData) => {\n      setViewImages(prev => {\n        const newImages = [...prev[currentView], newImageData];\n        const updated = { ...prev, [currentView]: newImages };\n        onChange?.(updated, currentView);\n        return updated;\n      });\n      setError(null);\n    },\n    [currentView, onChange]\n  );\n\n  const { inputRef, handleFileChange, handleDrop, handleDragOver, openFilePicker, acceptedTypes } = useImageUpload({\n    config,\n    onImageLoad: handleImageLoad,\n    onError: setError\n  });\n\n  const {\n    selectedId,\n    isDragging,\n    dragMode,\n    handleMouseDown,\n    selectImage,\n    deselectAll,\n    deleteImage,\n    deleteSelected,\n    reorderImage\n  } = useImageTransform({\n    images,\n    config,\n    containerRef,\n    onChange: handleImagesChange\n  });\n\n  // SVG rotate cursor - same as in Controls.tsx\n  const ROTATE_CURSOR = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8'/%3E%3Cpath d='M21 3v5h-5'/%3E%3C/svg%3E\") 12 12, crosshair`;\n\n  // Set cursor on body during rotation to ensure it persists outside the handle\n  useEffect(() => {\n    if (isDragging && dragMode === 'rotate') {\n      document.body.style.cursor = ROTATE_CURSOR;\n      return () => {\n        document.body.style.cursor = '';\n      };\n    }\n  }, [isDragging, dragMode]);\n\n  const handleExport = useCallback(async () => {\n    if (!onExport) return;\n\n    const scale = config.exportScale || 1;\n    const canvas = createOffscreenCanvas(config.width * scale, config.height * scale);\n\n    // Helper to load an image\n    const loadImage = (src: string | undefined): Promise<HTMLImageElement | null> => {\n      if (!src) return Promise.resolve(null);\n      return new Promise((resolve) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = () => resolve(null);\n        img.src = src;\n      });\n    };\n\n    // Load both background images\n    const [frontBg, backBg] = await Promise.all([\n      loadImage(frontBgImage),\n      loadImage(backBgImage)\n    ]);\n\n    // Export front\n    const frontDataUrl = await exportToDataUrl(canvas, frontBg, viewImages.front, config);\n\n    // Export back\n    const backDataUrl = await exportToDataUrl(canvas, backBg, viewImages.back, config);\n\n    onExport({ front: frontDataUrl, back: backDataUrl });\n  }, [config, onExport, frontBgImage, backBgImage, viewImages]);\n\n  const handleContainerClick = useCallback(\n    (e: React.MouseEvent) => {\n      // Deselect if clicking on empty area\n      if (e.target === containerRef.current) {\n        deselectAll();\n      }\n    },\n    [deselectAll]\n  );\n\n  const containerStyle: React.CSSProperties = {\n    position: \"relative\",\n    width: config.width,\n    height: config.height,\n    backgroundColor: COLORS.LIGHT_GRAY,\n    backgroundImage: bgImage ? `url(${currentBackgroundUrl})` : undefined,\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\",\n    overflow: \"hidden\",\n    cursor: isDragging && dragMode !== 'rotate' ? \"grabbing\" : \"default\",\n    userSelect: \"none\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.1)\",\n    fontFamily: \"Roboto, -apple-system, BlinkMacSystemFont, sans-serif\"\n  };\n\n  const dropZoneStyle: React.CSSProperties = {\n    position: \"absolute\",\n    inset: 0,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    gap: \"12px\",\n    color: COLORS.GRAY,\n    fontSize: \"14px\",\n    pointerEvents: images.length > 0 ? \"none\" : \"auto\"\n  };\n\n  const [exportButtonHovered, setExportButtonHovered] = useState(false);\n  const [exportButtonActive, setExportButtonActive] = useState(false);\n\n  const exportButtonStyle: React.CSSProperties = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: \"8px\",\n    width: \"100%\",\n    padding: \"14px 20px\",\n    marginTop: \"12px\",\n    backgroundColor: COLORS.ACCENT,\n    color: COLORS.BLACK,\n    border: \"none\",\n    borderRadius: \"10px\",\n    cursor: \"pointer\",\n    fontSize: \"16px\",\n    fontWeight: 600,\n    boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.3)\",\n    transition: \"filter 0.1s ease-out, transform 0.1s ease-out\",\n    ...(exportButtonActive\n      ? {\n          filter: \"brightness(0.9)\",\n          transform: \"scale(0.95)\"\n        }\n      : exportButtonHovered\n        ? {\n            filter: \"brightness(0.9)\"\n          }\n        : {})\n  };\n\n  return (\n    <div className={className} style={style}>\n      {error && (\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: \"8px\",\n            padding: \"12px 16px\",\n            marginBottom: \"12px\",\n            backgroundColor: \"#FFEBEB\",\n            color: COLORS.RED,\n            borderRadius: \"10px\",\n            fontSize: \"13px\",\n            fontWeight: 500,\n            boxShadow: \"0 2px 10px rgba(255, 0, 0, 0.1)\"\n          }}\n        >\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M8 5.333V8M8 10.667h.007M14.667 8A6.667 6.667 0 111.333 8a6.667 6.667 0 0113.334 0z\"\n              stroke=\"currentColor\"\n              strokeWidth=\"1.5\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n          {error}\n        </div>\n      )}\n\n      <div style={{ display: \"flex\", gap: \"16px\" }}>\n        {/* Layer Panel */}\n        <LayerPanel\n          images={images}\n          selectedId={selectedId}\n          onSelect={selectImage}\n          onDelete={deleteImage}\n          onReorder={reorderImage}\n          onAddImage={openFilePicker}\n          currentView={currentView}\n          onViewChange={setCurrentView}\n        />\n\n        {/* Canvas and Export */}\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n          <div\n            ref={containerRef}\n            style={containerStyle}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            onClick={handleContainerClick}\n          >\n            {/* Drop zone placeholder */}\n            {images.length === 0 && (\n              <div style={dropZoneStyle}>\n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    alignItems: \"center\",\n                    padding: \"32px\",\n                    border: `2px dashed ${COLORS.GRAY}`,\n                    borderRadius: \"20px\",\n                    backgroundColor: \"rgba(255, 255, 255, 0.8)\",\n                    maxWidth: \"280px\",\n                    textAlign: \"center\"\n                  }}\n                >\n                  <div\n                    style={{\n                      width: \"56px\",\n                      height: \"56px\",\n                      borderRadius: \"50%\",\n                      backgroundColor: \"#FEF9E7\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      marginBottom: \"16px\",\n                      boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.2)\"\n                    }}\n                  >\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path\n                        d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                        stroke={COLORS.ACCENT}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                      />\n                    </svg>\n                  </div>\n                  <span style={{ fontWeight: 600, color: COLORS.DARK_GRAY, marginBottom: \"4px\" }}>\n                    Пуснете изображение тук\n                  </span>\n                  <span style={{ color: COLORS.GRAY, fontSize: \"13px\", marginBottom: \"16px\" }}>или кликнете за избор</span>\n                  <button\n                    onClick={openFilePicker}\n                    style={{\n                      padding: \"12px 24px\",\n                      backgroundColor: COLORS.ACCENT,\n                      color: COLORS.BLACK,\n                      border: \"none\",\n                      borderRadius: \"10px\",\n                      cursor: \"pointer\",\n                      fontWeight: 600,\n                      fontSize: \"14px\",\n                      boxShadow: \"0 2px 10px rgba(250, 192, 0, 0.3)\",\n                      transition: \"all 0.3s ease-out\"\n                    }}\n                  >\n                    Избери файл\n                  </button>\n                  <span style={{ color: COLORS.GRAY, fontSize: \"11px\", marginTop: \"12px\" }}>\n                    PNG, JPG, WebP, GIF до 10MB\n                  </span>\n                </div>\n              </div>\n            )}\n\n            {/* Clipped area for images - clips to printable area */}\n            {config.printableArea && (\n              <div\n                style={{\n                  position: \"absolute\",\n                  left: config.printableArea.minX,\n                  top: config.printableArea.minY,\n                  width: config.printableArea.maxX - config.printableArea.minX,\n                  height: config.printableArea.maxY - config.printableArea.minY,\n                  overflow: \"hidden\",\n                  pointerEvents: \"none\"\n                }}\n              >\n                {/* Render all images inside clip container */}\n                {images.map(imageData => {\n                  const { transform } = imageData;\n\n                  // Adjust position relative to printable area\n                  const imageStyle: React.CSSProperties = {\n                    position: \"absolute\",\n                    left: transform.position.x - config.printableArea!.minX,\n                    top: transform.position.y - config.printableArea!.minY,\n                    width: transform.size.width,\n                    height: transform.size.height,\n                    transform: transform.rotation ? `rotate(${transform.rotation}deg)` : undefined,\n                    transformOrigin: \"center center\",\n                    userSelect: \"none\",\n                    pointerEvents: \"none\"\n                  };\n\n                  return (\n                    <img\n                      key={imageData.id}\n                      src={imageData.src}\n                      alt=\"Качен дизайн\"\n                      style={imageStyle}\n                      draggable={false}\n                    />\n                  );\n                })}\n              </div>\n            )}\n\n            {/* Render all images (interactive layer - invisible but captures events) */}\n            {images.map(imageData => {\n              const { transform } = imageData;\n              const isSelected = imageData.id === selectedId;\n\n              const imageStyle: React.CSSProperties = {\n                position: \"absolute\",\n                left: transform.position.x,\n                top: transform.position.y,\n                width: transform.size.width,\n                height: transform.size.height,\n                transform: transform.rotation ? `rotate(${transform.rotation}deg)` : undefined,\n                transformOrigin: \"center center\",\n                cursor: isDragging ? \"grabbing\" : \"move\",\n                userSelect: \"none\",\n                pointerEvents: \"auto\",\n                opacity: config.printableArea ? 0 : 1\n              };\n\n              return (\n                <React.Fragment key={imageData.id}>\n                  <img\n                    src={imageData.src}\n                    alt=\"Качен дизайн\"\n                    style={imageStyle}\n                    draggable={false}\n                    onMouseDown={e => handleMouseDown(e, imageData.id, \"move\")}\n                    onClick={e => {\n                      e.stopPropagation();\n                      selectImage(imageData.id);\n                    }}\n                  />\n                  {isSelected && (\n                    <Controls\n                      transform={transform}\n                      allowRotation={config.allowRotation || false}\n                      onMouseDown={(e, mode, handle) => handleMouseDown(e, imageData.id, mode, handle)}\n                    />\n                  )}\n                </React.Fragment>\n              );\n            })}\n\n            {/* Printable area indicator */}\n            {config.printableArea && (\n              <div\n                style={{\n                  position: \"absolute\",\n                  left: config.printableArea.minX,\n                  top: config.printableArea.minY,\n                  width: config.printableArea.maxX - config.printableArea.minX,\n                  height: config.printableArea.maxY - config.printableArea.minY,\n                  border: `1.5px dashed rgba(74, 74, 74, 0.4)`,\n                  borderRadius: \"4px\",\n                  boxSizing: \"border-box\",\n                  pointerEvents: \"none\"\n                }}\n              />\n            )}\n          </div>\n\n          {/* Export Button */}\n          {onExport && (\n            <button\n              style={exportButtonStyle}\n              onClick={handleExport}\n              onMouseEnter={() => setExportButtonHovered(true)}\n              onMouseLeave={() => {\n                setExportButtonHovered(false);\n                setExportButtonActive(false);\n              }}\n              onMouseDown={() => setExportButtonActive(true)}\n              onMouseUp={() => setExportButtonActive(false)}\n            >\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M14 10v2.667A1.334 1.334 0 0112.667 14H3.333A1.334 1.334 0 012 12.667V10M4.667 6.667L8 3.333l3.333 3.334M8 3.333V10\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"1.5\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n              </svg>\n              Завърши дизайн\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Hidden file input */}\n      <input\n        ref={inputRef}\n        type=\"file\"\n        accept={acceptedTypes.join(\",\")}\n        onChange={handleFileChange}\n        style={{ display: \"none\" }}\n      />\n    </div>\n  );\n}\n"],"names":["useRef","useCallback","useState","useEffect","_jsxs","_jsx","_Fragment","COLORS"],"mappings":"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"}